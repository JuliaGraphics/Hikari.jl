<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hikari</title>
    <meta name="description" content="Documentation for Hikari.jl">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/Hikari.jl/dev/assets/style.R8Nq8fMV.css" as="style">
    <link rel="preload stylesheet" href="/Hikari.jl/dev/vp-icons.css" as="style">
    
    <script type="module" src="/Hikari.jl/dev/assets/app.BIumZhqG.js"></script>
    <link rel="preload" href="/Hikari.jl/dev/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/Hikari.jl/dev/assets/chunks/theme.B4CPim2o.js">
    <link rel="modulepreload" href="/Hikari.jl/dev/assets/chunks/framework.UCYVnsjz.js">
    <link rel="modulepreload" href="/Hikari.jl/dev/assets/api.md.BrcF7mWN.lean.js">
    <script src="/Hikari.jl/versions.js"></script>
    <script src="/Hikari.jl/dev/siteinfo.js"></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-a9a9e638><!--[--><!--]--><!--[--><span tabindex="-1" data-v-492508fc></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-492508fc>Skip to content</a><!--]--><!----><header class="VPNav" data-v-a9a9e638 data-v-f1e365da><div class="VPNavBar" data-v-f1e365da data-v-822684d1><div class="wrapper" data-v-822684d1><div class="container" data-v-822684d1><div class="title" data-v-822684d1><div class="VPNavBarTitle has-sidebar" data-v-822684d1 data-v-0f4f798b><a class="title" href="/Hikari.jl/dev/" data-v-0f4f798b><!--[--><!--]--><!----><span data-v-0f4f798b>Hikari</span><!--[--><!--]--></a></div></div><div class="content" data-v-822684d1><div class="content-body" data-v-822684d1><!--[--><!--]--><div class="VPNavBarSearch search" data-v-822684d1><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-822684d1 data-v-e6d46098><span id="main-nav-aria-label" class="visually-hidden" data-v-e6d46098> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Hikari.jl/dev/index" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Hikari.jl/dev/get_started" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>Get Started</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Hikari.jl/dev/shadows" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>Shadows</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Hikari.jl/dev/materials" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>Materials</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/Hikari.jl/dev/api" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>API</span><!--]--></a><!--]--><!--[--><!----><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-822684d1 data-v-af096f4a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-af096f4a data-v-e40a8bb6 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-e40a8bb6></span><span class="vpi-moon moon" data-v-e40a8bb6></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-822684d1 data-v-164c457f data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/JuliaGraphics/Hikari.jl" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-d26d30cb><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-822684d1 data-v-925effce data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-04f5c5e9><span class="vpi-more-horizontal icon" data-v-04f5c5e9></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><!----><!--[--><!--[--><!----><div class="group" data-v-925effce><div class="item appearance" data-v-925effce><p class="label" data-v-925effce>Appearance</p><div class="appearance-action" data-v-925effce><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-925effce data-v-e40a8bb6 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-e40a8bb6></span><span class="vpi-moon moon" data-v-e40a8bb6></span><!--]--></span></span></button></div></div></div><div class="group" data-v-925effce><div class="item social-links" data-v-925effce><div class="VPSocialLinks social-links-list" data-v-925effce data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/JuliaGraphics/Hikari.jl" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-d26d30cb><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--[--><!--[--><div class="VPFlyout VPNolebaseEnhancedReadabilitiesMenu VPNolebaseEnhancedReadabilitiesMenuFlyout" aria-label="Enhanced Readability" role="menuitem" data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-04f5c5e9><span class="text" data-v-04f5c5e9><span class="i-icon-park-outline:book-open option-icon" data-v-04f5c5e9></span><!----><span class="vpi-chevron-down text-icon" data-v-04f5c5e9></span></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><!----><!--[--><!--]--></div></div></div><!--]--><!--]--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-822684d1 data-v-5dea55bf><span class="container" data-v-5dea55bf><span class="top" data-v-5dea55bf></span><span class="middle" data-v-5dea55bf></span><span class="bottom" data-v-5dea55bf></span></span></button></div></div></div></div><div class="divider" data-v-822684d1><div class="divider-line" data-v-822684d1></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-a9a9e638 data-v-070ab83d><div class="container" data-v-070ab83d><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-070ab83d><span class="vpi-align-left menu-icon" data-v-070ab83d></span><span class="menu-text" data-v-070ab83d>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-070ab83d data-v-168ddf5d><button data-v-168ddf5d>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-a9a9e638 data-v-18756405><div class="curtain" data-v-18756405></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-18756405><span class="visually-hidden" id="sidebar-aria-label" data-v-18756405> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0 has-active" data-v-9e426adc data-v-a4b0d9bf><!----><div class="items" data-v-a4b0d9bf><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/Hikari.jl/dev/index" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Home</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/Hikari.jl/dev/get_started" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Get Started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/Hikari.jl/dev/shadows" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Shadows</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/Hikari.jl/dev/materials" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Materials</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/Hikari.jl/dev/api" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>API</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-a9a9e638 data-v-91765379><div class="VPDoc has-sidebar has-aside" data-v-91765379 data-v-83890dd9><!--[--><!--]--><div class="container" data-v-83890dd9><div class="aside" data-v-83890dd9><div class="aside-curtain" data-v-83890dd9></div><div class="aside-container" data-v-83890dd9><div class="aside-content" data-v-83890dd9><div class="VPDocAside" data-v-83890dd9 data-v-6d7b3c46><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-6d7b3c46 data-v-b38bf2ff><div class="content" data-v-b38bf2ff><div class="outline-marker" data-v-b38bf2ff></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-b38bf2ff>On this page</div><ul class="VPDocOutlineItem root" data-v-b38bf2ff data-v-3f927ebe><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-6d7b3c46></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-83890dd9><div class="content-container" data-v-83890dd9><!--[--><!--]--><main class="main" data-v-83890dd9><div style="position:relative;" class="vp-doc _Hikari_jl_dev_api" data-v-83890dd9><div><h2 id="Public-API" tabindex="-1">Public API <a class="header-anchor" href="#Public-API" aria-label="Permalink to &quot;Public API {#Public-API}&quot;">​</a></h2><h2 id="Internal-API" tabindex="-1">Internal API <a class="header-anchor" href="#Internal-API" aria-label="Permalink to &quot;Internal API {#Internal-API}&quot;">​</a></h2><details class="jldocstring custom-block" open><summary><a id="Hikari.BXDF_REFLECTION" href="#Hikari.BXDF_REFLECTION"><span class="jlbinding">Hikari.BXDF_REFLECTION</span></a> <span class="VPBadge info jlObjectType jlConstant"><!--[-->Constant<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BxDFReflTransFlags </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Flags </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> controlling reflection</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">transmission sampling</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L940-L942" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.D65_ILLUMINANT_VALUES" href="#Hikari.D65_ILLUMINANT_VALUES"><span class="jlbinding">Hikari.D65_ILLUMINANT_VALUES</span></a> <span class="VPBadge info jlObjectType jlConstant"><!--[-->Constant<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D65_ILLUMINANT_VALUES</span></span></code></pre></div><p>D65 illuminant spectral power distribution values (normalized to 100 at 560nm).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L407-L411" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.D65_ILLUMINANT_WAVELENGTHS" href="#Hikari.D65_ILLUMINANT_WAVELENGTHS"><span class="jlbinding">Hikari.D65_ILLUMINANT_WAVELENGTHS</span></a> <span class="VPBadge info jlObjectType jlConstant"><!--[-->Constant<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D65_ILLUMINANT_WAVELENGTHS</span></span></code></pre></div><p>Wavelength sample points for D65 illuminant spectrum (300-830nm, 5nm intervals).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L388-L392" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PRIMES" href="#Hikari.PRIMES"><span class="jlbinding">Hikari.PRIMES</span></a> <span class="VPBadge info jlObjectType jlConstant"><!--[-->Constant<!--]--></span></summary><p>First 1023 prime numbers (omitting 2). Used in <code>radical_inverse</code> function.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/primes.jl#L1-L4" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.AliasTable" href="#Hikari.AliasTable"><span class="jlbinding">Hikari.AliasTable</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AliasTable{V1,V2}</span></span></code></pre></div><p>Walker&#39;s alias method for O(1) sampling from a discrete distribution. Each bin stores:</p><ul><li><p><code>p</code>: The PMF (probability) for this index</p></li><li><p><code>q</code>: The threshold for choosing this index vs the alias</p></li><li><p><code>alias</code>: The aliased index if u &gt; q</p></li></ul><p>Following pbrt-v4&#39;s implementation in util/sampling.h</p><p>Parameterized to work with both CPU (Vector) and GPU arrays (CLArray, etc.)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-sampler.jl#L16-L28" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.AliasTable-Tuple{AbstractVector{&lt;:Real}}" href="#Hikari.AliasTable-Tuple{AbstractVector{&lt;:Real}}"><span class="jlbinding">Hikari.AliasTable</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AliasTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(weights</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractVector{Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Construct an alias table from weights (need not sum to 1).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-sampler.jl#L48-L52" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.AmbientLight-Tuple{ColorTypes.RGB{Float32}}" href="#Hikari.AmbientLight-Tuple{ColorTypes.RGB{Float32}}"><span class="jlbinding">Hikari.AmbientLight</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AmbientLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rgb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGB{Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create an AmbientLight from RGB color with automatic spectral conversion and photometric normalization, matching pbrt-v4&#39;s UniformInfiniteLight creation: <code>scale = 1 / SpectrumToPhotometric(spectrum)</code>.</p><p><strong>Example</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">light </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AmbientLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGB{Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/ambient.jl#L10-L21" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.BSDF" href="#Hikari.BSDF"><span class="jlbinding">Hikari.BSDF</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Evaluate BSDF function given incident and outgoind directions.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/bsdf.jl#L93-L95" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.BVHLightSampler" href="#Hikari.BVHLightSampler"><span class="jlbinding">Hikari.BVHLightSampler</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BVHLightSampler</span></span></code></pre></div><p>Spatially-aware light sampler using a BVH over bounded lights. Default light sampler in pbrt-v4 (lightsamplers.h:259-404).</p><p>Construction builds the BVH on CPU from light bounds. The resulting node array and bit trail array are uploaded to GPU for kernel use.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/bvh-light-sampler.jl#L260-L268" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.BVHLightSampler-Tuple{Raycore.MultiTypeSet}" href="#Hikari.BVHLightSampler-Tuple{Raycore.MultiTypeSet}"><span class="jlbinding">Hikari.BVHLightSampler</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">BVHLightSampler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lights</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Raycore.MultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; scene_radius</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Build a BVHLightSampler from a MultiTypeSet of lights. Separates infinite and bounded lights, builds BVH over bounded lights.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/bvh-light-sampler.jl#L277-L282" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.BoxFilter" href="#Hikari.BoxFilter"><span class="jlbinding">Hikari.BoxFilter</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">BoxFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(radius</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><p>Simple box filter with constant weight 1.0 within the support region. This is the simplest filter - uniform sampling within the pixel.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L28-L33" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.CIEXYZTable" href="#Hikari.CIEXYZTable"><span class="jlbinding">Hikari.CIEXYZTable</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CIEXYZTable{V </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AbstractVector{Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>GPU-compatible table for CIE XYZ color matching functions. Use <code>to_gpu(ArrayType, table)</code> to convert to GPU arrays.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L22-L27" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.CIEXYZTable-Tuple{}" href="#Hikari.CIEXYZTable-Tuple{}"><span class="jlbinding">Hikari.CIEXYZTable</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CIEXYZTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CIEXYZTable{Vector{Float32}}</span></span></code></pre></div><p>Create the default CPU CIE XYZ table from built-in data.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L347-L351" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.CloudVolume" href="#Hikari.CloudVolume"><span class="jlbinding">Hikari.CloudVolume</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CloudVolume</span></span></code></pre></div><p>A 3D grid representing cloud density (e.g., liquid water content in g/m³). The volume is axis-aligned and defined by its bounding box.</p><p>This is both a data structure and a material type - when a ray hits geometry with a CloudVolume material, volumetric rendering is performed.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/volume.jl#L22-L30" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.CloudVolume-Tuple{AbstractArray{&lt;:Real, 3}, Tuple{Real, Real, Real}}" href="#Hikari.CloudVolume-Tuple{AbstractArray{&lt;:Real, 3}, Tuple{Real, Real, Real}}"><span class="jlbinding">Hikari.CloudVolume</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CloudVolume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(qˡ_data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray{&lt;:Real,3}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, grid_extent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Tuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a CloudVolume from raw LWC data with physical grid info.</p><p><strong>Arguments</strong></p><ul><li><p><code>qˡ_data</code>: 3D array of liquid water specific humidity (kg/kg)</p></li><li><p><code>grid_extent</code>: Tuple (Lx, Ly, Lz) of domain size in meters</p></li><li><p><code>r_eff</code>: Effective droplet radius in meters (default: 10μm)</p></li><li><p><code>ρ_air</code>: Air density in kg/m³ (default: 1.0)</p></li><li><p><code>scale</code>: Additional scaling factor for visualization (default: 1.0)</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/volume.jl#L432-L443" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.CoatedConductor" href="#Hikari.CoatedConductor"><span class="jlbinding">Hikari.CoatedConductor</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Type alias: <code>CoatedConductor</code> is the same as <code>CoatedConductorMaterial</code></p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/coated-conductor.jl#L248" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.CoatedConductorMaterial" href="#Hikari.CoatedConductorMaterial"><span class="jlbinding">Hikari.CoatedConductorMaterial</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CoatedConductorMaterial</span></span></code></pre></div><p>A layered material with a dielectric coating over a conductor (metal) base. This implements pbrt-v4&#39;s coatedconductor material using random walk sampling between the layers (LayeredBxDF algorithm).</p><p><strong>Fields</strong></p><p><strong>Interface (coating) layer</strong></p><ul><li><p><code>interface_u_roughness</code>: U roughness for the dielectric coating</p></li><li><p><code>interface_v_roughness</code>: V roughness for the dielectric coating</p></li><li><p><code>interface_eta</code>: Index of refraction of the dielectric coating</p></li></ul><p><strong>Conductor (base) layer</strong></p><ul><li><p><code>conductor_eta</code>: Complex index of refraction (real part) - OR use reflectance</p></li><li><p><code>conductor_k</code>: Complex index of refraction (imaginary part)</p></li><li><p><code>reflectance</code>: Alternative to eta/k - artist-friendly reflectance color</p></li><li><p><code>conductor_u_roughness</code>: U roughness for the conductor</p></li><li><p><code>conductor_v_roughness</code>: V roughness for the conductor</p></li></ul><p><strong>Volumetric scattering (between layers)</strong></p><ul><li><p><code>thickness</code>: Thickness of the coating layer (affects absorption)</p></li><li><p><code>albedo</code>: Single-scattering albedo of medium between layers (0 = no absorption)</p></li><li><p><code>g</code>: Henyey-Greenstein asymmetry parameter for medium scattering</p></li></ul><p><strong>Random walk parameters</strong></p><ul><li><p><code>max_depth</code>: Maximum random walk depth</p></li><li><p><code>n_samples</code>: Number of samples for estimating the BSDF</p></li><li><p><code>remap_roughness</code>: Whether to remap roughness to microfacet alpha</p></li></ul><p><strong>Notes</strong></p><ul><li><p><strong>Critical:</strong> Conductor eta/k are scaled by interface IOR: ce /= ieta, ck /= ieta</p></li><li><p>If <code>conductor_eta</code> is nothing, uses reflectance-based approach</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/coated-conductor.jl#L14-L47" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.CoatedConductorMaterial-Tuple{}" href="#Hikari.CoatedConductorMaterial-Tuple{}"><span class="jlbinding">Hikari.CoatedConductorMaterial</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CoatedConductorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; interface_roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, interface_eta</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a coated conductor material with keyword arguments.</p><p><strong>Arguments</strong></p><p><strong>Interface (coating)</strong></p><ul><li><p><code>interface_roughness</code>: Coating roughness (scalar or (u,v) tuple), default 0</p></li><li><p><code>interface_eta</code>: Coating IOR (default 1.5)</p></li></ul><p><strong>Conductor (base) - use EITHER eta/k OR reflectance</strong></p><ul><li><p><code>conductor_eta</code>: Complex IOR real part (RGBSpectrum, tuple, or Texture)</p></li><li><p><code>conductor_k</code>: Complex IOR imaginary part</p></li><li><p><code>reflectance</code>: Alternative artist-friendly color (if eta/k not specified)</p></li><li><p><code>conductor_roughness</code>: Conductor roughness (scalar or (u,v) tuple), default 0.01</p></li></ul><p><strong>Volumetric</strong></p><ul><li><p><code>thickness</code>: Coating thickness (default 0.01)</p></li><li><p><code>albedo</code>: Medium albedo (default 0 = no medium)</p></li><li><p><code>g</code>: HG asymmetry (default 0 = isotropic)</p></li></ul><p><strong>Algorithm</strong></p><ul><li><p><code>max_depth</code>: Max random walk depth (default 10)</p></li><li><p><code>n_samples</code>: Number of samples (default 1)</p></li><li><p><code>remap_roughness</code>: Remap roughness to alpha (default true)</p></li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Glossy coated gold</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CoatedConductorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    interface_roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.05</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    conductor_eta</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.143</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.374</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.442</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Gold</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    conductor_k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.983</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.385</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.603</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Coated copper using reflectance</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CoatedConductorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    reflectance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.95</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.54</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Copper-like</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    conductor_roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Car paint effect (rough coating over smooth metal)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CoatedConductorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    interface_roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    conductor_roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.01</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    reflectance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Red metallic</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/coated-conductor.jl#L118-L166" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.CoatedDiffuse" href="#Hikari.CoatedDiffuse"><span class="jlbinding">Hikari.CoatedDiffuse</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Type alias: <code>CoatedDiffuse</code> is the same as <code>CoatedDiffuseMaterial</code></p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/coated-diffuse.jl#L130" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.CoatedDiffuseMaterial" href="#Hikari.CoatedDiffuseMaterial"><span class="jlbinding">Hikari.CoatedDiffuseMaterial</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CoatedDiffuseMaterial</span></span></code></pre></div><p>A layered material with a dielectric coating over a diffuse base. This implements pbrt-v4&#39;s coateddiffuse material using random walk sampling between the layers (LayeredBxDF algorithm).</p><p><strong>Fields</strong></p><ul><li><p><code>reflectance</code>: Diffuse reflectance of the base layer (RGB color)</p></li><li><p><code>u_roughness</code>: Roughness in U direction for the dielectric coating</p></li><li><p><code>v_roughness</code>: Roughness in V direction for the dielectric coating</p></li><li><p><code>thickness</code>: Thickness of the coating layer (affects absorption)</p></li><li><p><code>eta</code>: Index of refraction of the dielectric coating</p></li><li><p><code>albedo</code>: Single-scattering albedo of medium between layers (0 = no absorption)</p></li><li><p><code>g</code>: Henyey-Greenstein asymmetry parameter for medium scattering</p></li><li><p><code>max_depth</code>: Maximum random walk depth</p></li><li><p><code>n_samples</code>: Number of samples for estimating the BSDF</p></li><li><p><code>remap_roughness</code>: Whether to remap roughness to microfacet alpha</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/coated-diffuse.jl#L13-L31" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.CoatedDiffuseMaterial-Tuple{}" href="#Hikari.CoatedDiffuseMaterial-Tuple{}"><span class="jlbinding">Hikari.CoatedDiffuseMaterial</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CoatedDiffuseMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; reflectance, roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, thickness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.01</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, eta</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a coated diffuse material with keyword arguments.</p><p><strong>Arguments</strong></p><ul><li><p><code>reflectance</code>: Diffuse color (RGBSpectrum, tuple, or Texture)</p></li><li><p><code>roughness</code>: Surface roughness (scalar or (u,v) tuple)</p></li><li><p><code>thickness</code>: Coating thickness (default 0.01)</p></li><li><p><code>eta</code>: Index of refraction (default 1.5 for typical dielectric)</p></li><li><p><code>albedo</code>: Medium albedo for absorption (default 0 = no medium)</p></li><li><p><code>g</code>: HG asymmetry parameter (default 0 = isotropic)</p></li><li><p><code>max_depth</code>: Max random walk depth (default 10)</p></li><li><p><code>n_samples</code>: Number of samples (default 1)</p></li><li><p><code>remap_roughness</code>: Remap roughness to alpha (default true)</p></li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Simple coated diffuse (glossy plastic-like)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CoatedDiffuseMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(reflectance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.45</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.35</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Rough coating</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CoatedDiffuseMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(reflectance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># With absorbing medium</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CoatedDiffuseMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(reflectance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), albedo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/coated-diffuse.jl#L67-L94" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Conductor" href="#Hikari.Conductor"><span class="jlbinding">Hikari.Conductor</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Type alias: <code>Conductor</code> is the same as <code>ConductorMaterial</code></p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L444" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.ConductorMaterial" href="#Hikari.ConductorMaterial"><span class="jlbinding">Hikari.ConductorMaterial</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ConductorMaterial{EtaTex, KTex, RoughTex, ReflTex}</span></span></code></pre></div><p>A metal/conductor material with wavelength-dependent complex index of refraction.</p><p>Metals reflect light based on Fresnel equations for conductors, characterized by:</p><ul><li><p>η (eta): Real part of complex IOR (PiecewiseLinearSpectrum for presets, or RGB texture)</p></li><li><p>k: Imaginary part (extinction coefficient)</p></li><li><p>roughness: Surface roughness for microfacet model</p></li></ul><p><strong>Fields</strong></p><ul><li><p><code>eta</code>: Real part of complex index of refraction (PiecewiseLinearSpectrum or texture)</p></li><li><p><code>k</code>: Extinction coefficient (PiecewiseLinearSpectrum or texture)</p></li><li><p><code>roughness</code>: Surface roughness</p></li><li><p><code>reflectance</code>: Color multiplier for Fresnel reflectance (for tinting)</p></li><li><p><code>remap_roughness</code>: Whether to remap roughness to alpha</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L361-L377" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.ConductorMaterial-Tuple{}" href="#Hikari.ConductorMaterial-Tuple{}"><span class="jlbinding">Hikari.ConductorMaterial</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ConductorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; eta</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, remap_roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a metal/conductor material with Fresnel reflectance.</p><p><strong>Arguments</strong></p><ul><li><p><code>eta</code>: Real part of complex IOR - PiecewiseLinearSpectrum, (r,g,b) tuple, RGBSpectrum, or Texture</p></li><li><p><code>k</code>: Extinction coefficient - PiecewiseLinearSpectrum, (r,g,b) tuple, RGBSpectrum, or Texture</p></li><li><p><code>roughness</code>: Surface roughness (0 = mirror-like, higher = more diffuse)</p></li><li><p><code>reflectance</code>: Color multiplier for tinting the metal (default white = no tint)</p></li><li><p><code>remap_roughness</code>: Whether to remap roughness to microfacet alpha</p></li></ul><p><strong>Presets</strong></p><p>Use the provided metal constants for realistic materials:</p><ul><li><code>METAL_COPPER</code>, <code>METAL_GOLD</code>, <code>METAL_SILVER</code>, <code>METAL_ALUMINUM</code></li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ConductorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()                                        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Generic metal</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ConductorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; METAL_COPPER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.05</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Polished copper</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ConductorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(eta</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Custom green-tinted metal</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L395-L417" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.DDAMajorantIterator" href="#Hikari.DDAMajorantIterator"><span class="jlbinding">Hikari.DDAMajorantIterator</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DDAMajorantIterator</span></span></code></pre></div><p>3D DDA iterator for traversing voxels along a ray through a majorant grid. Returns per-voxel majorant bounds for tight delta tracking.</p><p>Following PBRT-v4&#39;s DDAMajorantIterator implementation. The iterator state is immutable - dda_next returns a new iterator with updated state.</p><p>Note: Uses NTuple instead of Vec types for GPU compatibility.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L218-L228" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.DDAMajorantIterator-Tuple{M} where M&lt;:Hikari.MajorantGrid" href="#Hikari.DDAMajorantIterator-Tuple{M} where M&lt;:Hikari.MajorantGrid"><span class="jlbinding">Hikari.DDAMajorantIterator</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Create an empty/invalid DDA iterator (for rays that miss the grid)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L250" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.DenoiseConfig" href="#Hikari.DenoiseConfig"><span class="jlbinding">Hikari.DenoiseConfig</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DenoiseConfig</span></span></code></pre></div><p>Configuration parameters for the à-trous wavelet denoiser.</p><p><strong>Fields</strong></p><ul><li><p><code>iterations</code>: Number of filter passes (each doubles the filter radius)</p></li><li><p><code>sigma_color</code>: Color edge-stopping threshold (luminance sensitivity)</p></li><li><p><code>sigma_normal</code>: Normal edge-stopping threshold (angular sensitivity)</p></li><li><p><code>sigma_depth</code>: Depth edge-stopping threshold (distance sensitivity)</p></li><li><p><code>use_variance</code>: Whether to use per-pixel variance to guide filtering</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/denoise.jl#L16-L27" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.DenoiseConfig-Tuple{}" href="#Hikari.DenoiseConfig-Tuple{}"><span class="jlbinding">Hikari.DenoiseConfig</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DenoiseConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; iterations</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sigma_color</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sigma_normal</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sigma_depth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, use_variance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a denoiser configuration with sensible defaults.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/denoise.jl#L36-L40" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Dielectric" href="#Hikari.Dielectric"><span class="jlbinding">Hikari.Dielectric</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Type alias: <code>Dielectric</code> is the same as <code>GlassMaterial</code></p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L438" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Diffuse" href="#Hikari.Diffuse"><span class="jlbinding">Hikari.Diffuse</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Type alias: <code>Diffuse</code> is the same as <code>MatteMaterial</code></p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L432" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.DiffuseAreaLight" href="#Hikari.DiffuseAreaLight"><span class="jlbinding">Hikari.DiffuseAreaLight</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DiffuseAreaLight{LeTex}</span></span></code></pre></div><p>Per-triangle area light for emissive surfaces. Following pbrt-v4&#39;s DiffuseAreaLight, stores triangle geometry for sampling and emission texture/color for evaluation.</p><p>Each emissive triangle creates one DiffuseAreaLight. The light sampler (PowerLightSampler) includes these for importance sampling, enabling MIS with BSDF sampling.</p><p><strong>Fields</strong></p><ul><li><p><code>vertices</code>: Triangle vertex positions (for uniform sampling)</p></li><li><p><code>normal</code>: Geometric normal of the triangle</p></li><li><p><code>area</code>: Triangle area (precomputed)</p></li><li><p><code>uv</code>: Vertex UV coordinates (for texture evaluation via barycentric interpolation)</p></li><li><p><code>Le</code>: Emitted radiance — <code>RGBSpectrum</code> for constant, <code>TextureRef</code> for textured emission</p></li><li><p><code>scale</code>: Intensity multiplier applied to Le</p></li><li><p><code>two_sided</code>: If true, emits from both sides of the surface</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/diffuse-area.jl#L6-L24" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.DiffuseTransmission" href="#Hikari.DiffuseTransmission"><span class="jlbinding">Hikari.DiffuseTransmission</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Type alias: <code>DiffuseTransmission</code> is the same as <code>DiffuseTransmissionMaterial</code></p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/diffuse-transmission.jl#L90" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.DiffuseTransmissionMaterial" href="#Hikari.DiffuseTransmissionMaterial"><span class="jlbinding">Hikari.DiffuseTransmissionMaterial</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DiffuseTransmissionMaterial{RTex, TTex}</span></span></code></pre></div><p>A material that diffusely reflects and transmits light.</p><p>Models surfaces like paper, thin fabric, or leaves where light scatters diffusely on both sides. The reflection and transmission are independent Lambertian distributions.</p><p><strong>Fields</strong></p><ul><li><p><code>reflectance</code>: Diffuse reflectance color (same hemisphere as incident)</p></li><li><p><code>transmittance</code>: Diffuse transmittance color (opposite hemisphere)</p></li><li><p><code>scale</code>: Intensity multiplier applied to both R and T</p></li></ul><p><strong>Physics</strong></p><ul><li><p>Reflection: f = R/π (same hemisphere)</p></li><li><p>Transmission: f = T/π (opposite hemisphere)</p></li><li><p>Sampling: probability proportional to max(R) and max(T)</p></li></ul><p><strong>Usage</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Thin white paper (equal reflection and transmission)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">paper </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> DiffuseTransmission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(reflectance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), transmittance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Green leaf (green transmission, less reflection)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">leaf </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> DiffuseTransmission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(reflectance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), transmittance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/diffuse-transmission.jl#L11-L38" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.DiffuseTransmissionMaterial-Tuple{}" href="#Hikari.DiffuseTransmissionMaterial-Tuple{}"><span class="jlbinding">Hikari.DiffuseTransmissionMaterial</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DiffuseTransmissionMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; reflectance, transmittance, scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a diffuse transmission material with keyword arguments.</p><p><strong>Arguments</strong></p><ul><li><p><code>reflectance</code>: Diffuse reflection color (RGBSpectrum, tuple, or Texture)</p></li><li><p><code>transmittance</code>: Diffuse transmission color (RGBSpectrum, tuple, or Texture)</p></li><li><p><code>scale</code>: Intensity multiplier (default 1.0)</p></li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Thin translucent material</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DiffuseTransmission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(reflectance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), transmittance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Pure transmission (no reflection)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DiffuseTransmission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(reflectance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), transmittance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/diffuse-transmission.jl#L56-L74" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.DirectionCone" href="#Hikari.DirectionCone"><span class="jlbinding">Hikari.DirectionCone</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DirectionCone</span></span></code></pre></div><p>Represents a cone of directions with axis <code>w</code> and half-angle <code>cosθ</code>.</p><ul><li><p><code>cosθ = 1</code>: point direction (degenerate cone)</p></li><li><p><code>cosθ = -1</code>: entire sphere</p></li><li><p><code>cosθ = Inf32</code>: empty cone (no directions)</p></li></ul><p>Following pbrt-v4&#39;s DirectionCone (vecmath.h:1784-1850).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-bounds.jl#L14-L23" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.DirectionalLight" href="#Hikari.DirectionalLight"><span class="jlbinding">Hikari.DirectionalLight</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Directional light does not take medium interface, since only reasonable interface for it is vacuum, otherwise all the light would&#39;ve been absorbed by the medium, since the light is infinitely far away.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/directional.jl#L1-L5" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.DirectionalLight-Tuple{ColorTypes.RGB{Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.DirectionalLight-Tuple{ColorTypes.RGB{Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.DirectionalLight</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DirectionalLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rgb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGB{Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, direction; illuminance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a DirectionalLight from RGB color with automatic spectral conversion and photometric normalization, matching pbrt-v4&#39;s light creation pattern.</p><p><strong>Arguments</strong></p><ul><li><p><code>rgb</code>: RGB color (intensity encoded in color values)</p></li><li><p><code>direction</code>: Direction the light travels (away from source)</p></li><li><p><code>illuminance</code>: Optional target illuminance in lux. If specified, overrides the RGB intensity.</p></li></ul><p><strong>Example</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Directional light traveling in -Y direction (sunlight from above)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">light </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> DirectionalLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGB{Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/directional.jl#L35-L51" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Distribution2D" href="#Hikari.Distribution2D"><span class="jlbinding">Hikari.Distribution2D</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Distribution2D{V</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractVector{Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, M</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractMatrix{Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>GPU-compatible 2D distribution that stores all data in flat arrays/matrices. Avoids nested device arrays which cause SPIR-V validation errors on OpenCL.</p><p>The conditional distribution data is stored as 2D matrices where each column represents one conditional distribution:</p><ul><li><p><code>conditional_func[i, v]</code> = func value at index i for row v</p></li><li><p><code>conditional_cdf[i, v]</code> = cdf value at index i for row v</p></li><li><p><code>conditional_func_int[v]</code> = func_int for row v</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sampling.jl#L167-L178" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Distribution2D-Tuple{Matrix{Float32}}" href="#Hikari.Distribution2D-Tuple{Matrix{Float32}}"><span class="jlbinding">Hikari.Distribution2D</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Distribution2D</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(func</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Matrix{Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Construct a GPU-friendly 2D distribution directly from a function matrix. The matrix has dimensions (nv, nu) where nv is height (rows) and nu is width (columns).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sampling.jl#L195-L200" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Emissive" href="#Hikari.Emissive"><span class="jlbinding">Hikari.Emissive</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Emissive{LeTex}</span></span></code></pre></div><p>Emission data for area lights. Always used inside <code>MediumInterface.arealight</code> to add light emission to surfaces. A surface with an arealight both reflects light (via the MediumInterface&#39;s BSDF material) AND emits light.</p><p><strong>Fields</strong></p><ul><li><p><code>Le</code>: Emitted radiance (color/intensity texture or TextureRef)</p></li><li><p><code>scale</code>: Intensity multiplier applied to Le</p></li><li><p><code>two_sided</code>: If true, emits from both sides of the surface</p></li></ul><p><strong>Usage</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Surface that reflects AND glows:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MediumInterface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MatteMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Kd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">diffuse_tex);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    arealight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Emissive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Le</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">glow_color, scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Pure emitter (no reflection):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MediumInterface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Emissive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Le</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bright_tex, scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/emissive.jl#L8-L29" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Emissive-Tuple{}" href="#Hikari.Emissive-Tuple{}"><span class="jlbinding">Hikari.Emissive</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Emissive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; Le</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, two_sided</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create emission data for use in <code>MediumInterface.arealight</code>.</p><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Diffuse surface with warm glow</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MediumInterface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MatteMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Kd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wood_tex);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    arealight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Emissive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Le</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, two_sided</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Pure area light</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MediumInterface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Emissive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Le</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/emissive.jl#L40-L54" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.EnvironmentLight" href="#Hikari.EnvironmentLight"><span class="jlbinding">Hikari.EnvironmentLight</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Environment light that illuminates the scene from all directions using an HDR environment map. Uses equirectangular (lat-long) mapping.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/environment.jl#L1-L4" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.EnvironmentLight-Tuple{String}" href="#Hikari.EnvironmentLight-Tuple{String}"><span class="jlbinding">Hikari.EnvironmentLight</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Convenience constructor that loads an environment map from a file. rotation: Mat3f rotation matrix (use rotation_matrix(angle_deg, axis) to create)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/environment.jl#L24-L27" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.EnvironmentMap" href="#Hikari.EnvironmentMap"><span class="jlbinding">Hikari.EnvironmentMap</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Environment map texture for HDR image-based lighting. Supports sampling by direction vector (for environment lights). Includes importance sampling distribution based on luminance.</p><p>Uses equal-area (octahedral) mapping like pbrt-v4&#39;s ImageInfiniteLight. Expects SQUARE images in equal-area format.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/environment_map.jl#L1-L8" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.EnvironmentMap-Union{Tuple{D}, Tuple{T}, Tuple{S}, Tuple{GeometryBasics.Vec{3, Float32}, Any}} where {S&lt;:Hikari.Spectrum, T, D}" href="#Hikari.EnvironmentMap-Union{Tuple{D}, Tuple{T}, Tuple{S}, Tuple{GeometryBasics.Vec{3, Float32}, Any}} where {S&lt;:Hikari.Spectrum, T, D}"><span class="jlbinding">Hikari.EnvironmentMap</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample the environment map by direction vector. The <code>textures</code> parameter is used to deref TextureRef fields when EnvironmentMap is stored in a MultiTypeSet.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/environment_map.jl#L286-L289" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.FastMaterialProps" href="#Hikari.FastMaterialProps"><span class="jlbinding">Hikari.FastMaterialProps</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Simple material properties extracted from Hikari materials for fast shading.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/fast-wavefront.jl#L59-L61" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Film-Tuple{GeometryBasics.Point{2, Float32}}" href="#Hikari.Film-Tuple{GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.Film</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><ul><li><p>resolution: full resolution of the image in pixels.</p></li><li><p>crop_bounds: subset of the image to render in [0, 1] range.</p></li><li><p>diagonal: length of the diagonal of the film&#39;s physical area in mm.</p></li><li><p>scale: scale factor that is applied to the samples when writing image.</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/film.jl#L109-L114" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.FilmSensor" href="#Hikari.FilmSensor"><span class="jlbinding">Hikari.FilmSensor</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FilmSensor</span></span></code></pre></div><p>Film sensor parameters for physically-based image formation. Matches pbrt-v4&#39;s film sensor simulation.</p><p><strong>Fields</strong></p><ul><li><p><code>iso</code>: ISO sensitivity (default 100). Higher = brighter.</p></li><li><p><code>exposure_time</code>: Exposure time in seconds (default 1.0).</p></li><li><p><code>white_balance</code>: Color temperature in Kelvin for white balance (default 0 = disabled). When set, applies Bradford chromatic adaptation from the illuminant to D65.</p></li></ul><p>The imaging ratio is computed as: <code>imagingRatio = exposure_time * iso / 100</code> This matches pbrt-v4&#39;s PixelSensor behavior.</p><p><strong>Example</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Nikon D850 settings from pbrt bunny-cloud scene</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sensor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> FilmSensor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(iso</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">90</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, exposure_time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, white_balance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">postprocess!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(film; sensor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sensor, tonemap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:aces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/postprocess.jl#L15-L36" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.FilterSample" href="#Hikari.FilterSample"><span class="jlbinding">Hikari.FilterSample</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FilterSample</span></span></code></pre></div><p>Result of sampling a filter. Contains the offset position and the weight for this sample (filter value / pdf).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L13-L18" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.FilterSampler" href="#Hikari.FilterSampler"><span class="jlbinding">Hikari.FilterSampler</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FilterSampler{F</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Importance sampler for filters that don&#39;t have analytical sampling. Tabulates the filter function and uses PiecewiseConstant2D for sampling.</p><p>For BoxFilter and TriangleFilter, direct analytical sampling is used instead.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L488-L495" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.FilterSampler-Tuple{F} where F&lt;:Hikari.AbstractFilter" href="#Hikari.FilterSampler-Tuple{F} where F&lt;:Hikari.AbstractFilter"><span class="jlbinding">Hikari.FilterSampler</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Create a FilterSampler for the given filter.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L502-L504" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.GPUFilterParams" href="#Hikari.GPUFilterParams"><span class="jlbinding">Hikari.GPUFilterParams</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GPUFilterParams</span></span></code></pre></div><p>GPU-compatible filter parameters for kernel use. For filters requiring tabulated importance sampling (Gaussian, Mitchell, Lanczos), the table data must be passed separately to the kernel.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L567-L573" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.GPUFilterSamplerData" href="#Hikari.GPUFilterSamplerData"><span class="jlbinding">Hikari.GPUFilterSamplerData</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GPUFilterSamplerData</span></span></code></pre></div><p>GPU-compatible tabulated data for importance sampling filters. Stores the distribution data needed for sampling Gaussian/Mitchell/Lanczos filters.</p><p>This matches pbrt-v4&#39;s FilterSampler which uses PiecewiseConstant2D.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L603-L610" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.GPUFilterSamplerData-Tuple{Hikari.AbstractFilter}" href="#Hikari.GPUFilterSamplerData-Tuple{Hikari.AbstractFilter}"><span class="jlbinding">Hikari.GPUFilterSamplerData</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Build GPU-compatible filter sampler data from a filter. Returns nothing for Box/Triangle filters (they use analytical sampling).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L634-L637" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.GaussianFilter" href="#Hikari.GaussianFilter"><span class="jlbinding">Hikari.GaussianFilter</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GaussianFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(radius</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), sigma</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Gaussian filter with configurable sigma. The filter is truncated at the radius and normalized by subtracting the value at the boundary.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L129-L135" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.GlassMaterial" href="#Hikari.GlassMaterial"><span class="jlbinding">Hikari.GlassMaterial</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GlassMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Kr, Kt, u_roughness, v_roughness, index, remap_roughness)</span></span></code></pre></div><p>Glass/dielectric material with reflection and transmission.</p><ul><li><p><code>Kr</code>: Spectral reflectance (Texture or TextureRef)</p></li><li><p><code>Kt</code>: Spectral transmittance (Texture or TextureRef)</p></li><li><p><code>u_roughness</code>: Roughness in u direction (0 = perfect specular)</p></li><li><p><code>v_roughness</code>: Roughness in v direction (0 = perfect specular)</p></li><li><p><code>index</code>: Index of refraction</p></li><li><p><code>remap_roughness</code>: Whether to remap roughness to alpha</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L197-L208" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.GlassMaterial-Tuple{}" href="#Hikari.GlassMaterial-Tuple{}"><span class="jlbinding">Hikari.GlassMaterial</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GlassMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; Kr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), Kt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, remap_roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a glass/dielectric material with reflection and transmission.</p><p><strong>Arguments</strong></p><ul><li><p><code>Kr</code>: Reflectance color</p></li><li><p><code>Kt</code>: Transmittance color</p></li><li><p><code>roughness</code>: Surface roughness (0 = perfect specular, can be single value or (u,v) tuple)</p></li><li><p><code>index</code>: Index of refraction (1.5 for glass, 1.33 for water, 2.4 for diamond)</p></li><li><p><code>remap_roughness</code>: Whether to remap roughness to microfacet alpha</p></li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GlassMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()                                </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Clear glass</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GlassMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Kt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Amber tinted</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GlassMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)                   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Frosted glass</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GlassMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.05</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Anisotropic roughness</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L279-L298" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.GridMedium" href="#Hikari.GridMedium"><span class="jlbinding">Hikari.GridMedium</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GridMedium</span></span></code></pre></div><p>A participating medium with spatially varying density. Uses a 3D grid for density and a coarser majorant grid for efficient sampling.</p><p>Note: Uses Vec{3, Int32} for density_res for GPU compatibility.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L865-L872" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.HGPhaseFunction" href="#Hikari.HGPhaseFunction"><span class="jlbinding">Hikari.HGPhaseFunction</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HGPhaseFunction</span></span></code></pre></div><p>Henyey-Greenstein phase function for anisotropic scattering.</p><ul><li><p>g &gt; 0: Forward scattering (clouds typically g ≈ 0.85)</p></li><li><p>g = 0: Isotropic scattering</p></li><li><p>g &lt; 0: Backward scattering</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L8-L15" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.HomogeneousMajorantIterator" href="#Hikari.HomogeneousMajorantIterator"><span class="jlbinding">Hikari.HomogeneousMajorantIterator</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HomogeneousMajorantIterator</span></span></code></pre></div><p>Simple iterator that returns a single majorant segment for homogeneous media. Provides consistent iterator interface with DDAMajorantIterator.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L126-L131" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.HomogeneousMedium" href="#Hikari.HomogeneousMedium"><span class="jlbinding">Hikari.HomogeneousMedium</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HomogeneousMedium</span></span></code></pre></div><p>A participating medium with constant properties throughout. Simplest medium type - majorant equals actual extinction everywhere.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L756-L761" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.LanczosSincFilter" href="#Hikari.LanczosSincFilter"><span class="jlbinding">Hikari.LanczosSincFilter</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LanczosSincFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(radius</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), tau</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Lanczos-windowed sinc filter for high-quality reconstruction. The sinc function is windowed by another sinc to reduce ringing.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L263-L268" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.LayeredBSDFSample" href="#Hikari.LayeredBSDFSample"><span class="jlbinding">Hikari.LayeredBSDFSample</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LayeredBSDFSample </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Internal sample result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LayeredBxDF interfaces</span></span></code></pre></div><p>Contains the sampled direction, BSDF value, pdf, and flags indicating whether the sample is reflection/transmission and specular/glossy.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L947-L952" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.LightBVHNode" href="#Hikari.LightBVHNode"><span class="jlbinding">Hikari.LightBVHNode</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LightBVHNode</span></span></code></pre></div><p>BVH node for the light sampler. Stores unquantized LightBounds fields plus tree connectivity. Interior nodes store child1 index; child0 is always at <code>node_idx + 1</code> (left child immediately follows parent in array).</p><p>Simplification vs pbrt-v4: we skip CompactLightBounds quantization. Node is ~64 bytes instead of 32, but avoids OctahedralVector/bit-packing complexity. With 37k lights this is ~5MB — negligible on GPU.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/bvh-light-sampler.jl#L15-L25" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.LightBounds" href="#Hikari.LightBounds"><span class="jlbinding">Hikari.LightBounds</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LightBounds</span></span></code></pre></div><p>Stores spatial and directional bounds for a light or group of lights. Used by BVHLightSampler for importance-based light selection.</p><p>Following pbrt-v4&#39;s LightBounds (lights.h:104-125).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-bounds.jl#L115-L122" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.LightSamplerData" href="#Hikari.LightSamplerData"><span class="jlbinding">Hikari.LightSamplerData</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LightSamplerData</span></span></code></pre></div><p>GPU-compatible light sampler data structure. Stores alias table as flat arrays that can be uploaded to GPU.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-sampler.jl#L462-L467" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MajorantGrid" href="#Hikari.MajorantGrid"><span class="jlbinding">Hikari.MajorantGrid</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MajorantGrid</span></span></code></pre></div><p>Coarse grid storing maximum extinction coefficients for DDA traversal. Used to provide tight majorant bounds in heterogeneous media.</p><p>Note: Uses Vec{3, Int32} instead of Vec3i (Int64) for GPU compatibility.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L170-L177" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MatrixCamera" href="#Hikari.MatrixCamera"><span class="jlbinding">Hikari.MatrixCamera</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MatrixCamera </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Camera</span></span></code></pre></div><p>A camera defined by view and projection matrices, matching the convention used by Makie&#39;s <code>Camera</code> struct (OpenGL-style: camera looks along -z in camera space).</p><p>This is a fallback camera for scenes that don&#39;t use <code>Camera3D</code> (e.g. <code>Axis3</code> which uses its own camera type but still sets view/projection matrices on the scene camera).</p><p>The view matrix is world-to-camera, and the projection matrix is camera-to-clip (NDC). Both use OpenGL conventions (right-handed, camera looks along -z, clip z in [-1, 1]).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/camera/matrix.jl#L1-L12" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MatrixCamera-Tuple{StaticArraysCore.SMatrix{4, 4, Float32, 16}, StaticArraysCore.SMatrix{4, 4, Float32, 16}, GeometryBasics.Point{2, Float32}, Raycore.Bounds2}" href="#Hikari.MatrixCamera-Tuple{StaticArraysCore.SMatrix{4, 4, Float32, 16}, StaticArraysCore.SMatrix{4, 4, Float32, 16}, GeometryBasics.Point{2, Float32}, Raycore.Bounds2}"><span class="jlbinding">Hikari.MatrixCamera</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MatrixCamera</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(view, projection, resolution, screen_window)</span></span></code></pre></div><p>Construct a <code>MatrixCamera</code> with a custom screen window (NDC sub-region). Used for rendering a cropped viewport where film pixels correspond to a sub-region of the full projection.</p><ul><li><code>screen_window</code>: NDC bounds for the visible region (default full: [-1,-1] to [1,1])</li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/camera/matrix.jl#L60-L68" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MatrixCamera-Tuple{StaticArraysCore.SMatrix{4, 4, Float32, 16}, StaticArraysCore.SMatrix{4, 4, Float32, 16}, GeometryBasics.Point{2, Float32}}" href="#Hikari.MatrixCamera-Tuple{StaticArraysCore.SMatrix{4, 4, Float32, 16}, StaticArraysCore.SMatrix{4, 4, Float32, 16}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.MatrixCamera</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MatrixCamera</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(view</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Mat4f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, projection</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Mat4f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, resolution</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Construct a <code>MatrixCamera</code> from Makie-style view and projection matrices.</p><ul><li><p><code>view</code>: world-to-camera matrix (OpenGL convention, camera looks along -z)</p></li><li><p><code>projection</code>: camera-to-clip matrix (OpenGL perspective projection)</p></li><li><p><code>resolution</code>: film resolution as <code>Point2f(width, height)</code></p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/camera/matrix.jl#L21-L29" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MatteMaterial" href="#Hikari.MatteMaterial"><span class="jlbinding">Hikari.MatteMaterial</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MatteMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Kd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Texture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, σ</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Texture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Matte (diffuse) material with Lambertian or Oren-Nayar BRDF.</p><ul><li><p><code>Kd</code>: Spectral diffuse reflection (color texture or TextureRef)</p></li><li><p><code>σ</code>: Scalar roughness for Oren-Nayar model (0 = Lambertian)</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L172-L179" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MatteMaterial-Tuple{}" href="#Hikari.MatteMaterial-Tuple{}"><span class="jlbinding">Hikari.MatteMaterial</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MatteMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; Kd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), σ</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a matte (diffuse) material with optional Oren-Nayar roughness.</p><p><strong>Arguments</strong></p><ul><li><p><code>Kd</code>: Diffuse color - can be RGBSpectrum, (r,g,b) tuple, or Texture</p></li><li><p><code>σ</code>: Roughness angle in degrees (0 = Lambertian, &gt;0 = Oren-Nayar)</p></li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MatteMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Kd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Red matte</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MatteMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Kd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), σ</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Red with roughness</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MatteMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Kd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">my_texture)                   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Textured</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L240-L255" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MediumInteraction" href="#Hikari.MediumInteraction"><span class="jlbinding">Hikari.MediumInteraction</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MediumInteraction</span></span></code></pre></div><p>Represents an interaction point within a participating medium. Created when a real scattering event occurs during delta tracking.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L735-L740" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MediumInterface" href="#Hikari.MediumInterface"><span class="jlbinding">Hikari.MediumInterface</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MediumInterface{M</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Material</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, I, O}</span></span></code></pre></div><p>Material wrapper that combines a surface BSDF with medium boundaries. Surfaces define boundaries between media.</p><p>Emission is handled separately by DiffuseAreaLight (registered per-triangle in scene.lights, not on the material).</p><p><strong>Fields</strong></p><ul><li><p><code>material</code>: The underlying BSDF material (e.g., MatteMaterial, GlassMaterial)</p></li><li><p><code>inside</code>: Medium for inside the surface, or <code>nothing</code> for vacuum</p></li><li><p><code>outside</code>: Medium for outside the surface, or <code>nothing</code> for vacuum</p></li></ul><p><strong>Usage</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Glass with fog inside</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MediumInterface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GlassMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); inside</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fog)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Simple material with no medium transition</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MediumInterface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MatteMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Kd, σ))</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/medium-interface.jl#L16-L38" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MediumInterfaceIdx" href="#Hikari.MediumInterfaceIdx"><span class="jlbinding">Hikari.MediumInterfaceIdx</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MediumInterfaceIdx</span></span></code></pre></div><p>Internal index wrapper with material and medium indices for GPU-compatible dispatch. Created during scene building from <code>MediumInterface</code>.</p><p><strong>Fields (all SetKey indices)</strong></p><ul><li><p><code>material</code>: SetKey into materials container (BSDF material)</p></li><li><p><code>inside</code>: SetKey for inside medium (invalid = vacuum)</p></li><li><p><code>outside</code>: SetKey for outside medium (invalid = vacuum)</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/medium-interface.jl#L65-L75" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MediumProperties" href="#Hikari.MediumProperties"><span class="jlbinding">Hikari.MediumProperties</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MediumProperties</span></span></code></pre></div><p>Properties of a participating medium at a specific point. Returned by medium sampling functions.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L82-L87" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Metal" href="#Hikari.Metal"><span class="jlbinding">Hikari.Metal</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Type alias: <code>Metal</code> is the same as <code>ConductorMaterial</code> (legacy alias)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L447" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MetalMaterial" href="#Hikari.MetalMaterial"><span class="jlbinding">Hikari.MetalMaterial</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Type alias: <code>MetalMaterial</code> is the same as <code>ConductorMaterial</code> (legacy alias)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L450" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Mirror" href="#Hikari.Mirror"><span class="jlbinding">Hikari.Mirror</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Type alias: <code>Mirror</code> is the same as <code>MirrorMaterial</code></p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L435" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MirrorMaterial" href="#Hikari.MirrorMaterial"><span class="jlbinding">Hikari.MirrorMaterial</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MirrorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Kr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Texture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Perfect mirror (specular reflection) material.</p><ul><li><code>Kr</code>: Spectral reflectance (color texture or TextureRef)</li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L186-L192" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MirrorMaterial-Tuple{}" href="#Hikari.MirrorMaterial-Tuple{}"><span class="jlbinding">Hikari.MirrorMaterial</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MirrorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; Kr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><p>Create a perfect mirror (specular reflection) material.</p><p><strong>Arguments</strong></p><ul><li><code>Kr</code>: Reflectance color - can be RGBSpectrum, (r,g,b) tuple, or Texture</li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MirrorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()                               </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Default silver mirror</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MirrorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Kr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.95</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.93</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.88</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Gold-tinted</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MirrorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Kr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Using tuple</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L260-L274" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MitchellFilter" href="#Hikari.MitchellFilter"><span class="jlbinding">Hikari.MitchellFilter</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MitchellFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(radius</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), B</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, C</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Mitchell-Netravali filter - a family of cubic filters parameterized by B and C. Default B=C=1/3 gives a good balance between ringing and blurring.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L209-L214" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Mix" href="#Hikari.Mix"><span class="jlbinding">Hikari.Mix</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Type alias: <code>Mix</code> is the same as <code>MixMaterial</code></p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/mix-material.jl#L274" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MixMaterial" href="#Hikari.MixMaterial"><span class="jlbinding">Hikari.MixMaterial</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MixMaterial{M1, M2, AmountTex}</span></span></code></pre></div><p>A material that stochastically blends between two sub-materials based on a mixing amount.</p><p>Following pbrt-v4, the material selection is deterministic based on:</p><ul><li><p>The intersection position and viewing direction</p></li><li><p>A hash function to generate deterministic randomness</p></li><li><p>The <code>amount</code> texture value at the hit point</p></li></ul><p><strong>Fields</strong></p><ul><li><p><code>material1</code>: First material (selected when amount → 0)</p></li><li><p><code>material2</code>: Second material (selected when amount → 1)</p></li><li><p><code>amount</code>: Texture controlling the blend ratio (0 = material1, 1 = material2)</p></li><li><p><code>material1_idx</code>: Index of material1 in the materials tuple</p></li><li><p><code>material2_idx</code>: Index of material2 in the materials tuple</p></li></ul><p><strong>Usage</strong></p><p>MixMaterial is resolved at intersection time before material evaluation. The integrator should call <code>choose_material()</code> to get the actual material index to use for the hit point, then proceed with normal material evaluation.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/mix-material.jl#L17-L38" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MixMaterial-Tuple{}" href="#Hikari.MixMaterial-Tuple{}"><span class="jlbinding">Hikari.MixMaterial</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MixMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; materials, amount, material_indices)</span></span></code></pre></div><p>Create a MixMaterial with keyword arguments.</p><p><strong>Arguments</strong></p><ul><li><p><code>materials</code>: Tuple of two materials (material1, material2)</p></li><li><p><code>amount</code>: Mixing amount (0-1 scalar, texture, or image path)</p></li><li><p><code>material_indices</code>: Tuple of SetKey for each material</p></li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Simple 50-50 blend</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MixMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    materials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(gold_material, red_diffuse),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    amount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    material_indices</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(gold_idx, diffuse_idx)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Texture-based blend (e.g., mask texture)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MixMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    materials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(gold_material, red_diffuse),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    amount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mask_texture,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    material_indices</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(gold_idx, diffuse_idx)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/mix-material.jl#L59-L85" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.MultiMaterialQueue" href="#Hikari.MultiMaterialQueue"><span class="jlbinding">Hikari.MultiMaterialQueue</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MultiMaterialQueue{N}</span></span></code></pre></div><p>Container holding N separate work queues, one per material type. Items are routed to the correct queue based on SetKey.material_type.</p><p>Following pbrt-v4&#39;s MultiWorkQueue pattern where:</p><ul><li><p>Push routes to correct sub-queue based on type</p></li><li><p>Each sub-queue is processed with type-specialized kernel</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/multi-material-eval.jl#L13-L22" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.NanoVDBMedium" href="#Hikari.NanoVDBMedium"><span class="jlbinding">Hikari.NanoVDBMedium</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NanoVDBMedium</span></span></code></pre></div><p>Direct NanoVDB volume sampling medium that keeps the buffer in native format. Matches pbrt-v4&#39;s NanoVDBMedium implementation exactly.</p><p>The buffer contains the entire decompressed NanoVDB grid data. Tree traversal is done on-the-fly using byte offsets.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/nanovdb.jl#L144-L152" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.NanoVDBMedium-Tuple{Array{Float32, 3}}" href="#Hikari.NanoVDBMedium-Tuple{Array{Float32, 3}}"><span class="jlbinding">Hikari.NanoVDBMedium</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NanoVDBMedium</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Array{Float32,3}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; bounds, σ_a, σ_s, g, majorant_res, buffer_alloc)</span></span></code></pre></div><p>Construct a NanoVDBMedium from a dense 3D array by building a sparse NanoVDB tree. Only leaf blocks (8³) containing non-zero voxels are stored, giving significant memory savings for sparse volumetric data like cloud fields.</p><p><strong>Arguments</strong></p><ul><li><p><code>data</code>: Dense 3D Float32 array of density/opacity values</p></li><li><p><code>bounds</code>: World-space bounding box (<code>Bounds3</code>)</p></li><li><p><code>σ_a</code>: Absorption coefficient (default: 0 for pure scattering clouds)</p></li><li><p><code>σ_s</code>: Scattering coefficient (default: 1)</p></li><li><p><code>g</code>: Henyey-Greenstein asymmetry parameter</p></li><li><p><code>majorant_res</code>: Resolution of majorant grid (default: 64³)</p></li><li><p><code>buffer_alloc</code>: Array constructor for target device (default: <code>Vector{UInt8}</code>)</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/nanovdb.jl#L948-L963" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.NanoVDBMedium-Tuple{String}" href="#Hikari.NanoVDBMedium-Tuple{String}"><span class="jlbinding">Hikari.NanoVDBMedium</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NanoVDBMedium</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filepath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; σ_a, σ_s, g, transform, majorant_res)</span></span></code></pre></div><p>Construct a NanoVDBMedium from a NanoVDB file.</p><p><strong>Arguments</strong></p><ul><li><p><code>filepath</code>: Path to the .nvdb file</p></li><li><p><code>σ_a</code>: Absorption coefficient (RGBSpectrum)</p></li><li><p><code>σ_s</code>: Scattering coefficient (RGBSpectrum)</p></li><li><p><code>g</code>: Henyey-Greenstein asymmetry parameter</p></li><li><p><code>transform</code>: Optional 3x3 rotation matrix (medium-to-world, like pbrt&#39;s Rotate)</p></li><li><p><code>majorant_res</code>: Resolution of majorant grid (default 64³)</p></li></ul><p>For pbrt bunny-cloud scene, use: transform = RotZ(π) * RotX(π/2) # Rotate 180° around Z, then 90° around X</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/nanovdb.jl#L1304-L1319" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PCG32State" href="#Hikari.PCG32State"><span class="jlbinding">Hikari.PCG32State</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PCG32State</span></span></code></pre></div><p>GPU-compatible immutable PCG32 random number generator state. Uses tuple-like struct for stack allocation on GPU.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L749-L754" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PWDirectLightingResult" href="#Hikari.PWDirectLightingResult"><span class="jlbinding">Hikari.PWDirectLightingResult</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PWDirectLightingResult</span></span></code></pre></div><p>Result of direct lighting calculation for one light sample.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L492-L496" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PWEscapedRayWorkItem" href="#Hikari.PWEscapedRayWorkItem"><span class="jlbinding">Hikari.PWEscapedRayWorkItem</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PWEscapedRayWorkItem</span></span></code></pre></div><p>A ray that escaped the scene (missed all geometry). Used to compute contribution from environment/infinite lights.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/workitems.jl#L95-L100" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PWHitAreaLightWorkItem" href="#Hikari.PWHitAreaLightWorkItem"><span class="jlbinding">Hikari.PWHitAreaLightWorkItem</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PWHitAreaLightWorkItem</span></span></code></pre></div><p>A ray that hit an emissive surface (area light). Contains info needed to compute emission contribution with MIS.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/workitems.jl#L129-L134" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PWLightSample" href="#Hikari.PWLightSample"><span class="jlbinding">Hikari.PWLightSample</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PWLightSample</span></span></code></pre></div><p>Result of sampling a light source with spectral radiance.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L8-L12" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PWLightSampleContext" href="#Hikari.PWLightSampleContext"><span class="jlbinding">Hikari.PWLightSampleContext</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PWLightSampleContext</span></span></code></pre></div><p>Context for sampling lights - position, geometric normal, shading normal. Used for MIS weight computation.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/workitems.jl#L32-L37" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PWMISContext" href="#Hikari.PWMISContext"><span class="jlbinding">Hikari.PWMISContext</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PWMISContext</span></span></code></pre></div><p>Context needed for computing MIS weights between light and BSDF sampling.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/workitems.jl#L237-L241" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PWMaterialEvalResult" href="#Hikari.PWMaterialEvalResult"><span class="jlbinding">Hikari.PWMaterialEvalResult</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PWMaterialEvalResult</span></span></code></pre></div><p>Result of evaluating a material for the wavefront pipeline.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-dispatch.jl#L146-L150" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PWMaterialEvalWorkItem" href="#Hikari.PWMaterialEvalWorkItem"><span class="jlbinding">Hikari.PWMaterialEvalWorkItem</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PWMaterialEvalWorkItem</span></span></code></pre></div><p>Work item for material/BSDF evaluation after ray intersection. Contains all intersection data needed for shading.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/workitems.jl#L171-L176" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PWPixelSampleState" href="#Hikari.PWPixelSampleState"><span class="jlbinding">Hikari.PWPixelSampleState</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PWPixelSampleState</span></span></code></pre></div><p>Per-pixel state accumulated during spectral path tracing.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/workitems.jl#L208-L212" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PWRaySamples" href="#Hikari.PWRaySamples"><span class="jlbinding">Hikari.PWRaySamples</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PWRaySamples</span></span></code></pre></div><p>Random samples used for direct and indirect lighting at each path vertex.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/workitems.jl#L9-L13" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PWRayWorkItem" href="#Hikari.PWRayWorkItem"><span class="jlbinding">Hikari.PWRayWorkItem</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PWRayWorkItem</span></span></code></pre></div><p>A ray to be traced, along with full path state. This is the main work item flowing through the ray queue.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/workitems.jl#L54-L59" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PWRayWorkItem-Tuple{Raycore.Ray, Hikari.SampledWavelengths{4}, Int32}" href="#Hikari.PWRayWorkItem-Tuple{Raycore.Ray, Hikari.SampledWavelengths{4}, Int32}"><span class="jlbinding">Hikari.PWRayWorkItem</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PWRayWorkItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ray, lambda, pixel_index)</span></span></code></pre></div><p>Create a new camera ray work item with default path state.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/workitems.jl#L74-L78" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PWShadowRayWorkItem" href="#Hikari.PWShadowRayWorkItem"><span class="jlbinding">Hikari.PWShadowRayWorkItem</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PWShadowRayWorkItem</span></span></code></pre></div><p>A shadow ray for direct lighting visibility test.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/workitems.jl#L156-L160" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PiecewiseConstant2D" href="#Hikari.PiecewiseConstant2D"><span class="jlbinding">Hikari.PiecewiseConstant2D</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PiecewiseConstant2D</span></span></code></pre></div><p>2D piecewise constant distribution for importance sampling. Stores a 2D function tabulated on a grid and allows efficient sampling proportional to the function values.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L329-L335" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PiecewiseConstant2D-Tuple{AbstractMatrix{Float32}, GeometryBasics.Point{2, Float32}, GeometryBasics.Point{2, Float32}}" href="#Hikari.PiecewiseConstant2D-Tuple{AbstractMatrix{Float32}, GeometryBasics.Point{2, Float32}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.PiecewiseConstant2D</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Build a PiecewiseConstant2D from a 2D function array. func[y, x] = function value at grid cell (x, y).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L356-L359" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PixelSample" href="#Hikari.PixelSample"><span class="jlbinding">Hikari.PixelSample</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PixelSample</span></span></code></pre></div><p>Holds all sample values needed for a single pixel sample in path tracing. This is a stateless struct computed deterministically from (pixel, sample_index).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/stratified.jl#L158-L163" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PointLight-Tuple{ColorTypes.RGB{Float32}, Any}" href="#Hikari.PointLight-Tuple{ColorTypes.RGB{Float32}, Any}"><span class="jlbinding">Hikari.PointLight</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PointLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rgb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGB{Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, position; power</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PointLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rgb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, position; power</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a PointLight from RGB color with automatic spectral conversion and photometric normalization, matching pbrt-v4&#39;s light creation pattern.</p><p>Converts RGB to RGBIlluminantSpectrum and applies photometric normalization: <code>scale = 1 / SpectrumToPhotometric(spectrum)</code> where SpectrumToPhotometric extracts the D65 illuminant component.</p><p><strong>Arguments</strong></p><ul><li><p><code>rgb</code>: RGB color (intensity encoded in color values, e.g., RGB(50,50,50) for bright white)</p></li><li><p><code>position</code>: World-space position of the light</p></li><li><p><code>power</code>: Optional radiant power in Watts. If specified, overrides the RGB intensity.</p></li></ul><p><strong>Example</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Equivalent to pbrt-v4&#39;s: LightSource &quot;point&quot; &quot;rgb I&quot; [50 50 50]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">light </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PointLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGB{Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Or with Makie&#39;s RGBf:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">light </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PointLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/point.jl#L30-L54" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PowerLightSampler" href="#Hikari.PowerLightSampler"><span class="jlbinding">Hikari.PowerLightSampler</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PowerLightSampler</span></span></code></pre></div><p>Sample lights proportional to their total power using an alias table. O(1) sampling with O(N) construction. Good for scenes with varying light intensities.</p><p>Following pbrt-v4&#39;s PowerLightSampler which uses light.Phi() to estimate power.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-sampler.jl#L222-L229" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.RGBAlbedoSpectrum" href="#Hikari.RGBAlbedoSpectrum"><span class="jlbinding">Hikari.RGBAlbedoSpectrum</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RGBAlbedoSpectrum</span></span></code></pre></div><p>Bounded [0,1] spectrum for surface reflectance/albedo.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L278-L282" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.RGBGridMedium" href="#Hikari.RGBGridMedium"><span class="jlbinding">Hikari.RGBGridMedium</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RGBGridMedium</span></span></code></pre></div><p>A participating medium with spatially varying per-voxel RGB absorption and scattering coefficients. Following pbrt-v4&#39;s RGBGridMedium implementation exactly.</p><p>Key design (matching pbrt-v4):</p><ul><li><p>Optional σ_a grid: 3D array of RGBSpectrum absorption coefficients (if absent, defaults to 1.0)</p></li><li><p>Optional σ_s grid: 3D array of RGBSpectrum scattering coefficients (if absent, defaults to 1.0)</p></li><li><p>Optional Le grid: 3D array of RGBSpectrum emission coefficients (for emissive volumes)</p></li><li><p>sigma_scale: Global multiplier for σ_a and σ_s grids</p></li><li><p>Le_scale: Global multiplier for Le grid</p></li><li><p>The majorant grid stores <code>sigma_scale * max(σ_a + σ_s)</code> per coarse voxel</p></li><li><p>In SampleRay, uses unit σ_t since scaling is already in the majorant grid</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L987-L1001" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.RGBGridMedium-Tuple{}" href="#Hikari.RGBGridMedium-Tuple{}"><span class="jlbinding">Hikari.RGBGridMedium</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBGridMedium</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; σ_a_grid, σ_s_grid, Le_grid, sigma_scale, Le_scale, g, bounds, transform, majorant_res)</span></span></code></pre></div><p>Create an RGBGridMedium following pbrt-v4&#39;s design exactly.</p><p>At least one of σ_a_grid or σ_s_grid must be provided. The grids contain per-voxel RGBSpectrum values that are multiplied by sigma_scale (or Le_scale for emission).</p><p><strong>Arguments</strong></p><ul><li><p><code>σ_a_grid</code>: Optional 3D array of RGBSpectrum absorption coefficients</p></li><li><p><code>σ_s_grid</code>: Optional 3D array of RGBSpectrum scattering coefficients</p></li><li><p><code>Le_grid</code>: Optional 3D array of RGBSpectrum emission coefficients (requires σ_a_grid)</p></li><li><p><code>sigma_scale</code>: Global multiplier for σ_a and σ_s grids (default: 1.0)</p></li><li><p><code>Le_scale</code>: Global multiplier for Le grid (default: 0.0)</p></li><li><p><code>g</code>: Henyey-Greenstein asymmetry parameter (default: 0.0)</p></li><li><p><code>bounds</code>: Volume bounds in medium space (default: unit cube)</p></li><li><p><code>transform</code>: Transform from medium to render space (default: identity)</p></li><li><p><code>majorant_res</code>: Resolution of the majorant grid (default: 16³)</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1042-L1060" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.RGBIlluminantSpectrum" href="#Hikari.RGBIlluminantSpectrum"><span class="jlbinding">Hikari.RGBIlluminantSpectrum</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RGBIlluminantSpectrum</span></span></code></pre></div><p>Illuminant spectrum for light sources, matching pbrt-v4&#39;s RGBIlluminantSpectrum. Stores RGB coefficients and multiplies by D65 illuminant when sampled.</p><p>Fields:</p><ul><li><p><code>poly::RGBSigmoidPolynomial</code> - Sigmoid polynomial for spectral shape</p></li><li><p><code>scale::Float32</code> - Scale factor (2 * max(r,g,b) from construction)</p></li></ul><p>When sampled at wavelength λ: returns <code>scale * poly(λ) * D65(λ)</code></p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L319-L330" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.RGBSigmoidPolynomial" href="#Hikari.RGBSigmoidPolynomial"><span class="jlbinding">Hikari.RGBSigmoidPolynomial</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RGBSigmoidPolynomial</span></span></code></pre></div><p>Represents a smooth spectrum using a sigmoid-wrapped polynomial. The spectrum value at wavelength λ is: sigmoid(c0_λ² + c1_λ + c2) where sigmoid(x) = 0.5 + x / (2*sqrt(1 + x²))</p><p>This provides a smooth, bounded [0,1] spectrum from just 3 coefficients.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L8-L16" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.RGBSigmoidPolynomial-Tuple{Float32}" href="#Hikari.RGBSigmoidPolynomial-Tuple{Float32}"><span class="jlbinding">Hikari.RGBSigmoidPolynomial</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Evaluate spectrum at wavelength λ (in nm)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L31" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.RGBToSpectrumTable" href="#Hikari.RGBToSpectrumTable"><span class="jlbinding">Hikari.RGBToSpectrumTable</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RGBToSpectrumTable{V1, V5}</span></span></code></pre></div><p>Precomputed lookup table for converting RGB colors to RGBSigmoidPolynomial coefficients. Uses trilinear interpolation for smooth results.</p><p>Parameterized by array types for GPU compatibility:</p><ul><li><p>V1: 1D array type for scale (AbstractVector{Float32})</p></li><li><p>V5: 5D array type for coeffs (AbstractArray{Float32, 5})</p></li></ul><p>Use <code>to_gpu(ArrayType, table)</code> to convert to GPU-compatible arrays.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L59-L70" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.RGBUnboundedSpectrum" href="#Hikari.RGBUnboundedSpectrum"><span class="jlbinding">Hikari.RGBUnboundedSpectrum</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RGBUnboundedSpectrum</span></span></code></pre></div><p>Unbounded spectrum for illumination/emission. Scales the sigmoid polynomial to match the maximum RGB component.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L289-L294" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.RayMajorantIterator" href="#Hikari.RayMajorantIterator"><span class="jlbinding">Hikari.RayMajorantIterator</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RayMajorantIterator</span></span></code></pre></div><p>Unified majorant iterator that can represent either homogeneous or DDA iteration. This avoids Union types which cause GPU compilation issues.</p><p>Following pbrt-v4&#39;s RayMajorantIterator which is a TaggedPointer variant.</p><p>Mode:</p><ul><li><p>mode = 0: Invalid/exhausted iterator</p></li><li><p>mode = 1: Homogeneous mode (single segment)</p></li><li><p>mode = 2: DDA mode (voxel traversal)</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L504-L516" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.RayMajorantIterator-Tuple{M} where M&lt;:Hikari.MajorantGrid" href="#Hikari.RayMajorantIterator-Tuple{M} where M&lt;:Hikari.MajorantGrid"><span class="jlbinding">Hikari.RayMajorantIterator</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Create an invalid/exhausted iterator</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L544" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.RayMajorantIterator-Union{Tuple{Hikari.DDAMajorantIterator{M}}, Tuple{M}} where M&lt;:Hikari.MajorantGrid" href="#Hikari.RayMajorantIterator-Union{Tuple{Hikari.DDAMajorantIterator{M}}, Tuple{M}} where M&lt;:Hikari.MajorantGrid"><span class="jlbinding">Hikari.RayMajorantIterator</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Create a DDA mode iterator (from DDAMajorantIterator)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L600" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.RayMajorantIterator-Union{Tuple{M}, Tuple{Hikari.HomogeneousMajorantIterator, M}} where M&lt;:Hikari.MajorantGrid" href="#Hikari.RayMajorantIterator-Union{Tuple{M}, Tuple{Hikari.HomogeneousMajorantIterator, M}} where M&lt;:Hikari.MajorantGrid"><span class="jlbinding">Hikari.RayMajorantIterator</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Create a homogeneous mode iterator (from HomogeneousMajorantIterator)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L581" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.RayMajorantSegment" href="#Hikari.RayMajorantSegment"><span class="jlbinding">Hikari.RayMajorantSegment</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RayMajorantSegment</span></span></code></pre></div><p>A segment along a ray with a majorant (upper bound) extinction coefficient. Used for delta tracking in heterogeneous media.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L108-L113" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.SampledSpectrum" href="#Hikari.SampledSpectrum"><span class="jlbinding">Hikari.SampledSpectrum</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SampledSpectrum{N}</span></span></code></pre></div><p>A spectrum sampled at N wavelengths. Default is 4 for GPU efficiency (matches Float4). Used by PhysicalWavefront for spectral path tracing.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/spectral.jl#L4-L9" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.SampledWavelengths" href="#Hikari.SampledWavelengths"><span class="jlbinding">Hikari.SampledWavelengths</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SampledWavelengths{N}</span></span></code></pre></div><p>Represents N sampled wavelengths and their PDFs for hero wavelength sampling.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/spectral.jl#L116-L120" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.SamplerIntegrator-Tuple{Hikari.AbstractScene, Any, Any}" href="#Hikari.SamplerIntegrator-Tuple{Hikari.AbstractScene, Any, Any}"><span class="jlbinding">Hikari.SamplerIntegrator</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Render scene using KernelAbstractions.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/sampler.jl#L94-L96" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Scene-Tuple{}" href="#Hikari.Scene-Tuple{}"><span class="jlbinding">Hikari.Scene</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Scene</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; backend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">KA</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CPU</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><p>Create an empty mutable Scene for incremental construction.</p><p><strong>Example</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scene </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Scene</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">push!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(scene, mesh, material)           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Add geometry</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">push!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(scene, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PointLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Add lights</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">push!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(scene, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AmbientLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sync!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(scene)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Build acceleration structure</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/scene.jl#L36-L49" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.SmitsSpectralBasis" href="#Hikari.SmitsSpectralBasis"><span class="jlbinding">Hikari.SmitsSpectralBasis</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SmitsSpectralBasis</span></span></code></pre></div><p>Precomputed basis spectra for Smits&#39; RGB to spectrum conversion. Contains white, cyan, magenta, yellow, red, green, blue basis spectra.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L88-L93" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.SobolRNG" href="#Hikari.SobolRNG"><span class="jlbinding">Hikari.SobolRNG</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SobolRNG{M}</span></span></code></pre></div><p>GPU-compatible Sobol random number generator. Holds the Sobol matrices and precomputed parameters for ZSobol sampling.</p><p>This struct can be passed directly to GPU kernels via Adapt.jl integration. All sampling state is computed on-the-fly from pixel coordinates and sample index, making it stateless and thread-safe.</p><p><strong>Fields</strong></p><ul><li><p><code>matrices::M</code>: GPU array of Sobol generator matrices (UInt32)</p></li><li><p><code>log2_spp::Int32</code>: log2 of samples per pixel</p></li><li><p><code>n_base4_digits::Int32</code>: number of base-4 digits for Morton encoding</p></li><li><p><code>seed::UInt32</code>: scrambling seed</p></li><li><p><code>width::Int32</code>: image width (for pixel coordinate recovery)</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L335-L351" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.SobolRNG-Tuple{Any, UInt32, Integer, Integer, Integer}" href="#Hikari.SobolRNG-Tuple{Any, UInt32, Integer, Integer, Integer}"><span class="jlbinding">Hikari.SobolRNG</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SobolRNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, seed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, width</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, height</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, samples_per_pixel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a SobolRNG for the given render settings. Allocates Sobol matrices on the specified backend (CPU/GPU).</p><p><strong>Arguments</strong></p><ul><li><p><code>backend</code>: KernelAbstractions backend (e.g., <code>CPU()</code>, <code>CUDABackend()</code>, <code>OpenCLBackend()</code>)</p></li><li><p><code>seed</code>: Scrambling seed for decorrelation</p></li><li><p><code>width</code>: Image width in pixels</p></li><li><p><code>height</code>: Image height in pixels</p></li><li><p><code>samples_per_pixel</code>: Number of samples per pixel</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L360-L372" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.SpectralBSDFSample" href="#Hikari.SpectralBSDFSample"><span class="jlbinding">Hikari.SpectralBSDFSample</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SpectralBSDFSample</span></span></code></pre></div><p>Result of sampling a BSDF with spectral wavelengths. Used by PhysicalWavefront for spectral path tracing.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L12-L17" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.SpotLight-Tuple{ColorTypes.RGB{Float32}, GeometryBasics.Point{3, Float32}, GeometryBasics.Point{3, Float32}, Float32, Float32}" href="#Hikari.SpotLight-Tuple{ColorTypes.RGB{Float32}, GeometryBasics.Point{3, Float32}, GeometryBasics.Point{3, Float32}, Float32, Float32}"><span class="jlbinding">Hikari.SpotLight</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SpotLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rgb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGB{Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, position, target, total_width, falloff_start; power</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a SpotLight from RGB color with automatic spectral conversion and photometric normalization, matching pbrt-v4&#39;s light creation pattern.</p><p><strong>Arguments</strong></p><ul><li><p><code>rgb</code>: RGB color (intensity encoded in color values)</p></li><li><p><code>position::Point3f</code>: World-space position of the spotlight</p></li><li><p><code>target::Point3f</code>: Point the spotlight is aimed at</p></li><li><p><code>total_width::Float32</code>: Total cone angle in degrees</p></li><li><p><code>falloff_start::Float32</code>: Angle where intensity falloff begins (degrees)</p></li><li><p><code>power</code>: Optional radiant power in Watts. If specified, overrides the RGB intensity.</p></li></ul><p><strong>Example</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Spotlight with RGB color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">light </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> SpotLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGB{Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/spot.jl#L58-L77" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.SpotLight-Union{Tuple{S}, Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Point{3, Float32}, S, Float32, Float32}, Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Point{3, Float32}, S, Float32, Float32, Float32}} where S&lt;:Hikari.Spectrum" href="#Hikari.SpotLight-Union{Tuple{S}, Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Point{3, Float32}, S, Float32, Float32}, Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Point{3, Float32}, S, Float32, Float32, Float32}} where S&lt;:Hikari.Spectrum"><span class="jlbinding">Hikari.SpotLight</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SpotLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(position, target, intensity, cone_angle, falloff_angle; scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Convenience constructor for SpotLight that takes position and target points.</p><p><strong>Arguments</strong></p><ul><li><p><code>position::Point3f</code>: World-space position of the spotlight</p></li><li><p><code>target::Point3f</code>: Point the spotlight is aimed at</p></li><li><p><code>i::Spectrum</code>: Light intensity/color</p></li><li><p><code>total_width::Float32</code>: Total cone angle in degrees</p></li><li><p><code>falloff_start::Float32</code>: Angle where intensity falloff begins (degrees)</p></li><li><p><code>scale::Float32</code>: Photometric scale factor (default 1.0)</p></li></ul><p><strong>Example</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Spotlight at (0, 5, 0) pointing at origin with 30° cone</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">light </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> SpotLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/spot.jl#L30-L48" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.SunLight" href="#Hikari.SunLight"><span class="jlbinding">Hikari.SunLight</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>SunLight - A directional light with additional parameters for volumetric cloud rendering.</p><p>Extends DirectionalLight with angular diameter and corona falloff parameters useful for rendering sun disks and atmospheric scattering in clouds.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/sun.jl#L1-L6" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.SunLight-Tuple{ColorTypes.RGB{Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.SunLight-Tuple{ColorTypes.RGB{Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.SunLight</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SunLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rgb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGB{Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, direction; angular_diameter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.00933f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, corona_falloff</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a SunLight from RGB color with automatic spectral conversion and photometric normalization, matching pbrt-v4&#39;s light creation pattern.</p><p><strong>Arguments</strong></p><ul><li><p><code>rgb</code>: RGB color (intensity encoded in color values)</p></li><li><p><code>direction</code>: Direction the light travels (away from source)</p></li><li><p><code>angular_diameter</code>: Angular size of sun disk in radians (default ~0.53°, real sun)</p></li><li><p><code>corona_falloff</code>: How quickly corona fades around sun disk</p></li></ul><p><strong>Example</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sun light traveling in -Y direction (sunlight from above)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">light </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> SunLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGB{Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.9f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/sun.jl#L47-L64" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.TextureFilterContext" href="#Hikari.TextureFilterContext"><span class="jlbinding">Hikari.TextureFilterContext</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TextureFilterContext</span></span></code></pre></div><p>Context for texture filtering, containing UV coordinates and screen-space derivatives. Following pbrt-v4&#39;s TextureEvalContext pattern.</p><p>Materials receive this context and pass it to eval_tex for proper texture filtering. The UV derivatives (dudx, dudy, dvdx, dvdy) are computed from:</p><ol><li><p>Surface partial derivatives (dpdu, dpdv) at intersection</p></li><li><p>Screen-space position derivatives (dpdx, dpdy) from camera</p></li></ol><p>These enable mipmap level selection and anisotropic filtering.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/texture-ref.jl#L8-L20" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.ThinDielectric" href="#Hikari.ThinDielectric"><span class="jlbinding">Hikari.ThinDielectric</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Type alias: <code>ThinDielectric</code> is the same as <code>ThinDielectricMaterial</code></p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/thin-dielectric.jl#L57" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.ThinDielectricMaterial" href="#Hikari.ThinDielectricMaterial"><span class="jlbinding">Hikari.ThinDielectricMaterial</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ThinDielectricMaterial</span></span></code></pre></div><p>A thin dielectric material for surfaces like window glass.</p><p>Unlike regular dielectric materials which refract light according to Snell&#39;s law, thin dielectric materials transmit light straight through (wi = -wo) while accounting for multiple internal reflections within the thin layer.</p><p><strong>Fields</strong></p><ul><li><code>eta</code>: Index of refraction of the dielectric</li></ul><p><strong>Physics</strong></p><p>For a thin dielectric layer:</p><ul><li><p>Single-surface Fresnel: R₀ = FrDielectric(cos_θ, eta)</p></li><li><p>Multiple-bounce reflectance: R = R₀ + T₀²R₀/(1 - R₀²) where T₀ = 1 - R₀</p></li><li><p>Transmittance: T = 1 - R</p></li><li><p>Transmitted direction: wi = -wo (straight through, no bend)</p></li></ul><p><strong>Usage</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Thin glass window</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ThinDielectric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(eta</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Thin plastic film</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">film </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ThinDielectric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(eta</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/thin-dielectric.jl#L17-L44" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.TransformMapping3D" href="#Hikari.TransformMapping3D"><span class="jlbinding">Hikari.TransformMapping3D</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>3D mapping that takes world space coordinate of the point and applies a linear transformation to it. This will often be a transformation that takes the point back to the primitive&#39;s object space.</p><p>Because a linear mapping is used, the differential change in texture coordinates can be found by applying the same transformation to the partial derivatives of the position.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/mapping.jl#L40-L48" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.TriangleFilter" href="#Hikari.TriangleFilter"><span class="jlbinding">Hikari.TriangleFilter</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TriangleFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(radius</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><p>Triangle (tent) filter - linear falloff from center to edges. Can be importance sampled analytically with weight = 1.0.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L70-L75" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.TriangleMeta" href="#Hikari.TriangleMeta"><span class="jlbinding">Hikari.TriangleMeta</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TriangleMeta</span></span></code></pre></div><p>Per-triangle metadata baked into the TLAS.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/scene.jl#L6-L10" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.TrowbridgeReitzDistribution" href="#Hikari.TrowbridgeReitzDistribution"><span class="jlbinding">Hikari.TrowbridgeReitzDistribution</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Microfacet distribution function based on Gaussian distribution of microfacet slopes. Distribution has higher tails, it falls off to zero more slowly for directions far from the surface normal.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L6-L11" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.UVMapping2D" href="#Hikari.UVMapping2D"><span class="jlbinding">Hikari.UVMapping2D</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Simplest mapping uses <code>(u, v)</code> coordinates from the <code>SurfaceInteraction</code> to compute texture coordinates and can be offset and scaled with user-supplied values in each dimension.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/mapping.jl#L4-L8" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.UniformLightSampler" href="#Hikari.UniformLightSampler"><span class="jlbinding">Hikari.UniformLightSampler</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">UniformLightSampler</span></span></code></pre></div><p>Simple uniform light selection. O(1) but ignores light importance. This is the baseline sampler equivalent to the current Hikari behavior.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-sampler.jl#L180-L185" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.VPEscapedRayWorkItem" href="#Hikari.VPEscapedRayWorkItem"><span class="jlbinding">Hikari.VPEscapedRayWorkItem</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VPEscapedRayWorkItem</span></span></code></pre></div><p>Ray that escaped the scene (for environment lighting).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/workitems.jl#L274-L278" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.VPHitSurfaceWorkItem" href="#Hikari.VPHitSurfaceWorkItem"><span class="jlbinding">Hikari.VPHitSurfaceWorkItem</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VPHitSurfaceWorkItem</span></span></code></pre></div><p>Intermediate work item when ray hits a surface. Used to separate intersection from material evaluation. Stores surface partial derivatives for texture filtering (pbrt-v4 style).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/workitems.jl#L319-L325" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.VPMaterialEvalWorkItem" href="#Hikari.VPMaterialEvalWorkItem"><span class="jlbinding">Hikari.VPMaterialEvalWorkItem</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VPMaterialEvalWorkItem</span></span></code></pre></div><p>Surface interaction work item for VolPath. Similar to PWMaterialEvalWorkItem but includes medium transition info.</p><p>Following pbrt-v4&#39;s MaterialEvalWorkItem, stores surface partial derivatives for texture filtering. Screen-space derivatives (dudx, dudy, dvdx, dvdy) are computed on-the-fly during material evaluation using camera.Approximate_dp_dxy().</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/workitems.jl#L199-L208" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.VPMediumSampleWorkItem" href="#Hikari.VPMediumSampleWorkItem"><span class="jlbinding">Hikari.VPMediumSampleWorkItem</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VPMediumSampleWorkItem</span></span></code></pre></div><p>Work item for rays in medium that need delta tracking. Follows pbrt-v4&#39;s approach: intersection is found FIRST, then delta tracking runs with the known t_max distance.</p><p>If the ray reaches t_max without scattering/absorption, it processes the surface hit normally. This allows proper bounded medium traversal.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/workitems.jl#L81-L90" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.VPMediumScatterWorkItem" href="#Hikari.VPMediumScatterWorkItem"><span class="jlbinding">Hikari.VPMediumScatterWorkItem</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VPMediumScatterWorkItem</span></span></code></pre></div><p>Work item for a real scattering event in a participating medium. Created when delta tracking samples a real scatter (not null scatter).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/workitems.jl#L176-L181" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.VPRaySamples" href="#Hikari.VPRaySamples"><span class="jlbinding">Hikari.VPRaySamples</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VPRaySamples</span></span></code></pre></div><p>Pre-computed Sobol samples for a single bounce, matching pbrt-v4&#39;s RaySamples. These are generated once per bounce and stored in PixelSampleState.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/workitems.jl#L8-L13" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.VPRayWorkItem" href="#Hikari.VPRayWorkItem"><span class="jlbinding">Hikari.VPRayWorkItem</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VPRayWorkItem</span></span></code></pre></div><p>Ray work item for volumetric path tracing. Includes medium index to track which medium the ray is currently in.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/workitems.jl#L32-L37" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.VPShadowRayWorkItem" href="#Hikari.VPShadowRayWorkItem"><span class="jlbinding">Hikari.VPShadowRayWorkItem</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VPShadowRayWorkItem</span></span></code></pre></div><p>Shadow ray for direct lighting (works for both surface and volume scattering).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/workitems.jl#L254-L258" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.VolPath" href="#Hikari.VolPath"><span class="jlbinding">Hikari.VolPath</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VolPath </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Integrator</span></span></code></pre></div><p>Volumetric path tracer using hero wavelength sampling and wavefront architecture.</p><p>Extends path tracing with support for participating media (fog, smoke, clouds). Uses delta tracking with null scattering for efficient medium traversal.</p><p>The main loop follows pbrt-v4&#39;s structure:</p><ol><li>If ray is in medium: run delta tracking</li></ol><ul><li><p>Absorption → terminate</p></li><li><p>Real scatter → sample direct light + phase function → continue</p></li><li><p>Null scatter → continue tracking</p></li><li><p>Escape medium → proceed to intersection</p></li></ul><ol start="2"><li><p>Intersect with scene</p></li><li><p>Handle surface (emission + BSDF) or environment light</p></li></ol><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath.jl#L12-L28" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.VolPath-Tuple{Hikari.AbstractScene, Hikari.Film, Hikari.Camera}" href="#Hikari.VolPath-Tuple{Hikari.AbstractScene, Hikari.Film, Hikari.Camera}"><span class="jlbinding">Hikari.VolPath</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VolPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)(scene, film, camera)</span></span></code></pre></div><p>Render using volumetric spectral wavefront path tracing.</p><p>Media are automatically extracted from <code>MediumInterface</code> materials during scene construction and stored in <code>scene.media</code>.</p><p>The render loop follows pbrt-v4&#39;s VolPathIntegrator:</p><ol><li><p>Generate camera rays (possibly in a medium)</p></li><li><p>For each bounce: a. Delta tracking for rays in media → scatter or pass through b. Trace rays to find intersections c. Handle escaped rays (environment light) d. Handle surface hits (emission + direct lighting + BSDF sampling)</p></li><li><p>Accumulate spectral samples to RGB</p></li></ol><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath.jl#L647-L663" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.VolPath-Tuple{}" href="#Hikari.VolPath-Tuple{}"><span class="jlbinding">Hikari.VolPath</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VolPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; max_depth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, samples</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, russian_roulette_depth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, regularize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        material_coherence</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:none</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, max_component_value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, filter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GaussianFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        accumulation_eltype</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Float32)</span></span></code></pre></div><p>Create a VolPath integrator for volumetric path tracing.</p><p><strong>Arguments</strong></p><ul><li><p><code>max_depth</code>: Maximum path depth</p></li><li><p><code>samples</code>: Number of samples per pixel</p></li><li><p><code>russian_roulette_depth</code>: Depth at which to start Russian roulette</p></li><li><p><code>regularize</code>: Apply BSDF regularization to reduce fireflies (default: true). When enabled, near-specular BSDFs are roughened after the first non-specular bounce, following pbrt-v4&#39;s approach.</p></li><li><p><code>material_coherence</code>: Material evaluation strategy for GPU coherence (default: :none):</p><ul><li><p><code>:none</code>: Standard evaluation (baseline)</p></li><li><p><code>:sorted</code>: Sort work items by material type before evaluation</p></li><li><p><code>:per_type</code>: Launch separate kernels per material type (pbrt-v4 style)</p></li></ul></li><li><p><code>max_component_value</code>: Maximum RGB component value before clamping (default: 10). When set to a finite value, RGB values are scaled down if any component exceeds this. This is pbrt-v4&#39;s firefly suppression mechanism. Try values like 10.0 or 100.0.</p></li><li><p><code>filter</code>: Pixel reconstruction filter (default: GaussianFilter with radius 1.5, sigma 0.5). Supports BoxFilter, TriangleFilter, GaussianFilter, MitchellFilter, LanczosSincFilter. All filters use importance sampling with weight≈1 (pbrt-v4 compatible).</p></li><li><p><code>accumulation_eltype</code>: Element type for RGB/weight accumulators (default: Float32). Use Float64 on backends that support double precision for higher accumulation precision.</p></li></ul><p>Note: Sensor simulation (ISO, exposure_time, white_balance) is handled in postprocessing via <code>FilmSensor</code>, not in the integrator. This matches pbrt-v4&#39;s architecture where the film stores raw linear HDR values and sensor conversion happens at output time.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath.jl#L44-L74" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.VolPathState" href="#Hikari.VolPathState"><span class="jlbinding">Hikari.VolPathState</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VolPathState</span></span></code></pre></div><p>Contains all work queues and buffers for VolPath wavefront rendering.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath-state.jl#L24-L28" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.WorkQueue" href="#Hikari.WorkQueue"><span class="jlbinding">Hikari.WorkQueue</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WorkQueue{T, V, S}</span></span></code></pre></div><p>A GPU-compatible work queue that stores items of type T. Uses atomic operations for thread-safe push operations.</p><p>The queue stores items in a pre-allocated buffer and uses an atomic counter to track the current size. Supports both AOS and SOA layouts.</p><p><strong>Fields</strong></p><ul><li><p><code>items::V</code>: Pre-allocated array of work items</p></li><li><p><code>size::S</code>: Single-element array for atomic counter</p></li><li><p><code>capacity::Int32</code>: Maximum number of items</p></li></ul><p><strong>Example</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Create a queue on GPU backend</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">queue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> WorkQueue{MyWorkItem}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># In a kernel, push items atomically</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">idx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> push!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(queue, item)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check if push succeeded (within capacity)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> idx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(queue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">items)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # item was stored at queue.items[idx]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/workqueue.jl#L53-L80" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.WorkQueue-Union{Tuple{T}, Tuple{Any, Integer}} where T" href="#Hikari.WorkQueue-Union{Tuple{T}, Tuple{Any, Integer}} where T"><span class="jlbinding">Hikari.WorkQueue</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">WorkQueue{T}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, capacity; soa</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a new work queue with the given capacity on the specified backend.</p><p><strong>Arguments</strong></p><ul><li><p><code>backend</code>: KernelAbstractions backend (e.g., <code>CPU()</code>, <code>CUDABackend()</code>, <code>ROCBackend()</code>)</p></li><li><p><code>capacity</code>: Maximum number of items the queue can hold</p></li><li><p><code>soa</code>: If true, use Structure-of-Arrays layout for better GPU memory coalescing</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/workqueue.jl#L87-L96" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Adapt.adapt_structure-Tuple{Any, Hikari.GPUFilterSamplerData}" href="#Adapt.adapt_structure-Tuple{Any, Hikari.GPUFilterSamplerData}"><span class="jlbinding">Adapt.adapt_structure</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Adapt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">adapt_structure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(to, data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GPUFilterSamplerData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Adapt GPUFilterSamplerData for use inside GPU kernels. This converts the GPU arrays (e.g., ROCArray) to device-compatible representations (e.g., ROCDeviceArray) that can be used inside kernels.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L1043-L1049" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Adapt.adapt_structure-Tuple{Any, Hikari.WorkQueue}" href="#Adapt.adapt_structure-Tuple{Any, Hikari.WorkQueue}"><span class="jlbinding">Adapt.adapt_structure</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Adapt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">adapt_structure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, queue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">WorkQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Adapt WorkQueue for use inside GPU kernels. This converts the host-side arrays (e.g., CLArray, CuArray) to device-compatible representations (e.g., CLDeviceArray, CuDeviceArray) that can be used inside kernels.</p><p>This allows passing the entire WorkQueue to a kernel instead of passing items and size arrays separately.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/workqueue.jl#L147-L156" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Base.close-Tuple{Hikari.FastWavefront}" href="#Base.close-Tuple{Hikari.FastWavefront}"><span class="jlbinding">Base.close</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Base</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(integrator</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FastWavefront</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Release GPU resources. Alias for cleanup!().</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/fast-wavefront.jl#L764-L768" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Base.map-Tuple{Hikari.UVMapping2D, Hikari.SurfaceInteraction}" href="#Base.map-Tuple{Hikari.UVMapping2D, Hikari.SurfaceInteraction}"><span class="jlbinding">Base.map</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Given surface interaction <code>si</code> at the shading point, return <code>(s, t)</code> texture coordinates and estimated changes in <code>(s, t)</code> w.r.t. pixel <code>x</code> &amp; <code>y</code> coordinates.</p><p><strong>Paramters:</strong></p><ul><li><p><code>m::UVMapping2D</code>: UVMapping with offset &amp; scale parameters.</p></li><li><p><code>si::SurfaceInteraction</code>: SurfaceInteraction at the shading point.</p></li></ul><p><strong>Returns:</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`Tuple{Point2f, Vec2f, Vec2f}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Texture coordinates at the shading point, estimated changes</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `(s, t)`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> w</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">t. pixel </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`x`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `y`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> coordinates.</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/mapping.jl#L16-L31" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Base.union-Tuple{Hikari.DirectionCone, Hikari.DirectionCone}" href="#Base.union-Tuple{Hikari.DirectionCone, Hikari.DirectionCone}"><span class="jlbinding">Base.union</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Base</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">union</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DirectionCone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DirectionCone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DirectionCone</span></span></code></pre></div><p>Find the minimal cone containing both input cones. Following pbrt-v4 (vecmath.cpp:56-83).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-bounds.jl#L52-L57" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Base.union-Tuple{Hikari.LightBounds, Hikari.LightBounds}" href="#Base.union-Tuple{Hikari.LightBounds, Hikari.LightBounds}"><span class="jlbinding">Base.union</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Base</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">union</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LightBounds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LightBounds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LightBounds</span></span></code></pre></div><p>Merge two LightBounds. Following pbrt-v4 (lights.h:137-153).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-bounds.jl#L137-L141" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Aluminum-Tuple{}" href="#Hikari.Aluminum-Tuple{}"><span class="jlbinding">Hikari.Aluminum</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Aluminum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, reflectance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), remap_roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create an aluminum conductor material with measured spectral IOR data.</p><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Aluminum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()                      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Polished aluminum</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Aluminum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Brushed aluminum</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L500-L510" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Brass-Tuple{}" href="#Hikari.Brass-Tuple{}"><span class="jlbinding">Hikari.Brass</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Brass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, reflectance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), remap_roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a brass (CuZn) conductor material with measured spectral IOR data.</p><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Brass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()                         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Polished brass</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Brass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Brushed brass</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L514-L524" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Coffee-Tuple{}" href="#Hikari.Coffee-Tuple{}"><span class="jlbinding">Hikari.Coffee</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Coffee</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HomogeneousMedium</span></span></code></pre></div><p>Create an espresso coffee medium with realistic scattering properties.</p><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Coffee</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()                  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Espresso</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Coffee</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Diluted coffee (americano-like)</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1994-L2004" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Copper-Tuple{}" href="#Hikari.Copper-Tuple{}"><span class="jlbinding">Hikari.Copper</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Copper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, reflectance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), remap_roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a copper conductor material with measured spectral IOR data.</p><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Copper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()                        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Polished copper</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Copper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Weathered copper</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L486-L496" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.D-Tuple{Hikari.TrowbridgeReitzDistribution, GeometryBasics.Vec{3, Float32}}" href="#Hikari.D-Tuple{Hikari.TrowbridgeReitzDistribution, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.D</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Distribution function, which gives the differential area of microfacets with the surface normal <code>w</code>.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/microfacet.jl#L109-L112" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Filter-Tuple{Symbol}" href="#Hikari.Filter-Tuple{Symbol}"><span class="jlbinding">Hikari.Filter</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; kwargs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a filter by type name.</p><p><strong>Arguments</strong></p><ul><li><p><code>type</code>: One of :box, :triangle, :gaussian, :mitchell, :lanczos</p></li><li><p><code>kwargs</code>: Filter-specific parameters</p></li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:box</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)                          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Default box filter</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:triangle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, radius</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Triangle with custom radius</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:gaussian</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sigma</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Gaussian filter</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:mitchell</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, B</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, C</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Mitchell filter</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:lanczos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tau</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)               </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Lanczos sinc filter</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L996-L1013" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Fog-Tuple{}" href="#Hikari.Fog-Tuple{}"><span class="jlbinding">Hikari.Fog</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Fog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; density</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HomogeneousMedium</span></span></code></pre></div><p>Create a fog medium. Fog is very light, highly scattering, and nearly non-absorbing (appears white).</p><p><strong>Arguments</strong></p><ul><li><p><code>density</code>: Fog density (lower = more transparent)</p></li><li><p><code>g</code>: Henyey-Greenstein asymmetry (0 = isotropic, typical for fog)</p></li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Fog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()                     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Light fog</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Fog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(density</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Dense fog</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1909-L1924" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Gold-Tuple{}" href="#Hikari.Gold-Tuple{}"><span class="jlbinding">Hikari.Gold</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Gold</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, reflectance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), remap_roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a gold conductor material with measured spectral IOR data.</p><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Gold</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()                          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Polished gold</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Gold</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)             </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Brushed gold</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Gold</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)             </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Matte gold</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L457-L468" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Juice-Tuple{Symbol}" href="#Hikari.Juice-Tuple{Symbol}"><span class="jlbinding">Hikari.Juice</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Juice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HomogeneousMedium</span></span></code></pre></div><p>Create a juice medium from presets.</p><p><strong>Available names</strong></p><ul><li><code>:apple</code>, <code>:cranberry</code>, <code>:grape</code>, <code>:grapefruit</code></li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Juice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:apple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)             </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Apple juice</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Juice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:grape</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Diluted grape juice</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1932-L1945" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Milk-Tuple{}" href="#Hikari.Milk-Tuple{}"><span class="jlbinding">Hikari.Milk</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Milk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HomogeneousMedium</span></span></code></pre></div><p>Create a whole milk medium with realistic scattering properties. The <code>scale</code> parameter allows adjusting the density (for diluted milk use scale &lt; 1).</p><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Milk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()                    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Standard whole milk</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Milk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Diluted milk</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Milk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Forward-scattering milk</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1860-L1872" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Plastic" href="#Hikari.Plastic"><span class="jlbinding">Hikari.Plastic</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><p>Type alias: <code>Plastic</code> is the same as <code>PlasticMaterial</code></p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L441" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.PlasticMaterial-Tuple{}" href="#Hikari.PlasticMaterial-Tuple{}"><span class="jlbinding">Hikari.PlasticMaterial</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PlasticMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; Kd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), Ks</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, remap_roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, eta</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a plastic material with diffuse base and dielectric coating.</p><p>This is an alias for <code>CoatedDiffuseMaterial</code> matching pbrt-v4&#39;s behavior where &quot;plastic&quot; materials are implemented as coated diffuse with a dielectric coating.</p><p><strong>Arguments</strong></p><ul><li><p><code>Kd</code>: Diffuse color (reflectance of the base layer)</p></li><li><p><code>Ks</code>: Specular color (ignored - kept for API compatibility, Fresnel controls specular)</p></li><li><p><code>roughness</code>: Surface roughness of the coating (lower = sharper highlights)</p></li><li><p><code>remap_roughness</code>: Whether to remap roughness to microfacet alpha</p></li><li><p><code>eta</code>: Index of refraction of the coating (default 1.5 for typical plastic)</p></li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PlasticMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Kd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Magenta plastic</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PlasticMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Kd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.05</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Shiny blue</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PlasticMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Kd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wood_texture, roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Textured</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L319-L340" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.RayMajorantIterator_homogeneous-Tuple{Float32, Float32, Hikari.SampledSpectrum{4}}" href="#Hikari.RayMajorantIterator_homogeneous-Tuple{Float32, Float32, Hikari.SampledSpectrum{4}}"><span class="jlbinding">Hikari.RayMajorantIterator_homogeneous</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Create a homogeneous mode iterator directly (for HomogeneousMedium)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L562" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Sample-Tuple{Hikari.RGBIlluminantSpectrum, Hikari.SampledWavelengths{4}}" href="#Hikari.Sample-Tuple{Hikari.RGBIlluminantSpectrum, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.Sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Sample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBIlluminantSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Sample the illuminant spectrum at multiple wavelengths. Matches pbrt-v4&#39;s RGBIlluminantSpectrum::Sample(const SampledWavelengths &amp;lambda).</p><p>Returns: scale * rsp(λ) * D65(λ) for each wavelength.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L481-L488" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Sample-Tuple{Hikari.RGBToSpectrumTable, Hikari.RGBIlluminantSpectrum, Hikari.SampledWavelengths{4}}" href="#Hikari.Sample-Tuple{Hikari.RGBToSpectrumTable, Hikari.RGBIlluminantSpectrum, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.Sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Sample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBToSpectrumTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBIlluminantSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Sample an RGBIlluminantSpectrum at multiple wavelengths. The table argument is ignored since the polynomial is already baked in.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L581-L586" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Sample-Tuple{Hikari.RGBToSpectrumTable, Hikari.RGBSpectrum, Hikari.SampledWavelengths{4}}" href="#Hikari.Sample-Tuple{Hikari.RGBToSpectrumTable, Hikari.RGBSpectrum, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.Sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Sample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBToSpectrumTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, rgb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Sample an RGBSpectrum as an illuminant at multiple wavelengths. This provides a unified interface for light sampling - RGBSpectrum uses uplift_rgb_illuminant while RGBIlluminantSpectrum uses its baked-in polynomial.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L568-L574" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Silver-Tuple{}" href="#Hikari.Silver-Tuple{}"><span class="jlbinding">Hikari.Silver</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Silver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, reflectance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), remap_roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Create a silver conductor material with measured spectral IOR data.</p><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Silver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()                        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Polished silver</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Silver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.05</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Slightly brushed</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L472-L482" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Smoke-Tuple{}" href="#Hikari.Smoke-Tuple{}"><span class="jlbinding">Hikari.Smoke</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Smoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; density</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, albedo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HomogeneousMedium</span></span></code></pre></div><p>Create a smoke/fog medium. Smoke is characterized by high scattering and low absorption (high albedo = scattering / extinction).</p><p><strong>Arguments</strong></p><ul><li><p><code>density</code>: Overall density multiplier (higher = thicker smoke)</p></li><li><p><code>albedo</code>: Single-scattering albedo (0-1, higher = more scattering, whiter smoke)</p></li><li><p><code>g</code>: Henyey-Greenstein asymmetry parameter (-1 to 1, 0 = isotropic)</p></li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Smoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()                   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Light gray smoke</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Smoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(density</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Dense smoke</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Smoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(albedo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Darker, more absorbing smoke</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Smoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Forward-scattering (typical for smoke)</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1880-L1898" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.SubsurfaceMedium-Tuple{String}" href="#Hikari.SubsurfaceMedium-Tuple{String}"><span class="jlbinding">Hikari.SubsurfaceMedium</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SubsurfaceMedium</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HomogeneousMedium</span></span></code></pre></div><p>Create a medium from any of the available presets by name.</p><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SubsurfaceMedium</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Marble&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SubsurfaceMedium</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Skin1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SubsurfaceMedium</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Ketchup&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>See <code>get_medium_preset</code> for available preset names.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L2012-L2025" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.Wine-Tuple{Symbol}" href="#Hikari.Wine-Tuple{Symbol}"><span class="jlbinding">Hikari.Wine</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HomogeneousMedium</span></span></code></pre></div><p>Create a wine medium from presets.</p><p><strong>Available names</strong></p><ul><li><code>:chardonnay</code>, <code>:zinfandel</code>, <code>:merlot</code></li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:merlot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)             </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Red merlot wine</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:chardonnay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># White wine</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1964-L1977" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._accumulate_volume_scatter-Tuple{Hikari.RGBSpectrum, Any, Hikari.CloudVolume, Vararg{Any, 5}}" href="#Hikari._accumulate_volume_scatter-Tuple{Hikari.RGBSpectrum, Any, Hikari.CloudVolume, Vararg{Any, 5}}"><span class="jlbinding">Hikari._accumulate_volume_scatter</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">_accumulate_volume_scatter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(acc, light, cloud, pos, ray_d, time, shadow_steps, scene)</span></span></code></pre></div><p>Accumulator function for reduce_unrolled over lights in volume scattering. Computes single light contribution and adds to accumulator.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/volume.jl#L222-L227" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._build_bvh!-Tuple{Vector{Hikari.LightBVHNode}, Vector{UInt32}, Vector{Tuple{Int32, Hikari.LightBounds}}, Int64, Int64, UInt32, Int64}" href="#Hikari._build_bvh!-Tuple{Vector{Hikari.LightBVHNode}, Vector{UInt32}, Vector{Tuple{Int32, Hikari.LightBounds}}, Int64, Int64, UInt32, Int64}"><span class="jlbinding">Hikari._build_bvh!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Recursive BVH construction with SAH splitting. Following pbrt-v4 buildBVH (lightsamplers.cpp:135-238).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/bvh-light-sampler.jl#L335-L337" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._copy_multi_to_standard!-Union{Tuple{N}, Tuple{Any, Hikari.VolPathState, Hikari.MultiMaterialQueue{N}}} where N" href="#Hikari._copy_multi_to_standard!-Union{Tuple{N}, Tuple{Any, Hikari.VolPathState, Hikari.MultiMaterialQueue{N}}} where N"><span class="jlbinding">Hikari._copy_multi_to_standard!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>DEBUG helper: Copy items from multi_queue to standard material_queue for testing.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/multi-material-eval.jl#L291-L293" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._detect_camera_medium_kernel!-Tuple{Any}" href="#Hikari._detect_camera_medium_kernel!-Tuple{Any}"><span class="jlbinding">Hikari._detect_camera_medium_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">_detect_camera_medium_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result, accel, media_interfaces, camera_pos)</span></span></code></pre></div><p>Single-workitem kernel that traces a ray from the camera position to determine which medium the camera is inside. Writes a SetKey to result[1].</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/intersection.jl#L684-L689" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._evaluate_cost-Tuple{Hikari.LightBounds, Raycore.Bounds3, Int64}" href="#Hikari._evaluate_cost-Tuple{Hikari.LightBounds, Raycore.Bounds3, Int64}"><span class="jlbinding">Hikari._evaluate_cost</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>SAH cost for splitting a LightBounds along dimension <code>dim</code>. Following pbrt-v4 EvaluateCost (lightsamplers.h:383-396).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/bvh-light-sampler.jl#L240-L242" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._evaluate_typed_material!-Tuple{Any, Hikari.VPMaterialEvalWorkItem, Any, Any, Any, Int32, Bool, Any, Any, Any, Any, Int32}" href="#Hikari._evaluate_typed_material!-Tuple{Any, Hikari.VPMaterialEvalWorkItem, Any, Any, Any, Int32, Bool, Any, Any, Any, Any, Int32}"><span class="jlbinding">Hikari._evaluate_typed_material!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Inner evaluation for a typed material (no dispatch needed).</p><p>Uses pre-computed Sobol samples from pixel_samples (pbrt-v4 RaySamples style).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/multi-material-eval.jl#L192-L196" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._get_rgb2spec_table-Tuple{}" href="#Hikari._get_rgb2spec_table-Tuple{}"><span class="jlbinding">Hikari._get_rgb2spec_table</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Get the global sRGB to spectrum table (loads on first access)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L228" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._ratio_tracking_dda-Tuple{Hikari.RayMajorantIterator, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Any, Raycore.SetKey, Any, Hikari.SampledWavelengths{4}}" href="#Hikari._ratio_tracking_dda-Tuple{Hikari.RayMajorantIterator, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Any, Raycore.SetKey, Any, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari._ratio_tracking_dda</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Ratio tracking using DDA majorant iterator segments. Iterates over per-voxel majorant bounds, doing ratio tracking within each segment.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/intersection.jl#L442-L445" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._ray_majorant_next_dda-Union{Tuple{M}, Tuple{Hikari.RayMajorantIterator{M}, Any}} where M" href="#Hikari._ray_majorant_next_dda-Union{Tuple{M}, Tuple{Hikari.RayMajorantIterator{M}, Any}} where M"><span class="jlbinding">Hikari._ray_majorant_next_dda</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>DDA next implementation (separated for clarity)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L654" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._sample_rgb_grid-Tuple{AbstractArray{Hikari.RGBSpectrum, 3}, GeometryBasics.Vec3{Int32}, GeometryBasics.Point{3, Float32}}" href="#Hikari._sample_rgb_grid-Tuple{AbstractArray{Hikari.RGBSpectrum, 3}, GeometryBasics.Vec3{Int32}, GeometryBasics.Point{3, Float32}}"><span class="jlbinding">Hikari._sample_rgb_grid</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Trilinear interpolation for RGB grid. p_norm is in [0,1]³ normalized coordinates within bounds.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1275-L1278" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._sample_texture_bilinear-Union{Tuple{T}, Tuple{AbstractMatrix{T}, GeometryBasics.Point{2, Float32}}} where T" href="#Hikari._sample_texture_bilinear-Union{Tuple{T}, Tuple{AbstractMatrix{T}, GeometryBasics.Point{2, Float32}}} where T"><span class="jlbinding">Hikari._sample_texture_bilinear</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">_sample_texture_bilinear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data, uv) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> T</span></span></code></pre></div><p>Bilinear texture sampling for 2D textures. Provides smoother results than point sampling.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/texture-ref.jl#L145-L150" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._sample_texture_data_filtered-Union{Tuple{N}, Tuple{T}, Tuple{AbstractArray{T, N}, GeometryBasics.Point{2, Float32}, Vararg{Float32, 4}}} where {T, N}" href="#Hikari._sample_texture_data_filtered-Union{Tuple{N}, Tuple{T}, Tuple{AbstractArray{T, N}, GeometryBasics.Point{2, Float32}, Vararg{Float32, 4}}} where {T, N}"><span class="jlbinding">Hikari._sample_texture_data_filtered</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">_sample_texture_data_filtered</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data, uv, dudx, dudy, dvdx, dvdy) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> T</span></span></code></pre></div><p>Sample texture with filtering based on UV derivatives. Uses the derivatives to compute the filter footprint for mipmap selection.</p><p>TODO: Implement proper mipmap-based filtering. Currently uses bilinear sampling as a simple improvement over point sampling.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/texture-ref.jl#L117-L125" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._sample_with_iterator_helper-Tuple{Any, Hikari.RGBToSpectrumTable, Raycore.Ray, Float32, Hikari.SampledWavelengths{4}, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, UInt64, Any, Any, Hikari.VPMediumSampleWorkItem, Any, Raycore.SetKey, Int32, Int32, Hikari.MajorantGrid}" href="#Hikari._sample_with_iterator_helper-Tuple{Any, Hikari.RGBToSpectrumTable, Raycore.Ray, Float32, Hikari.SampledWavelengths{4}, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, UInt64, Any, Any, Hikari.VPMediumSampleWorkItem, Any, Raycore.SetKey, Int32, Int32, Hikari.MajorantGrid}"><span class="jlbinding">Hikari._sample_with_iterator_helper</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Helper to call sample_T_maj_loop! with created iterator (no capture)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/delta-tracking.jl#L109" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._spotlight_transform-Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Point{3, Float32}}" href="#Hikari._spotlight_transform-Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Point{3, Float32}}"><span class="jlbinding">Hikari._spotlight_transform</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Create a transformation that positions a spotlight and orients it to point at a target. The spotlight points in +Z direction in local space.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/spot.jl#L101-L104" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._sum_light_le-Tuple{Any, Any}" href="#Hikari._sum_light_le-Tuple{Any, Any}"><span class="jlbinding">Hikari._sum_light_le</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">_sum_light_le</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(light, ray)</span></span></code></pre></div><p>Helper for sum_unrolled to accumulate le() contributions from lights.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/volume.jl#L252-L256" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._tonemap_aces-Tuple{Float32, Float32, Float32}" href="#Hikari._tonemap_aces-Tuple{Float32, Float32, Float32}"><span class="jlbinding">Hikari._tonemap_aces</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>ACES filmic approximation (Narkowicz). Industry-standard filmic curve used in games and film.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/postprocess.jl#L96-L99" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._tonemap_filmic-Tuple{Float32, Float32, Float32}" href="#Hikari._tonemap_filmic-Tuple{Float32, Float32, Float32}"><span class="jlbinding">Hikari._tonemap_filmic</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Filmic tonemapping (Hejl-Dawson). Alternative filmic curve with good highlight rolloff.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/postprocess.jl#L145-L148" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._tonemap_reinhard-Tuple{Float32, Float32, Float32}" href="#Hikari._tonemap_reinhard-Tuple{Float32, Float32, Float32}"><span class="jlbinding">Hikari._tonemap_reinhard</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Simple Reinhard tonemapping: L / (1 + L)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/postprocess.jl#L77-L79" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._tonemap_reinhard_extended-NTuple{4, Float32}" href="#Hikari._tonemap_reinhard_extended-NTuple{4, Float32}"><span class="jlbinding">Hikari._tonemap_reinhard_extended</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Extended Reinhard with white point control.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/postprocess.jl#L86-L88" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._tonemap_uncharted2-Tuple{Float32, Float32, Float32}" href="#Hikari._tonemap_uncharted2-Tuple{Float32, Float32, Float32}"><span class="jlbinding">Hikari._tonemap_uncharted2</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Uncharted 2 filmic tonemapping. Good for high-contrast scenes, preserves detail in shadows.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/postprocess.jl#L126-L129" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._transmittance_dda_helper-NTuple{10, Any}" href="#Hikari._transmittance_dda_helper-NTuple{10, Any}"><span class="jlbinding">Hikari._transmittance_dda_helper</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Helper dispatched via with_index to get concrete medium type for DDA iterator.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/intersection.jl#L434" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari._uncharted2_partial-Tuple{Float32}" href="#Hikari._uncharted2_partial-Tuple{Float32}"><span class="jlbinding">Hikari._uncharted2_partial</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Uncharted 2 filmic curve helper.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/postprocess.jl#L113-L115" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.abs_cos_theta-Tuple{GeometryBasics.Vec{3, Float32}}" href="#Hikari.abs_cos_theta-Tuple{GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.abs_cos_theta</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">abs_cos_theta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Get |cos(θ)| of a direction in local coordinates (matches pbrt-v4&#39;s AbsCosTheta).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3598-L3602" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.add_to_pixel!-Tuple{AbstractVector{Float32}, Int32, Hikari.SampledSpectrum{4}, Hikari.SampledWavelengths{4}}" href="#Hikari.add_to_pixel!-Tuple{AbstractVector{Float32}, Int32, Hikari.SampledSpectrum{4}, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.add_to_pixel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Add spectral contribution to film pixel</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/delta-tracking.jl#L64" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.allocate_array-Union{Tuple{T}, Tuple{Any, Type{T}, Integer}} where T" href="#Hikari.allocate_array-Union{Tuple{T}, Tuple{Any, Type{T}, Integer}} where T"><span class="jlbinding">Hikari.allocate_array</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">allocate_array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, T, n; soa</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Allocate array with AOS (soa=false) or SOA (soa=true) layout. Both support identical indexing: arr[i] returns T, arr[i] = val stores T.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/workqueue.jl#L24-L29" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.angle_between-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.angle_between-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.angle_between</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">angle_between</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v1, v2) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Numerically stable angle between two vectors. Following pbrt-v4 (vecmath.h:972-977).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-bounds.jl#L38-L43" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.apply_white_balance-NTuple{12, Float32}" href="#Hikari.apply_white_balance-NTuple{12, Float32}"><span class="jlbinding">Hikari.apply_white_balance</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">apply_white_balance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r, g, b, wb_matrix) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Apply white balance transformation using precomputed Bradford matrix. Input/output are in linear RGB (assumed sRGB primaries).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/postprocess.jl#L55-L60" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.approximate_dp_dxy-Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Any, Int32}" href="#Hikari.approximate_dp_dxy-Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Any, Int32}"><span class="jlbinding">Hikari.approximate_dp_dxy</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">approximate_dp_dxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n, camera, samples_per_pixel) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (dpdx, dpdy)</span></span></code></pre></div><p>Approximate screen-space position derivatives at intersection point. Following pbrt-v4&#39;s Camera::Approximate_dp_dxy method.</p><p>This estimates how much the surface position changes per pixel, which is used for texture filtering (mipmap level selection). The approximation assumes the surface is locally planar near the intersection point.</p><p>For a perspective camera, this is approximately: dp/dscreen ≈ distance * tan(fov/2) / (resolution/2)</p><p>Arguments:</p><ul><li><p><code>pi</code>: Intersection point in world space</p></li><li><p><code>n</code>: Surface normal at intersection</p></li><li><p><code>camera</code>: Camera with dx_camera, dy_camera precomputed</p></li><li><p><code>samples_per_pixel</code>: Number of samples per pixel (for scaling)</p></li></ul><p>Returns (dpdx, dpdy) - approximate change in position per screen pixel.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/surface-eval.jl#L11-L31" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.arealight_Le-Tuple{Hikari.DiffuseAreaLight{Hikari.RGBSpectrum}, Any, Hikari.RGBToSpectrumTable, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}, Hikari.SampledWavelengths{4}}" href="#Hikari.arealight_Le-Tuple{Hikari.DiffuseAreaLight{Hikari.RGBSpectrum}, Any, Hikari.RGBToSpectrumTable, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.arealight_Le</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">arealight_Le</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(light</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DiffuseAreaLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lights_ctx, table, wo, n, uv, lambda) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Evaluate spectral emission at a surface point on this area light. Following pbrt-v4 DiffuseAreaLight::L().</p><ul><li><p><code>lights_ctx</code>: StaticMultiTypeSet for TextureRef dereference (lights container)</p></li><li><p><code>table</code>: RGBToSpectrumTable for spectral uplift</p></li><li><p><code>wo</code>: outgoing direction (toward camera)</p></li><li><p><code>n</code>: surface normal at hit point</p></li><li><p><code>uv</code>: texture coordinates at hit point</p></li><li><p><code>lambda</code>: sampled wavelengths</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/diffuse-area.jl#L41-L53" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.atrous_denoise_kernel!-Tuple{Any}" href="#Hikari.atrous_denoise_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.atrous_denoise_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">atrous_denoise_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(output, input, normals, depth, variance,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                       width, height, step_size, config)</span></span></code></pre></div><p>Single pass of the à-trous wavelet filter. Applies a 5x5 filter with edge-stopping weights.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/denoise.jl#L129-L135" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.balance_heuristic-Tuple{Float32, Float32}" href="#Hikari.balance_heuristic-Tuple{Float32, Float32}"><span class="jlbinding">Hikari.balance_heuristic</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">balance_heuristic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pdf_f</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, pdf_g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Balance heuristic for MIS: w_f = pdf_f / (pdf_f + pdf_g)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/workitems.jl#L249-L253" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.binary_permute_scramble-Tuple{UInt32, UInt32}" href="#Hikari.binary_permute_scramble-Tuple{UInt32, UInt32}"><span class="jlbinding">Hikari.binary_permute_scramble</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">binary_permute_scramble</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, perm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UInt32</span></span></code></pre></div><p>Simple XOR-based scrambling (less quality than Owen, but faster). Reference: pbrt-v4/src/pbrt/util/lowdiscrepancy.h BinaryPermuteScrambler</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L82-L87" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.blackbody!-Tuple{Vector{Float32}, Vector{Float32}, Float32}" href="#Hikari.blackbody!-Tuple{Vector{Float32}, Vector{Float32}, Float32}"><span class="jlbinding">Hikari.blackbody!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute emitted radiance by blackbody at the given temperature for the wavelengths.</p><p><strong>Args</strong></p><ul><li><p><code>Le::Vector{Float32}</code>: Preallocated output vector for computed radiance.</p></li><li><p><code>λ::Vector{Float32}</code>: Wavelengths for which to compute radiance. Their values should be in <code>nm</code>.</p></li><li><p><code>T::Float32</code>: Temperature in Kelvin at which to compute radiance.</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/emission.jl#L1-L11" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.blackbody-Tuple{Vector{Float32}, Float32}" href="#Hikari.blackbody-Tuple{Vector{Float32}, Float32}"><span class="jlbinding">Hikari.blackbody</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Allocating version of <code>blackbody!</code> function.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/emission.jl#L22-L24" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.blackbody_normalized!-Tuple{Vector{Float32}, Vector{Float32}, Float32}" href="#Hikari.blackbody_normalized!-Tuple{Vector{Float32}, Vector{Float32}, Float32}"><span class="jlbinding">Hikari.blackbody_normalized!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute normalized SPD for a blackbody, with maximum value of the SPD at any wavelength is 1.</p><p><strong>Args</strong></p><ul><li><p><code>Le::Vector{Float32}</code>: Preallocated output vector for computed radiance.</p></li><li><p><code>λ::Vector{Float32}</code>: Wavelengths for which to compute radiance. Their values should be in <code>nm</code>.</p></li><li><p><code>T::Float32</code>: Temperature in Kelvin at which to compute radiance.</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/emission.jl#L31-L41" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.bound_subtended_directions-Tuple{Raycore.Bounds3, GeometryBasics.Point{3, Float32}}" href="#Hikari.bound_subtended_directions-Tuple{Raycore.Bounds3, GeometryBasics.Point{3, Float32}}"><span class="jlbinding">Hikari.bound_subtended_directions</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bound_subtended_directions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Bounds3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DirectionCone</span></span></code></pre></div><p>Compute the bounding cone of directions from point <code>p</code> to bounding box <code>b</code>. If <code>p</code> is inside the box, returns entire sphere. Following pbrt-v4 (vecmath.h:1815-1828).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-bounds.jl#L89-L95" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.build_majorant_grid!-Tuple{Hikari.MajorantGrid, AbstractArray{Float32, 3}}" href="#Hikari.build_majorant_grid!-Tuple{Hikari.MajorantGrid, AbstractArray{Float32, 3}}"><span class="jlbinding">Hikari.build_majorant_grid!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>In-place majorant grid rebuild for GridMedium density updates.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1498" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.build_majorant_grid-Tuple{AbstractArray{Float32, 3}, GeometryBasics.Vec{3, Int64}}" href="#Hikari.build_majorant_grid-Tuple{AbstractArray{Float32, 3}, GeometryBasics.Vec{3, Int64}}"><span class="jlbinding">Hikari.build_majorant_grid</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Build a coarse majorant grid from the density field</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1458" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.build_nanovdb_from_dense-Tuple{Array{Float32, 3}, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.build_nanovdb_from_dense-Tuple{Array{Float32, 3}, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.build_nanovdb_from_dense</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">build_nanovdb_from_dense</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Array{Float32,3}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, origin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, extent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; background</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Convert a dense 3D Float32 array to a NanoVDB-compatible binary buffer. Only stores leaf blocks (8³) that contain non-background voxels, giving significant memory savings for sparse data (e.g. cloud fields with ~1% fill).</p><p>Returns <code>(buffer::Vector{UInt8}, metadata::NamedTuple)</code> suitable for constructing a <code>NanoVDBMedium</code>.</p><p>The NanoVDB tree hierarchy is: Root → Upper (32³) → Lower (16³) → Leaf (8³). Buffer layout: [Root | Upper nodes | Lower nodes | Leaf nodes] All child offsets are stored relative to the parent node.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/nanovdb.jl#L588-L601" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.build_nanovdb_majorant_grid" href="#Hikari.build_nanovdb_majorant_grid"><span class="jlbinding">Hikari.build_nanovdb_majorant_grid</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">build_nanovdb_majorant_grid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(medium_partial, res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MajorantGrid</span></span></code></pre></div><p>Build a majorant grid for NanoVDBMedium by sampling max density in each cell. Matches pbrt-v4&#39;s majorant grid construction.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/nanovdb.jl#L1168-L1173" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.build_rgb_majorant_grid!-Tuple{Hikari.MajorantGrid, Union{Nothing, AbstractArray{Hikari.RGBSpectrum, 3}}, Union{Nothing, AbstractArray{Hikari.RGBSpectrum, 3}}, Float32, Tuple{Int64, Int64, Int64}}" href="#Hikari.build_rgb_majorant_grid!-Tuple{Hikari.MajorantGrid, Union{Nothing, AbstractArray{Hikari.RGBSpectrum, 3}}, Union{Nothing, AbstractArray{Hikari.RGBSpectrum, 3}}, Float32, Tuple{Int64, Int64, Int64}}"><span class="jlbinding">Hikari.build_rgb_majorant_grid!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>In-place majorant grid rebuild for RGBGridMedium density updates.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1185" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.build_rgb_majorant_grid-Tuple{Union{Nothing, AbstractArray{Hikari.RGBSpectrum, 3}}, Union{Nothing, AbstractArray{Hikari.RGBSpectrum, 3}}, Float32, Tuple{Int64, Int64, Int64}, GeometryBasics.Vec{3, Int64}}" href="#Hikari.build_rgb_majorant_grid-Tuple{Union{Nothing, AbstractArray{Hikari.RGBSpectrum, 3}}, Union{Nothing, AbstractArray{Hikari.RGBSpectrum, 3}}, Float32, Tuple{Int64, Int64, Int64}, GeometryBasics.Vec{3, Int64}}"><span class="jlbinding">Hikari.build_rgb_majorant_grid</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Build majorant grid for RGBGridMedium following pbrt-v4.</p><p>For each majorant voxel, computes: sigma_scale * (max(σ_a.MaxValue) + max(σ_s.MaxValue))</p><p>where MaxValue returns the maximum RGB component of each spectrum.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1115-L1122" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.bvh_pmf-Tuple{AbstractVector{Hikari.LightBVHNode}, AbstractVector{UInt32}, Int32, Int32, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Int32}" href="#Hikari.bvh_pmf-Tuple{AbstractVector{Hikari.LightBVHNode}, AbstractVector{UInt32}, Int32, Int32, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Int32}"><span class="jlbinding">Hikari.bvh_pmf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bvh_pmf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nodes, light_to_bit_trail, num_infinite, num_bvh, p, n, light_flat_idx) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute the PMF for a specific light at shading point (p, n). Uses the bit trail to replay the BVH traversal path efficiently.</p><p>Following pbrt-v4&#39;s BVHLightSampler::PMF (lightsamplers.h:323-358).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/bvh-light-sampler.jl#L176-L183" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.bvh_sample_light-Tuple{AbstractVector{Hikari.LightBVHNode}, AbstractVector{Int32}, Int32, Int32, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32}" href="#Hikari.bvh_sample_light-Tuple{AbstractVector{Hikari.LightBVHNode}, AbstractVector{Int32}, Int32, Int32, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32}"><span class="jlbinding">Hikari.bvh_sample_light</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bvh_sample_light</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nodes, infinite_indices, num_infinite, num_bvh, p, n, u) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Int32, Float32)</span></span></code></pre></div><p>Sample a light from the BVH using importance-weighted traversal. Returns (flat_light_index, pmf). Returns (0, 0) on failure.</p><p>Following pbrt-v4&#39;s BVHLightSampler::Sample (lightsamplers.h:266-320).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/bvh-light-sampler.jl#L97-L104" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.bvh_to_gpu-Tuple{Any, Hikari.BVHLightSampler}" href="#Hikari.bvh_to_gpu-Tuple{Any, Hikari.BVHLightSampler}"><span class="jlbinding">Hikari.bvh_to_gpu</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">to_gpu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, sampler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">BVHLightSampler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NamedTuple</span></span></code></pre></div><p>Upload BVH light sampler data to GPU. Returns a NamedTuple with GPU arrays.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/bvh-light-sampler.jl#L472-L476" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.choose_material-Tuple{Hikari.MixMaterial, Raycore.StaticMultiTypeSet, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}" href="#Hikari.choose_material-Tuple{Hikari.MixMaterial, Raycore.StaticMultiTypeSet, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.choose_material</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">choose_material</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MixMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, textures, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, wo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, uv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SetKey</span></span></code></pre></div><p>Choose which sub-material to use at the given hit point. Returns the SetKey of the chosen material.</p><p>Following pbrt-v4&#39;s ChooseMaterial:</p><ol><li><p>Evaluate the amount texture at (uv)</p></li><li><p>If amount ≤ 0, return material1</p></li><li><p>If amount ≥ 1, return material2</p></li><li><p>Otherwise, use deterministic hash to stochastically select</p></li></ol><p>This function is called at intersection time, before material evaluation.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/mix-material.jl#L164-L177" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.choose_material_dispatch-Tuple{Raycore.StaticMultiTypeSet, Raycore.SetKey, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}" href="#Hikari.choose_material_dispatch-Tuple{Raycore.StaticMultiTypeSet, Raycore.SetKey, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.choose_material_dispatch</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">choose_material_dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(materials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SetKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p, wo, uv) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SetKey</span></span></code></pre></div><p>Type-stable dispatch for choosing material from MixMaterial. If the material is not MixMaterial, returns the input index unchanged. <code>materials</code> is used both for material lookup and texture evaluation.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/mix-material.jl#L219-L225" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.cleanup!-Tuple{Hikari.FastWavefrontBuffers}" href="#Hikari.cleanup!-Tuple{Hikari.FastWavefrontBuffers}"><span class="jlbinding">Hikari.cleanup!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cleanup!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(buffers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FastWavefrontBuffers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Release GPU memory held by FastWavefront buffers.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/fast-wavefront.jl#L726-L730" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.cleanup!-Tuple{Hikari.FastWavefront}" href="#Hikari.cleanup!-Tuple{Hikari.FastWavefront}"><span class="jlbinding">Hikari.cleanup!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cleanup!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(integrator</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FastWavefront</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Release GPU memory held by the integrator&#39;s cached buffers.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/fast-wavefront.jl#L751-L755" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.cleanup!-Tuple{Hikari.SobolRNG}" href="#Hikari.cleanup!-Tuple{Hikari.SobolRNG}"><span class="jlbinding">Hikari.cleanup!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cleanup!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rng</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SobolRNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Release GPU memory held by the SobolRNG.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L395-L399" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.cleanup!-Tuple{Hikari.VolPathState}" href="#Hikari.cleanup!-Tuple{Hikari.VolPathState}"><span class="jlbinding">Hikari.cleanup!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cleanup!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VolPathState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Release GPU memory held by the VolPath state.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath-state.jl#L233-L237" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.clear!-Tuple{Hikari.VolPath}" href="#Hikari.clear!-Tuple{Hikari.VolPath}"><span class="jlbinding">Hikari.clear!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">clear!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(integrator</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VolPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Clear the integrator&#39;s internal state (RGB and weight accumulators) for restarting progressive rendering.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath.jl#L103-L107" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_bsdf-Tuple{Hikari.CloudVolume, Any, Hikari.SurfaceInteraction, Bool, Any}" href="#Hikari.compute_bsdf-Tuple{Hikari.CloudVolume, Any, Hikari.SurfaceInteraction, Bool, Any}"><span class="jlbinding">Hikari.compute_bsdf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_bsdf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cloud</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CloudVolume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, si, allow_multiple_lobes, transport) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BSDF</span></span></code></pre></div><p>Returns a dummy BSDF for volume materials. Volumes don&#39;t use BSDF-based shading; they use ray marching in shade() instead. This method exists so that compute_bsdf_for_material can handle CloudVolume without special-casing.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/volume.jl#L414-L420" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_bsdf-Tuple{Hikari.ConductorMaterial, Any, Hikari.SurfaceInteraction, Bool, Any}" href="#Hikari.compute_bsdf-Tuple{Hikari.ConductorMaterial, Any, Hikari.SurfaceInteraction, Bool, Any}"><span class="jlbinding">Hikari.compute_bsdf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute BSDF for ConductorMaterial - conductor with Fresnel reflectance.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/material.jl#L93-L95" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_bsdf-Tuple{Hikari.Emissive, Any, Hikari.SurfaceInteraction, Bool, Any}" href="#Hikari.compute_bsdf-Tuple{Hikari.Emissive, Any, Hikari.SurfaceInteraction, Bool, Any}"><span class="jlbinding">Hikari.compute_bsdf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_bsdf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Emissive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, si</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SurfaceInteraction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, transport)</span></span></code></pre></div><p>Emissive has no BSDF (pure emitter, doesn&#39;t scatter light). Returns an empty BSDF.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/emissive.jl#L114-L119" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_bsdf-Tuple{Hikari.GlassMaterial, Any, Hikari.SurfaceInteraction, Bool, Any}" href="#Hikari.compute_bsdf-Tuple{Hikari.GlassMaterial, Any, Hikari.SurfaceInteraction, Bool, Any}"><span class="jlbinding">Hikari.compute_bsdf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute BSDF for GlassMaterial.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/material.jl#L37-L39" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_bsdf-Tuple{Hikari.MatteMaterial, Any, Hikari.SurfaceInteraction, Bool, Any}" href="#Hikari.compute_bsdf-Tuple{Hikari.MatteMaterial, Any, Hikari.SurfaceInteraction, Bool, Any}"><span class="jlbinding">Hikari.compute_bsdf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute BSDF for MatteMaterial.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/material.jl#L18-L20" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_bsdf-Tuple{Hikari.MirrorMaterial, Any, Hikari.SurfaceInteraction, Bool, Any}" href="#Hikari.compute_bsdf-Tuple{Hikari.MirrorMaterial, Any, Hikari.SurfaceInteraction, Bool, Any}"><span class="jlbinding">Hikari.compute_bsdf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute BSDF for MirrorMaterial.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/material.jl#L29-L31" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_differentials-Tuple{Hikari.SurfaceInteraction, Raycore.RayDifferentials}" href="#Hikari.compute_differentials-Tuple{Hikari.SurfaceInteraction, Raycore.RayDifferentials}"><span class="jlbinding">Hikari.compute_differentials</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute partial derivatives needed for computing sampling rates for things like texture antialiasing.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/surface_interaction.jl#L132-L135" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_direct_lighting_spectral-Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, Hikari.SampledWavelengths{4}, Hikari.PWLightSample, Hikari.SampledSpectrum{4}, Float32}" href="#Hikari.compute_direct_lighting_spectral-Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, Hikari.SampledWavelengths{4}, Hikari.PWLightSample, Hikari.SampledSpectrum{4}, Float32}"><span class="jlbinding">Hikari.compute_direct_lighting_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_direct_lighting_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(p, n, wo, beta, r_u, lambda, light_sample, bsdf_f, bsdf_pdf)</span></span></code></pre></div><p>Compute direct lighting contribution from a light sample with MIS.</p><p>Following pbrt-v4 (surfscatter.cpp lines 288-316):</p><ul><li><p>Ld = beta * f * Li * cos_theta (NO MIS weight or PDF division here)</p></li><li><p>r_u = r_u * bsdfPDF (0 for delta lights)</p></li><li><p>r_l = r_u * lightPDF</p></li><li><p>MIS weighting happens at shadow ray resolution: Ld * T_ray / (r_u * tr_r_u + r_l * tr_r_l).Average()</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L524-L534" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_env_light_pdf-Tuple{Raycore.StaticMultiTypeSet, GeometryBasics.Vec{3, Float32}}" href="#Hikari.compute_env_light_pdf-Tuple{Raycore.StaticMultiTypeSet, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.compute_env_light_pdf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_env_light_pdf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lights</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ray_d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Compute PDF for sampling direction from environment-type lights using StaticMultiTypeSet.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L460-L464" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_geometric_normal-Tuple{Any}" href="#Hikari.compute_geometric_normal-Tuple{Any}"><span class="jlbinding">Hikari.compute_geometric_normal</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_geometric_normal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(primitive) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Compute geometric normal from a primitive (triangle).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/intersection.jl#L96-L100" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_path_sample_1d-NTuple{5, Int32}" href="#Hikari.compute_path_sample_1d-NTuple{5, Int32}"><span class="jlbinding">Hikari.compute_path_sample_1d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_path_sample_1d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, py</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sample_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, depth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, local_dim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute a 1D sample for path tracing at a given depth. Each depth gets a separate set of dimensions to avoid correlation.</p><p>NOTE: This is the old hash-based version. Use compute_path_sample_1d_sobol for better convergence.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/stratified.jl#L208-L215" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_path_sample_1d-Tuple{Hikari.SobolRNG, Vararg{Int32, 5}}" href="#Hikari.compute_path_sample_1d-Tuple{Hikari.SobolRNG, Vararg{Int32, 5}}"><span class="jlbinding">Hikari.compute_path_sample_1d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_path_sample_1d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rng</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SobolRNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, py</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sample_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, depth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, local_dim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute a 1D sample for path tracing at a given depth using SobolRNG.</p><p><strong>Dimension allocation:</strong></p><ul><li><p>Base dimension = 6 (camera uses 0-5)</p></li><li><p>Each depth uses 8 dimensions for BSDF, light, RR, etc.</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L452-L460" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_path_sample_1d_sobol-Tuple{Int32, Int32, Int32, Int32, Int32, Int32, Int32, UInt32, Any}" href="#Hikari.compute_path_sample_1d_sobol-Tuple{Int32, Int32, Int32, Int32, Int32, Int32, Int32, UInt32, Any}"><span class="jlbinding">Hikari.compute_path_sample_1d_sobol</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_path_sample_1d_sobol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(px, py, sample_idx, depth, local_dim, log2_spp, n_base4_digits, seed, sobol_matrices) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute a 1D sample for path tracing using ZSobol sampler.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/stratified.jl#L266-L270" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_path_sample_2d-NTuple{5, Int32}" href="#Hikari.compute_path_sample_2d-NTuple{5, Int32}"><span class="jlbinding">Hikari.compute_path_sample_2d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_path_sample_2d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, py</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sample_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, depth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, local_dim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Tuple{Float32, Float32}</span></span></code></pre></div><p>Compute a 2D sample for path tracing at a given depth.</p><p>NOTE: This is the old hash-based version. Use compute_path_sample_2d_sobol for better convergence.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/stratified.jl#L223-L229" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_path_sample_2d-Tuple{Hikari.SobolRNG, Vararg{Int32, 5}}" href="#Hikari.compute_path_sample_2d-Tuple{Hikari.SobolRNG, Vararg{Int32, 5}}"><span class="jlbinding">Hikari.compute_path_sample_2d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_path_sample_2d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rng</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SobolRNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, py</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sample_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, depth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, local_dim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Tuple{Float32, Float32}</span></span></code></pre></div><p>Compute a 2D sample for path tracing at a given depth using SobolRNG.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L466-L470" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_path_sample_2d_sobol-Tuple{Int32, Int32, Int32, Int32, Int32, Int32, Int32, UInt32, Any}" href="#Hikari.compute_path_sample_2d_sobol-Tuple{Int32, Int32, Int32, Int32, Int32, Int32, Int32, UInt32, Any}"><span class="jlbinding">Hikari.compute_path_sample_2d_sobol</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_path_sample_2d_sobol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(px, py, sample_idx, depth, local_dim, log2_spp, n_base4_digits, seed, sobol_matrices) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Tuple{Float32, Float32}</span></span></code></pre></div><p>Compute a 2D sample for path tracing using ZSobol sampler.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/stratified.jl#L281-L285" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_pdf-Tuple{Hikari.UberBxDF, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.compute_pdf-Tuple{Hikari.UberBxDF, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.compute_pdf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute PDF value for the given directions. In comparison, <code>sample_f</code> computes PDF value for the incident directions <em>it</em> chooses given the outgoing direction, while this returns a value of PDF for the given pair of directions.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/uber-material.jl#L123-L128" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_pixel_sample-Tuple{Hikari.SobolRNG, Int32, Int32, Int32}" href="#Hikari.compute_pixel_sample-Tuple{Hikari.SobolRNG, Int32, Int32, Int32}"><span class="jlbinding">Hikari.compute_pixel_sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_pixel_sample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rng</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SobolRNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, py</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sample_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Compute all camera sample values for a pixel using SobolRNG. Returns a PixelSample struct with jitter, wavelength, lens, and time samples.</p><p><strong>Dimension allocation (matching PBRT-v4 exactly):</strong></p><p><strong>See pbrt-v4/src/pbrt/wavefront/camera.cpp:51-60 and samplers.h:797-814</strong></p><p><strong>pbrt-v4&#39;s Get1D/Get2D increment dimension BEFORE computing hash:</strong></p><p><strong>- StartPixelSample(pPixel, sampleIndex, 0): dimension = 0</strong></p><p><strong>- Get1D() for wavelength: dimension++ → 1, hash uses 1</strong></p><p><strong>- GetPixel2D() which is Get2D(): dimension += 2 → 3, hash uses 3 (for jitter)</strong></p><p><strong>- Get1D() for time: dimension++ → 4, hash uses 4</strong></p><p><strong>- Get2D() for lens: dimension += 2 → 6, hash uses 6</strong></p><p><strong>So dimensions used are: 1 (wavelength), 3 (jitter), 4 (time), 6 (lens)</strong></p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L427-L442" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_pixel_sample-Tuple{Int32, Int32, Int32}" href="#Hikari.compute_pixel_sample-Tuple{Int32, Int32, Int32}"><span class="jlbinding">Hikari.compute_pixel_sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_pixel_sample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, py</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sample_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PixelSample</span></span></code></pre></div><p>Compute all sample values for a pixel sample deterministically. Uses R2 sequence for pixel jitter (better 2D stratification) and hash-based sampling for other dimensions.</p><p>NOTE: This is the old hash-based version. Use compute_pixel_sample_sobol for better convergence.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/stratified.jl#L180-L188" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_pixel_sample_sobol-Tuple{Int32, Int32, Int32, Int32, Int32, UInt32, Any}" href="#Hikari.compute_pixel_sample_sobol-Tuple{Int32, Int32, Int32, Int32, Int32, UInt32, Any}"><span class="jlbinding">Hikari.compute_pixel_sample_sobol</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_pixel_sample_sobol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(px, py, sample_idx, log2_spp, n_base4_digits, seed, sobol_matrices) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PixelSample</span></span></code></pre></div><p>Compute all sample values for a pixel sample using ZSobol sampler. This matches PBRT-v4&#39;s ZSobolSampler for better convergence.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/stratified.jl#L242-L247" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_scattering!" href="#Hikari.compute_scattering!"><span class="jlbinding">Hikari.compute_scattering!</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><p>If an intersection was found, it is necessary to determine, how the surface&#39;s material scatters light. <code>compute_scattering!</code> method evaluates texture functions to determine surface properties and then initializing a representation of the BSDF at the point.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/surface_interaction.jl#L177-L183" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_shading_normal-Tuple{Any, Any, GeometryBasics.Vec{3, Float32}}" href="#Hikari.compute_shading_normal-Tuple{Any, Any, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.compute_shading_normal</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_shading_normal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(primitive, barycentric, geometric_normal) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Compute interpolated shading normal from vertex normals using barycentric coordinates. Falls back to geometric normal if vertex normals are not available (NaN).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/intersection.jl#L196-L201" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_tangent_frame-Tuple{Any}" href="#Hikari.compute_tangent_frame-Tuple{Any}"><span class="jlbinding">Hikari.compute_tangent_frame</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_tangent_frame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(primitive) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (dpdu</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dpdv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Compute tangent vectors for a primitive.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/intersection.jl#L154-L158" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_texture_filter_context-Tuple{Hikari.VPMaterialEvalWorkItem, Any, Int32}" href="#Hikari.compute_texture_filter_context-Tuple{Hikari.VPMaterialEvalWorkItem, Any, Int32}"><span class="jlbinding">Hikari.compute_texture_filter_context</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_texture_filter_context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(work, camera, samples_per_pixel) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TextureFilterContext</span></span></code></pre></div><p>Compute texture filtering context from material evaluation work item. Uses approximate screen-space derivatives for proper mipmap selection.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/surface-eval.jl#L125-L130" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_transmittance" href="#Hikari.compute_transmittance"><span class="jlbinding">Hikari.compute_transmittance</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><p>Compute transmittance from a point towards a direction through the volume</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/volume.jl#L185" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_transmittance_ratio_tracking-Tuple{Any, Any, Raycore.SetKey, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Hikari.SampledWavelengths{4}}" href="#Hikari.compute_transmittance_ratio_tracking-Tuple{Any, Any, Raycore.SetKey, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.compute_transmittance_ratio_tracking</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_transmittance_ratio_tracking</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, media, medium_idx, origin, dir, t_max, lambda)</span></span></code></pre></div><p>Compute transmittance through heterogeneous medium using ratio tracking. Following pbrt-v4&#39;s TraceTransmittance / SampleT_maj implementation.</p><p>Uses DDA-based per-voxel majorant bounds (via RayMajorantIterator) for tight bounds in sparse heterogeneous media, matching the primary path&#39;s delta tracking.</p><p>Returns (T_ray, r_u, r_l) where:</p><ul><li><p>T_ray: spectral transmittance estimate</p></li><li><p>r_u, r_l: MIS weight accumulators for combining with path weights</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/intersection.jl#L408-L420" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_transmittance_simple-Tuple{Any, Any, Raycore.SetKey, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Hikari.SampledWavelengths{4}}" href="#Hikari.compute_transmittance_simple-Tuple{Any, Any, Raycore.SetKey, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.compute_transmittance_simple</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_transmittance_simple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, media, medium_idx, origin, dir, t_max, lambda)</span></span></code></pre></div><p>Simple wrapper that returns only the transmittance (for compatibility).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/intersection.jl#L544-L548" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_uv-Tuple{Any, GeometryBasics.Point{3, Float32}}" href="#Hikari.compute_uv-Tuple{Any, GeometryBasics.Point{3, Float32}}"><span class="jlbinding">Hikari.compute_uv</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_uv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(primitive, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Point2f</span></span></code></pre></div><p>Compute UV coordinates for a point on a primitive. Uses barycentric interpolation for triangles.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/intersection.jl#L112-L117" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_uv_barycentric-Tuple{Any, Any}" href="#Hikari.compute_uv_barycentric-Tuple{Any, Any}"><span class="jlbinding">Hikari.compute_uv_barycentric</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_uv_barycentric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(primitive, barycentric) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Point2f</span></span></code></pre></div><p>Compute UV coordinates using barycentric coordinates from ray intersection. More accurate than recomputing barycentric from position.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/intersection.jl#L175-L180" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_uv_derivatives-NTuple{4, GeometryBasics.Vec{3, Float32}}" href="#Hikari.compute_uv_derivatives-NTuple{4, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.compute_uv_derivatives</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_uv_derivatives</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dpdu, dpdv, dpdx, dpdy) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (dudx, dudy, dvdx, dvdy)</span></span></code></pre></div><p>Compute UV derivatives from position derivatives using least-squares solve. Following pbrt-v4&#39;s SurfaceInteraction::ComputeDifferentials.</p><p>Given:</p><ul><li><p>dpdu, dpdv: How position changes with UV (∂p/∂u, ∂p/∂v)</p></li><li><p>dpdx, dpdy: How position changes with screen pixel (∂p/∂x, ∂p/∂y)</p></li></ul><p>Solve for:</p><ul><li><p>dudx, dudy: How u changes with screen pixel (∂u/∂x, ∂u/∂y)</p></li><li><p>dvdx, dvdy: How v changes with screen pixel (∂v/∂x, ∂v/∂y)</p></li></ul><p>Uses the normal equations: (A^T A) [du/dx; dv/dx]^T = A^T [dpdx] where A = [dpdu | dpdv] is a 3x2 matrix.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/surface-eval.jl#L65-L81" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_variance_kernel!-Tuple{Any}" href="#Hikari.compute_variance_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.compute_variance_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_variance_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(variance, input, width, height)</span></span></code></pre></div><p>Compute per-pixel variance from RGB framebuffer. Uses spatial 3x3 neighborhood for variance estimation.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/denoise.jl#L230-L235" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_white_balance_matrix-Tuple{Float32}" href="#Hikari.compute_white_balance_matrix-Tuple{Float32}"><span class="jlbinding">Hikari.compute_white_balance_matrix</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_white_balance_matrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(src_temp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SMatrix{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,Float32}</span></span></code></pre></div><p>Compute the Bradford chromatic adaptation matrix to transform from source illuminant (at color temperature src_temp in Kelvin) to D65.</p><p>This is used for white balancing: colors captured under a light source at <code>src_temp</code> Kelvin are transformed to appear as if they were captured under D65.</p><p><strong>Example</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Adapt from 5000K (warm daylight) to D65</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wb_matrix </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> compute_white_balance_matrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5000f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L507-L521" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.compute_zsobol_params-Tuple{Int64, Int64, Int64}" href="#Hikari.compute_zsobol_params-Tuple{Int64, Int64, Int64}"><span class="jlbinding">Hikari.compute_zsobol_params</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_zsobol_params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(samples_per_pixel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, width</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, height</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Int32, Int32)</span></span></code></pre></div><p>Compute the ZSobol sampler parameters from render settings. Returns (log2_spp, n_base4_digits).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L314-L319" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.convert_lights_for_fast_wavefront-Tuple{Any, Float32}" href="#Hikari.convert_lights_for_fast_wavefront-Tuple{Any, Float32}"><span class="jlbinding">Hikari.convert_lights_for_fast_wavefront</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Convert lights for fast wavefront rendering. Returns a tuple of lights.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/fast-wavefront.jl#L785-L788" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.coordinate_system-Tuple{GeometryBasics.Vec{3, Float32}}" href="#Hikari.coordinate_system-Tuple{GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.coordinate_system</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">coordinate_system</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (tangent, bitangent)</span></span></code></pre></div><p>Build orthonormal basis from a normal vector.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3509-L3513" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.cos2_theta-Tuple{GeometryBasics.Vec{3, Float32}}" href="#Hikari.cos2_theta-Tuple{GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.cos2_theta</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cos2_theta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Get cos²(θ) of a direction in local coordinates.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3591-L3595" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.cos_phi-Tuple{GeometryBasics.Vec{3, Float32}}" href="#Hikari.cos_phi-Tuple{GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.cos_phi</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cos_phi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Get cos(φ) of a direction in local coordinates (matches pbrt-v4&#39;s CosPhi).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3629-L3633" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.cos_theta-Tuple{GeometryBasics.Vec{3, Float32}}" href="#Hikari.cos_theta-Tuple{GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.cos_theta</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cos_theta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Get cos(θ) of a direction in local coordinates (matches pbrt-v4&#39;s CosTheta). In local space, z is the surface normal.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3583-L3588" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.cos_θ-Tuple{GeometryBasics.Vec{3, Float32}}" href="#Hikari.cos_θ-Tuple{GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.cos_θ</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>The shading coordinate system gives a frame for expressing directions in spherical coordinates (θ, ϕ). The angle θ is measured from the given direction to the z-axis and ϕ is the angle formed with the x-axis after projection of the direction onto xy-plane.</p><p>Since normal is <code>(0, 0, 1) → cos_θ = n · w = (0, 0, 1) ⋅ w = w.z</code>.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/surface_interaction.jl#L264-L272" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.create_dda_iterator-Union{Tuple{M}, Tuple{M, Raycore.Bounds3, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Float32, Hikari.SampledSpectrum{4}}} where M&lt;:Hikari.MajorantGrid" href="#Hikari.create_dda_iterator-Union{Tuple{M}, Tuple{M, Raycore.Bounds3, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Float32, Hikari.SampledSpectrum{4}}} where M&lt;:Hikari.MajorantGrid"><span class="jlbinding">Hikari.create_dda_iterator</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">create_dda_iterator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(grid, bounds, ray_o, ray_d, t_min, t_max, σ_t) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDAMajorantIterator</span></span></code></pre></div><p>Initialize a DDA iterator for traversing the majorant grid along a ray. The ray should already be transformed to medium space. t_min and t_max are the ray segment bounds (in medium space).</p><p>Following PBRT-v4&#39;s DDAMajorantIterator constructor.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L266-L274" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.create_light_sampler-Tuple{Raycore.MultiTypeSet}" href="#Hikari.create_light_sampler-Tuple{Raycore.MultiTypeSet}"><span class="jlbinding">Hikari.create_light_sampler</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">create_light_sampler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lights</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; method</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Symbol</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:power</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, scene_radius</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LightSampler</span></span></code></pre></div><p>Create a light sampler for the given lights.</p><p><strong>Arguments</strong></p><ul><li><p><code>lights::MultiTypeSet</code>: Collection of light sources</p></li><li><p><code>method::Symbol</code>: Sampling method (<code>:uniform</code> or <code>:power</code>)</p></li><li><p><code>scene_radius::Float32</code>: Scene bounding sphere radius (for power-weighted sampling of infinite lights)</p></li></ul><p><strong>Methods</strong></p><ul><li><p><code>:uniform</code>: Uniform random selection (baseline)</p></li><li><p><code>:power</code>: Power-weighted selection (recommended for varying light intensities)</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-sampler.jl#L546-L559" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.current_ray_queue-Tuple{Hikari.VolPathState}" href="#Hikari.current_ray_queue-Tuple{Hikari.VolPathState}"><span class="jlbinding">Hikari.current_ray_queue</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Get the current ray queue based on the queue selector.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath-state.jl#L187" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.dda_next-Union{Tuple{M}, Tuple{Hikari.DDAMajorantIterator{M}, Any}} where M" href="#Hikari.dda_next-Union{Tuple{M}, Tuple{Hikari.DDAMajorantIterator{M}, Any}} where M"><span class="jlbinding">Hikari.dda_next</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dda_next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(iter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DDAMajorantIterator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, media) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (RayMajorantSegment, DDAMajorantIterator, Bool)</span></span></code></pre></div><p>Advance the DDA iterator and return the next majorant segment. Returns (seg, new_iter, true) if valid, (invalid_seg, exhausted_iter, false) if exhausted.</p><p>The Bool indicates validity: true = has segment, false = exhausted.</p><p>Since structs are immutable in Julia, this returns a new iterator with updated state. Following PBRT-v4&#39;s DDAMajorantIterator::Next().</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L393-L403" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.denoise!-Tuple{Hikari.Film}" href="#Hikari.denoise!-Tuple{Hikari.Film}"><span class="jlbinding">Hikari.denoise!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">denoise!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(film</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Film</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DenoiseConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><p>Apply edge-avoiding à-trous wavelet denoising to film&#39;s framebuffer. Uses auxiliary buffers (normal, depth) from film for edge-stopping. Result is stored in film.postprocess.</p><p><strong>Arguments</strong></p><ul><li><p><code>film</code>: Film with framebuffer and auxiliary buffers populated</p></li><li><p><code>config</code>: DenoiseConfig with filter parameters</p></li></ul><p><strong>Notes</strong></p><ul><li><p>Requires film.normal and film.depth to be populated (e.g., via fill_aux_buffers!)</p></li><li><p>Modifies film.postprocess in place</p></li><li><p>For PhysicalWavefront, aux buffers are populated during first bounce</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/denoise.jl#L285-L300" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.denoise_inplace!-Tuple{Hikari.Film}" href="#Hikari.denoise_inplace!-Tuple{Hikari.Film}"><span class="jlbinding">Hikari.denoise_inplace!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">denoise_inplace!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(film</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Film</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DenoiseConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><p>Like denoise!, but modifies framebuffer directly instead of using postprocess.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/denoise.jl#L374-L378" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.denoise_luminance-Tuple{Float32, Float32, Float32}" href="#Hikari.denoise_luminance-Tuple{Float32, Float32, Float32}"><span class="jlbinding">Hikari.denoise_luminance</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">denoise_luminance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r, g, b) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute luminance from RGB using Rec. 709 coefficients.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/denoise.jl#L61-L65" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.detect_camera_medium-Tuple{Any, Any, Any, GeometryBasics.Point{3, Float32}}" href="#Hikari.detect_camera_medium-Tuple{Any, Any, Any, GeometryBasics.Point{3, Float32}}"><span class="jlbinding">Hikari.detect_camera_medium</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">detect_camera_medium</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, accel, media_interfaces, camera_pos) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SetKey</span></span></code></pre></div><p>Detect which medium the camera is inside by tracing a single ray from the camera position. Returns a SetKey identifying the medium, or SetKey() for vacuum.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/intersection.jl#L736-L741" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.direction_to_uv_equal_area-Tuple{GeometryBasics.Vec{3, Float32}, StaticArraysCore.SMatrix{3, 3, Float32, 9}}" href="#Hikari.direction_to_uv_equal_area-Tuple{GeometryBasics.Vec{3, Float32}, StaticArraysCore.SMatrix{3, 3, Float32, 9}}"><span class="jlbinding">Hikari.direction_to_uv_equal_area</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">direction_to_uv_equal_area</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, rotation</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Mat3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Point2f</span></span></code></pre></div><p>Convert direction to UV using equal-area (octahedral) mapping. This is what pbrt-v4 uses for ImageInfiniteLight.</p><p>The rotation matrix transforms from render space to light/map space.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/environment_map.jl#L194-L201" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.direction_to_uv_equirect-Tuple{GeometryBasics.Vec{3, Float32}, StaticArraysCore.SMatrix{3, 3, Float32, 9}}" href="#Hikari.direction_to_uv_equirect-Tuple{GeometryBasics.Vec{3, Float32}, StaticArraysCore.SMatrix{3, 3, Float32, 9}}"><span class="jlbinding">Hikari.direction_to_uv_equirect</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Convert a direction vector to equirectangular UV coordinates. Uses standard lat-long mapping where:</p><ul><li><p>U (horizontal) maps to longitude: 0 at +X, increases counter-clockwise</p></li><li><p>V (vertical) maps to latitude: 0 at top (+Y), 1 at bottom (-Y)</p></li></ul><p>The rotation matrix transforms from render space to light/map space. We apply the INVERSE (transpose for orthogonal matrices) to get the direction in map space.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/environment_map.jl#L233-L241" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.distribution_fresnel_microfacet-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}} where S&lt;:Hikari.Spectrum" href="#Hikari.distribution_fresnel_microfacet-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}} where S&lt;:Hikari.Spectrum"><span class="jlbinding">Hikari.distribution_fresnel_microfacet</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Distribution function for FresnelMicrofacet - sum of reflection and transmission.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/microfacet.jl#L353-L355" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.distribution_lambertian_reflection-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}} where S&lt;:Hikari.Spectrum" href="#Hikari.distribution_lambertian_reflection-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}} where S&lt;:Hikari.Spectrum"><span class="jlbinding">Hikari.distribution_lambertian_reflection</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Reflection distribution is constant and divides reflectance spectrum equally over the hemisphere.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/lambertian.jl#L13-L16" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.distribution_specular_reflection-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}} where S&lt;:Hikari.Spectrum" href="#Hikari.distribution_specular_reflection-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}} where S&lt;:Hikari.Spectrum"><span class="jlbinding">Hikari.distribution_specular_reflection</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Return value of the distribution function for the given pair of directions. For specular reflection, no scattering is returned, since for arbitrary directions δ-funcion returns no scattering.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/specular.jl#L35-L39" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.distribution_specular_transmission-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}} where S&lt;:Hikari.Spectrum" href="#Hikari.distribution_specular_transmission-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}} where S&lt;:Hikari.Spectrum"><span class="jlbinding">Hikari.distribution_specular_transmission</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Return value of the distribution function for the given pair of directions. For specular transmission, no scattering is returned, since for arbitrary directions δ-funcion returns no scattering.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/specular.jl#L58-L62" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.encode_morton2-Tuple{UInt32, UInt32}" href="#Hikari.encode_morton2-Tuple{UInt32, UInt32}"><span class="jlbinding">Hikari.encode_morton2</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">encode_morton2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UInt64</span></span></code></pre></div><p>Encode two 32-bit coordinates into a single 64-bit Morton code. Reference: pbrt-v4/src/pbrt/util/vecmath.h EncodeMorton2</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L52-L57" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.equal_area_sphere_to_square-Tuple{GeometryBasics.Vec{3, Float32}}" href="#Hikari.equal_area_sphere_to_square-Tuple{GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.equal_area_sphere_to_square</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">equal_area_sphere_to_square</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Point2f</span></span></code></pre></div><p>Convert a direction vector to equal-area square UV coordinates. This is pbrt-v4&#39;s octahedral/equal-area mapping used for environment maps.</p><p>Reference: Clarberg, &quot;Fast Equal-Area Mapping of the (Hemi)Sphere using SIMD&quot;</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/environment_map.jl#L70-L77" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.equal_area_square_to_sphere-Tuple{GeometryBasics.Point{2, Float32}}" href="#Hikari.equal_area_square_to_sphere-Tuple{GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.equal_area_square_to_sphere</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">equal_area_square_to_sphere</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Convert equal-area square UV coordinates to a direction vector. Inverse of equal_area_sphere_to_square.</p><p>Reference: pbrt-v4&#39;s EqualAreaSquareToSphere</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/environment_map.jl#L125-L132" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.estimate_light_power-Tuple{Hikari.Light, Float32}" href="#Hikari.estimate_light_power-Tuple{Hikari.Light, Float32}"><span class="jlbinding">Hikari.estimate_light_power</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">estimate_light_power</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(light, scene_radius</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Estimate the total power (flux) of a light for importance sampling. Following pbrt-v4&#39;s Light::Phi() which returns total emitted power.</p><p>For point/spot lights: Phi = 4π * I (or 2π * I * cone_factor for spot) For directional lights: Phi = π * sceneRadius² * I For environment lights: Phi = 4π² * sceneRadius² * average_radiance</p><p>The scene_radius is required for infinite lights to compute meaningful power.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-sampler.jl#L369-L380" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.eval_dielectric_interface-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Float32, Float32}" href="#Hikari.eval_dielectric_interface-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Float32, Float32}"><span class="jlbinding">Hikari.eval_dielectric_interface</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">eval_dielectric_interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(wo, wi, alpha_x, alpha_y, eta) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (f, pdf)</span></span></code></pre></div><p>Evaluate the dielectric interface BSDF for given directions. Returns (f_value, pdf) for the given wo/wi pair.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L1420-L1425" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.eval_diffuse_interface-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.SampledSpectrum{4}}" href="#Hikari.eval_diffuse_interface-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.SampledSpectrum{4}}"><span class="jlbinding">Hikari.eval_diffuse_interface</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">eval_diffuse_interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(wo, wi, reflectance) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (f, pdf)</span></span></code></pre></div><p>Evaluate diffuse BSDF for given directions.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L1173-L1177" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.eval_sigmoid_polynomial-NTuple{4, Float32}" href="#Hikari.eval_sigmoid_polynomial-NTuple{4, Float32}"><span class="jlbinding">Hikari.eval_sigmoid_polynomial</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Evaluate sigmoid polynomial at wavelength (GPU-compatible)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L265" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.evaluate_bsdf_spectral-Tuple{Hikari.CoatedConductorMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.evaluate_bsdf_spectral-Tuple{Hikari.CoatedConductorMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.evaluate_bsdf_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">evaluate_bsdf_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CoatedConductorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, textures, wo, wi, n, uv, lambda) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (f, pdf)</span></span></code></pre></div><p>Evaluate CoatedConductor BSDF for given directions.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3238-L3242" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.evaluate_bsdf_spectral-Tuple{Hikari.CoatedDiffuseMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.evaluate_bsdf_spectral-Tuple{Hikari.CoatedDiffuseMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.evaluate_bsdf_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">evaluate_bsdf_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CoatedDiffuseMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, textures, wo, wi, n, uv, lambda) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (f, pdf)</span></span></code></pre></div><p>Evaluate CoatedDiffuse BSDF using pbrt-v4&#39;s LayeredBxDF::f random walk algorithm.</p><p>This is a 100% port of pbrt-v4&#39;s LayeredBxDF::f. The algorithm uses nSamples random walks to estimate the BSDF value using Monte Carlo integration with MIS.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L1556-L1563" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.evaluate_bsdf_spectral-Tuple{Hikari.ConductorMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.evaluate_bsdf_spectral-Tuple{Hikari.ConductorMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.evaluate_bsdf_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">evaluate_bsdf_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ConductorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (f, pdf)</span></span></code></pre></div><p>Evaluate metal BSDF for given directions. Matches pbrt-v4&#39;s ConductorBxDF::f and ConductorBxDF::PDF exactly.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L415-L420" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.evaluate_bsdf_spectral-Tuple{Hikari.DiffuseTransmissionMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.evaluate_bsdf_spectral-Tuple{Hikari.DiffuseTransmissionMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.evaluate_bsdf_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">evaluate_bsdf_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DiffuseTransmissionMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, textures, wo, wi, n, uv, lambda) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (f, pdf)</span></span></code></pre></div><p>Evaluate diffuse transmission BSDF matching pbrt-v4&#39;s DiffuseTransmissionBxDF::f and PDF.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L2167-L2171" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.evaluate_bsdf_spectral-Tuple{Hikari.MatteMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.evaluate_bsdf_spectral-Tuple{Hikari.MatteMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.evaluate_bsdf_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">evaluate_bsdf_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, mat, textures, wo, wi, n, uv, lambda) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (f</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SpectralRadiance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, pdf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Evaluate BSDF for a given pair of directions. Used for MIS in direct lighting. Returns the BSDF value and PDF.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L365-L370" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.evaluate_bsdf_spectral-Tuple{Hikari.MediumInterface, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.evaluate_bsdf_spectral-Tuple{Hikari.MediumInterface, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.evaluate_bsdf_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">evaluate_bsdf_spectral </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MediumInterface </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> forwards to wrapped material.</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3468-L3470" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.evaluate_bsdf_spectral-Tuple{Hikari.ThinDielectricMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.evaluate_bsdf_spectral-Tuple{Hikari.ThinDielectricMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.evaluate_bsdf_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">evaluate_bsdf_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ThinDielectricMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, textures, wo, wi, n, uv, lambda) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (f, pdf)</span></span></code></pre></div><p>Evaluate thin dielectric BSDF - returns zero for non-delta directions. ThinDielectric is purely specular, so f() and PDF() both return 0.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L2039-L2044" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.evaluate_environment_spectral-Tuple{Hikari.AmbientLight, Any, Hikari.RGBToSpectrumTable, GeometryBasics.Vec{3, Float32}, Hikari.SampledWavelengths{4}}" href="#Hikari.evaluate_environment_spectral-Tuple{Hikari.AmbientLight, Any, Hikari.RGBToSpectrumTable, GeometryBasics.Vec{3, Float32}, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.evaluate_environment_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">evaluate_environment_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(light</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AmbientLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lights, table, ray_d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Evaluate ambient light for an escaped ray - provides constant radiance regardless of direction.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L422-L426" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.evaluate_environment_spectral-Tuple{Hikari.EnvironmentLight, Any, Hikari.RGBToSpectrumTable, GeometryBasics.Vec{3, Float32}, Hikari.SampledWavelengths{4}}" href="#Hikari.evaluate_environment_spectral-Tuple{Hikari.EnvironmentLight, Any, Hikari.RGBToSpectrumTable, GeometryBasics.Vec{3, Float32}, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.evaluate_environment_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">evaluate_environment_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(light</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">EnvironmentLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lights, table, ray_d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Evaluate environment light for an escaped ray direction. The <code>lights</code> parameter is used to deref TextureRef fields in EnvironmentMap.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L402-L407" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.evaluate_escaped_ray_spectral-Tuple{Hikari.RGBToSpectrumTable, Raycore.StaticMultiTypeSet, GeometryBasics.Vec{3, Float32}, Hikari.SampledWavelengths{4}}" href="#Hikari.evaluate_escaped_ray_spectral-Tuple{Hikari.RGBToSpectrumTable, Raycore.StaticMultiTypeSet, GeometryBasics.Vec{3, Float32}, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.evaluate_escaped_ray_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">evaluate_escaped_ray_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, lights</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ray_d, lambda)</span></span></code></pre></div><p>Evaluate all environment-type lights for an escaped ray using StaticMultiTypeSet.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L438-L442" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.evaluate_material_complete" href="#Hikari.evaluate_material_complete"><span class="jlbinding">Hikari.evaluate_material_complete</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">evaluate_material_complete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mat, table, ctx, wo, ns, n, tfc, lambda, u, rng, regularize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Complete material evaluation for wavefront pipeline. Returns PWMaterialEvalResult with BSDF sample and emission.</p><p>When <code>regularize=true</code>, near-specular BSDFs will be roughened to reduce fireflies.</p><p>Arguments:</p><ul><li><code>tfc::TextureFilterContext</code>: Contains UV coordinates and screen-space derivatives for texture filtering.</li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-dispatch.jl#L170-L180" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.evaluate_material_inner!-Tuple{Any, Hikari.VPMaterialEvalWorkItem, Any, Any, Int32, Bool, Any, Any, Any, Any, Int32}" href="#Hikari.evaluate_material_inner!-Tuple{Any, Hikari.VPMaterialEvalWorkItem, Any, Any, Int32, Bool, Any, Any, Any, Any, Int32}"><span class="jlbinding">Hikari.evaluate_material_inner!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Inner function for material evaluation - can use return statements.</p><p>Now uses pre-computed Sobol samples from pixel_samples (pbrt-v4 RaySamples style).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/surface-eval.jl#L392-L396" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.evaluate_spectral_material-Tuple{Hikari.RGBToSpectrumTable, Raycore.StaticMultiTypeSet, Raycore.SetKey, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.evaluate_spectral_material-Tuple{Hikari.RGBToSpectrumTable, Raycore.StaticMultiTypeSet, Raycore.SetKey, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.evaluate_spectral_material</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">evaluate_spectral_material</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, materials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, idx, wo, wi, ns, tfc, lambda)</span></span></code></pre></div><p>Type-stable dispatch for spectral BSDF evaluation. Returns (f::SpectralRadiance, pdf::Float32).</p><p>Arguments:</p><ul><li><code>tfc::TextureFilterContext</code>: Contains UV coordinates and screen-space derivatives for texture filtering.</li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-dispatch.jl#L37-L45" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.extinction_at-Tuple{Hikari.CloudVolume, GeometryBasics.Point{3, Float32}}" href="#Hikari.extinction_at-Tuple{Hikari.CloudVolume, GeometryBasics.Point{3, Float32}}"><span class="jlbinding">Hikari.extinction_at</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Get extinction coefficient at a world position</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/volume.jl#L119" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.extract_nanovdb_metadata-Tuple{Vector{UInt8}}" href="#Hikari.extract_nanovdb_metadata-Tuple{Vector{UInt8}}"><span class="jlbinding">Hikari.extract_nanovdb_metadata</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Extract metadata from decompressed NanoVDB buffer</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/nanovdb.jl#L1108" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.extract_sky_color-Tuple{Any}" href="#Hikari.extract_sky_color-Tuple{Any}"><span class="jlbinding">Hikari.extract_sky_color</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Extract sky color from scene lights. Returns RGB for background rays.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/fast-wavefront.jl#L778-L780" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.face_forward-Tuple{Any, Any}" href="#Hikari.face_forward-Tuple{Any, Any}"><span class="jlbinding">Hikari.face_forward</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Flip normal <code>n</code> so that it lies in the same hemisphere as <code>v</code>.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/surface_interaction.jl#L303-L305" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.face_forward-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.face_forward-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.face_forward</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">face_forward</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v, n) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Flip v to be in the same hemisphere as n (matches pbrt-v4&#39;s FaceForward).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3868-L3872" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.fast_owen_scramble-Tuple{UInt32, UInt32}" href="#Hikari.fast_owen_scramble-Tuple{UInt32, UInt32}"><span class="jlbinding">Hikari.fast_owen_scramble</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fast_owen_scramble</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, seed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UInt32</span></span></code></pre></div><p>Fast approximation of Owen scrambling for Sobol sequences. Reference: pbrt-v4/src/pbrt/util/lowdiscrepancy.h FastOwenScrambler (lines 220-237)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L66-L71" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.fbm3d-Tuple{Any, Any, Any}" href="#Hikari.fbm3d-Tuple{Any, Any, Any}"><span class="jlbinding">Hikari.fbm3d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fbm3d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x, y, z; octaves</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, persistence</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float64</span></span></code></pre></div><p>Fractional Brownian motion (fBm) using Perlin noise. Combines multiple octaves of noise at different frequencies for natural-looking detail.</p><p><strong>Arguments</strong></p><ul><li><p><code>x, y, z</code>: 3D coordinates</p></li><li><p><code>octaves</code>: Number of noise layers to combine (default: 4)</p></li><li><p><code>persistence</code>: Amplitude multiplier per octave (default: 0.5)</p></li></ul><p>Returns values approximately in [-1, 1].</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/random.jl#L50-L62" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.fill_aux_buffers!-Tuple{Hikari.Film, Any, Any}" href="#Hikari.fill_aux_buffers!-Tuple{Hikari.Film, Any, Any}"><span class="jlbinding">Hikari.fill_aux_buffers!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fill_aux_buffers!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(film, scene, camera)</span></span></code></pre></div><p>Fill auxiliary buffers (albedo, normal, depth) by tracing primary rays. Uses KernelAbstractions for GPU compatibility.</p><p>This traces one ray per pixel (center of pixel) and stores first-hit data. Should be called before or after main rendering - the auxiliary buffers are used for denoising in postprocess!.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/film.jl#L400-L409" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.filter_evaluate-Tuple{Hikari.GPUFilterParams, GeometryBasics.Point{2, Float32}}" href="#Hikari.filter_evaluate-Tuple{Hikari.GPUFilterParams, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.filter_evaluate</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Evaluate filter at point p.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L955-L957" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.filter_sample-Tuple{Hikari.BoxFilter, GeometryBasics.Point{2, Float32}}" href="#Hikari.filter_sample-Tuple{Hikari.BoxFilter, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.filter_sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample the box filter - uniform distribution with weight = 1.0</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L55-L57" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.filter_sample-Tuple{Hikari.GPUFilterParams, GeometryBasics.Point{2, Float32}}" href="#Hikari.filter_sample-Tuple{Hikari.GPUFilterParams, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.filter_sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample filter - uses analytical sampling where possible, tabulated importance sampling for Gaussian/Mitchell/Lanczos.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L872-L875" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.filter_sample-Tuple{Hikari.GPUFilterParams, Hikari.GPUFilterSamplerData, GeometryBasics.Point{2, Float32}}" href="#Hikari.filter_sample-Tuple{Hikari.GPUFilterParams, Hikari.GPUFilterSamplerData, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.filter_sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample filter with tabulated data for importance sampling. Overload for when sampler_data is GPUFilterSamplerData (Gaussian/Mitchell/Lanczos).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L922-L925" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.filter_sample-Tuple{Hikari.GPUFilterParams, Nothing, GeometryBasics.Point{2, Float32}}" href="#Hikari.filter_sample-Tuple{Hikari.GPUFilterParams, Nothing, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.filter_sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample filter with tabulated data for importance sampling. Overload for when sampler_data is nothing (Box/Triangle filters).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L909-L912" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.filter_sample-Tuple{Hikari.TriangleFilter, GeometryBasics.Point{2, Float32}}" href="#Hikari.filter_sample-Tuple{Hikari.TriangleFilter, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.filter_sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample the triangle filter - analytical importance sampling with weight = 1.0</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L117-L119" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.filter_sample_tabulated-Tuple{Hikari.GPUFilterSamplerData, GeometryBasics.Point{2, Float32}}" href="#Hikari.filter_sample_tabulated-Tuple{Hikari.GPUFilterSamplerData, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.filter_sample_tabulated</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample filter using tabulated importance sampling (pbrt-v4 compatible). This is used for Gaussian, Mitchell, and Lanczos filters. Returns FilterSample with position and weight = f[sampled_point] / pdf.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L829-L833" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.finalize_soa-Tuple{NamedTuple}" href="#Hikari.finalize_soa-Tuple{NamedTuple}"><span class="jlbinding">Hikari.finalize_soa</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">finalize_soa</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(soa</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Finalize all arrays in a SoA (Structure of Arrays) NamedTuple.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/fast-wavefront.jl#L714-L718" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.find_interval-Tuple{AbstractVector{Float32}, Float32, Int32}" href="#Hikari.find_interval-Tuple{AbstractVector{Float32}, Float32, Int32}"><span class="jlbinding">Hikari.find_interval</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Binary search in CDF to find interval containing u. Returns index o such that cdf[o] &lt;= u &lt; cdf[o+1] (1-based indexing). CDF has size n+1 with cdf[1]=0 and cdf[n+1]=1. GPU-compatible fully unrolled branchless implementation.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L727-L732" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.find_interval_binary-Tuple{Any, Float32}" href="#Hikari.find_interval_binary-Tuple{Any, Float32}"><span class="jlbinding">Hikari.find_interval_binary</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>GPU-compatible binary search to find last index where cdf[i] ≤ u. Returns index in [1, n] where n = length(cdf).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sampling.jl#L110-L113" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.find_interval_binary_col-Tuple{AbstractMatrix{Float32}, Int32, Float32}" href="#Hikari.find_interval_binary_col-Tuple{AbstractMatrix{Float32}, Int32, Float32}"><span class="jlbinding">Hikari.find_interval_binary_col</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Binary search in a column of a 2D array (for conditional CDF).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sampling.jl#L313-L315" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.find_interval_binary_flat-Tuple{AbstractVector{Float32}, Float32}" href="#Hikari.find_interval_binary_flat-Tuple{AbstractVector{Float32}, Float32}"><span class="jlbinding">Hikari.find_interval_binary_flat</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>GPU-compatible fully unrolled branchless binary search in a flat vector (for marginal CDF).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sampling.jl#L330-L332" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.flat_to_light_index-Union{Tuple{Textures}, Tuple{Data}, Tuple{Raycore.StaticMultiTypeSet{Data, Textures}, Int32}} where {Data&lt;:Tuple, Textures}" href="#Hikari.flat_to_light_index-Union{Tuple{Textures}, Tuple{Data}, Tuple{Raycore.StaticMultiTypeSet{Data, Textures}, Int32}} where {Data&lt;:Tuple, Textures}"><span class="jlbinding">Hikari.flat_to_light_index</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">flat_to_light_index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lights</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, flat_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SetKey</span></span></code></pre></div><p>Convert a flat 1-based index to a SetKey (SetKey) for StaticMultiTypeSet. The flat index counts across all typed arrays in order.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-sampler.jl#L283-L288" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.float32_to_bytes-Tuple{Float32}" href="#Hikari.float32_to_bytes-Tuple{Float32}"><span class="jlbinding">Hikari.float32_to_bytes</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">float32_to_bytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NTuple{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,UInt8}</span></span></code></pre></div><p>GPU-compatible conversion of Float32 to bytes using Core.bitcast.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L650-L654" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.fr_complex-Tuple{Float32, Float32, Float32}" href="#Hikari.fr_complex-Tuple{Float32, Float32, Float32}"><span class="jlbinding">Hikari.fr_complex</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fr_complex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cos_theta_i, eta, k) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute Fresnel reflectance for a conductor using complex IOR (matches pbrt-v4&#39;s FrComplex).</p><p>Arguments:</p><ul><li><p><code>cos_theta_i</code>: Cosine of incident angle (clamped to [0, 1])</p></li><li><p><code>eta</code>: Real part of complex IOR (n)</p></li><li><p><code>k</code>: Imaginary part of complex IOR (extinction coefficient)</p></li></ul><p>This uses the exact same formula as pbrt-v4 with complex arithmetic.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3651-L3662" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.fr_complex_spectral-Tuple{Float32, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}}" href="#Hikari.fr_complex_spectral-Tuple{Float32, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}}"><span class="jlbinding">Hikari.fr_complex_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fr_complex_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cos_theta_i, eta, k) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Compute spectral Fresnel reflectance for a conductor (matches pbrt-v4&#39;s FrComplex for SampledSpectrum). Evaluates fr_complex for each wavelength channel.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3741-L3746" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.free!-Tuple{Hikari.Film}" href="#Hikari.free!-Tuple{Hikari.Film}"><span class="jlbinding">Hikari.free!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">free!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(film</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Film</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Release GPU memory held by the film by triggering finalizers on all arrays.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/film.jl#L491-L495" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.fresnel_conductor-Union{Tuple{S}, Tuple{Float32, S, S, S}} where S&lt;:Hikari.Spectrum" href="#Hikari.fresnel_conductor-Union{Tuple{S}, Tuple{Float32, S, S, S}} where S&lt;:Hikari.Spectrum"><span class="jlbinding">Hikari.fresnel_conductor</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>General Fresnel reflection formula with complex index of refraction η^ = η + ik, where some incident light is potentially absorbed by the material and turned into heat. k - is referred to as the absorption coefficient.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/bxdf.jl#L107-L111" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.fresnel_dielectric-Tuple{Float32, Float32, Float32}" href="#Hikari.fresnel_dielectric-Tuple{Float32, Float32, Float32}"><span class="jlbinding">Hikari.fresnel_dielectric</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fresnel_dielectric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cos_θi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ηi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ηt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute Fresnel reflection for dielectric materials (two-IOR version). This is a convenience wrapper that computes eta = ηt / ηi.</p><p>Arguments:</p><ul><li><p><code>cos_θi</code>: Cosine of incident angle w.r.t. normal</p></li><li><p><code>ηi</code>: Index of refraction for the incident media</p></li><li><p><code>ηt</code>: Index of refraction for the transmitted media</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/bxdf.jl#L92-L102" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.fresnel_dielectric-Tuple{Float32, Float32}" href="#Hikari.fresnel_dielectric-Tuple{Float32, Float32}"><span class="jlbinding">Hikari.fresnel_dielectric</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fresnel_dielectric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cos_θi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, eta</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute Fresnel reflection for dielectric materials (single-eta version). This matches pbrt-v4&#39;s FrDielectric() exactly.</p><p>Arguments:</p><ul><li><p><code>cos_θi</code>: Cosine of incident angle (can be negative if coming from inside)</p></li><li><p><code>eta</code>: Ratio n_t / n_i (transmitted IOR / incident IOR)</p></li></ul><p>For a ray hitting glass from air: eta = 1.5 (glass IOR) For a ray hitting air from inside glass: eta = 1/1.5</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/bxdf.jl#L54-L66" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.generate_cloud_density-Tuple{Int64}" href="#Hikari.generate_cloud_density-Tuple{Int64}"><span class="jlbinding">Hikari.generate_cloud_density</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">generate_cloud_density</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(resolution; kwargs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Array{Float32, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Generate a 3D density grid for volumetric cloud rendering.</p><p><strong>Keyword Arguments</strong></p><ul><li><p><code>scale=4.0</code>: Base frequency scale for noise</p></li><li><p><code>sphere_falloff=true</code>: Apply spherical boundary mask</p></li><li><p><code>threshold=0.3</code>: Density threshold (negative values include more volume)</p></li><li><p><code>worley_weight=0.6</code>: Weight of Worley noise (0-1, higher = puffier clouds)</p></li><li><p><code>edge_sharpness=1.5</code>: Controls edge falloff (lower = softer, puffier edges)</p></li><li><p><code>density_scale=3.0</code>: Scale factor for final density (match real cloud data ~2-3 max)</p></li></ul><p><strong>Cloud Appearance Tips</strong></p><ul><li><p>For puffy cumulus-like clouds: scale=2.5, worley_weight=0.6, threshold=0.15, density_scale=3.5</p></li><li><p>For wispy cirrus-like clouds: scale=5.0, worley_weight=0.3, threshold=0.3, density_scale=2.0</p></li><li><p>For dense fog-like volumes: scale=3.0, worley_weight=0.2, threshold=0.0, density_scale=4.0</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/random.jl#L131-L148" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.generate_ray-Union{Tuple{C}, Tuple{C, Hikari.CameraSample}} where C&lt;:Hikari.Camera" href="#Hikari.generate_ray-Union{Tuple{C}, Tuple{C, Hikari.CameraSample}} where C&lt;:Hikari.Camera"><span class="jlbinding">Hikari.generate_ray</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute the ray corresponding to a given sample. It is IMPORTANT that the direction vector of ray is normalized. Other parts of the system assume it to be so.</p><p>Returns generated ray &amp; floating point that affects how much the radiance, arriving at the film plane along generated ray, contributes to the final image. Simple camera models can return 1, but cameras with simulated physical lenses set this value to indicate how much light carries through the lenses, based on their optical properties.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/camera/camera.jl#L36-L46" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.generate_ray_differential-Union{Tuple{C}, Tuple{C, Hikari.CameraSample}} where C&lt;:Hikari.Camera" href="#Hikari.generate_ray_differential-Union{Tuple{C}, Tuple{C, Hikari.CameraSample}} where C&lt;:Hikari.Camera"><span class="jlbinding">Hikari.generate_ray_differential</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Same as <code>generate_ray</code>, but also computes rays for pixels shifted one pixel in x &amp; y directions on the film plane. Useful for anti-aliasing textures.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/camera/camera.jl#L52-L56" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_albedo-Tuple{Hikari.Emissive, GeometryBasics.Point{2, Float32}}" href="#Hikari.get_albedo-Tuple{Hikari.Emissive, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.get_albedo</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_albedo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Emissive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, uv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RGBSpectrum</span></span></code></pre></div><p>Get the &quot;albedo&quot; of an emissive material for denoising. For emissive materials, we return the normalized emission color.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/emissive.jl#L157-L162" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_albedo_spectral-Tuple{Hikari.CoatedConductorMaterial, Hikari.RGBToSpectrumTable, Any, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.get_albedo_spectral-Tuple{Hikari.CoatedConductorMaterial, Hikari.RGBToSpectrumTable, Any, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.get_albedo_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">get_albedo_spectral </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CoatedConductorMaterial.</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3432-L3434" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_albedo_spectral-Tuple{Hikari.CoatedDiffuseMaterial, Hikari.RGBToSpectrumTable, Any, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.get_albedo_spectral-Tuple{Hikari.CoatedDiffuseMaterial, Hikari.RGBToSpectrumTable, Any, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.get_albedo_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">get_albedo_spectral </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CoatedDiffuseMaterial.</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L1949-L1951" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_albedo_spectral-Tuple{Hikari.DiffuseTransmissionMaterial, Hikari.RGBToSpectrumTable, Any, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.get_albedo_spectral-Tuple{Hikari.DiffuseTransmissionMaterial, Hikari.RGBToSpectrumTable, Any, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.get_albedo_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">get_albedo_spectral </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DiffuseTransmissionMaterial.</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L2230-L2232" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_albedo_spectral-Tuple{Hikari.MatteMaterial, Hikari.RGBToSpectrumTable, Any, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.get_albedo_spectral-Tuple{Hikari.MatteMaterial, Hikari.RGBToSpectrumTable, Any, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.get_albedo_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_albedo_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBToSpectrumTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, mat, textures, uv, lambda) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Extract material albedo as spectral value for denoising auxiliary buffers.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L529-L533" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_albedo_spectral-Tuple{Hikari.MediumInterface, Hikari.RGBToSpectrumTable, Any, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.get_albedo_spectral-Tuple{Hikari.MediumInterface, Hikari.RGBToSpectrumTable, Any, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.get_albedo_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">get_albedo_spectral </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MediumInterface </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> forwards to wrapped material.</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3496-L3498" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_albedo_spectral-Tuple{Hikari.ThinDielectricMaterial, Hikari.RGBToSpectrumTable, Any, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.get_albedo_spectral-Tuple{Hikari.ThinDielectricMaterial, Hikari.RGBToSpectrumTable, Any, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.get_albedo_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">get_albedo_spectral </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ThinDielectricMaterial </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> returns white (transparent)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L2063-L2065" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_albedo_spectral_dispatch-Tuple{Hikari.RGBToSpectrumTable, Raycore.StaticMultiTypeSet, Raycore.SetKey, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.get_albedo_spectral_dispatch-Tuple{Hikari.RGBToSpectrumTable, Raycore.StaticMultiTypeSet, Raycore.SetKey, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.get_albedo_spectral_dispatch</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_albedo_spectral_dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, materials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, idx, tfc, lambda)</span></span></code></pre></div><p>Type-stable dispatch for getting material albedo for denoising. Returns SpectralRadiance.</p><p>Arguments:</p><ul><li><code>tfc::TextureFilterContext</code>: Contains UV coordinates and screen-space derivatives for texture filtering.</li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-dispatch.jl#L125-L133" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_emission-Tuple{Hikari.Emissive, GeometryBasics.Point{2, Float32}}" href="#Hikari.get_emission-Tuple{Hikari.Emissive, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.get_emission</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_emission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Emissive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, uv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RGBSpectrum</span></span></code></pre></div><p>Get the emitted radiance at UV coordinates (without directional check).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/emissive.jl#L84-L88" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_emission-Tuple{Hikari.Emissive, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}" href="#Hikari.get_emission-Tuple{Hikari.Emissive, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.get_emission</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_emission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Emissive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, si</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SurfaceInteraction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RGBSpectrum</span></span></code></pre></div><p>Get the emitted radiance at a surface point. Returns zero if the surface is one-sided and we&#39;re on the back.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/emissive.jl#L67-L72" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_emission_spectral-Tuple{Hikari.CoatedConductorMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.get_emission_spectral-Tuple{Hikari.CoatedConductorMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.get_emission_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">get_emission_spectral </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CoatedConductorMaterial </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> returns zero (non</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">emissive)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3422-L3424" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_emission_spectral-Tuple{Hikari.CoatedDiffuseMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.get_emission_spectral-Tuple{Hikari.CoatedDiffuseMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.get_emission_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">get_emission_spectral </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CoatedDiffuseMaterial </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> returns zero (non</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">emissive)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L1939-L1941" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_emission_spectral-Tuple{Hikari.DiffuseTransmissionMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.get_emission_spectral-Tuple{Hikari.DiffuseTransmissionMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.get_emission_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">get_emission_spectral </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DiffuseTransmissionMaterial </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> returns zero (non</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">emissive)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L2220-L2222" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_emission_spectral-Tuple{Hikari.MediumInterface, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.get_emission_spectral-Tuple{Hikari.MediumInterface, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.get_emission_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">get_emission_spectral </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MediumInterface </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> forwards to wrapped material.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Emission is now handled by DiffuseAreaLight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> the lights set, not on materials.)</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3478-L3481" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_emission_spectral-Tuple{Hikari.ThinDielectricMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.get_emission_spectral-Tuple{Hikari.ThinDielectricMaterial, Hikari.RGBToSpectrumTable, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.get_emission_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">get_emission_spectral </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ThinDielectricMaterial </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> returns zero (non</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">emissive)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L2053-L2055" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_emission_spectral_dispatch-Tuple{Hikari.RGBToSpectrumTable, Raycore.StaticMultiTypeSet, Raycore.SetKey, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.get_emission_spectral_dispatch-Tuple{Hikari.RGBToSpectrumTable, Raycore.StaticMultiTypeSet, Raycore.SetKey, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.get_emission_spectral_dispatch</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_emission_spectral_dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, materials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, idx, wo, n, tfc, lambda)</span></span></code></pre></div><p>Type-stable dispatch for getting spectral emission from materials. Returns SpectralRadiance (zero for non-emissive materials).</p><p>Arguments:</p><ul><li><code>tfc::TextureFilterContext</code>: Contains UV coordinates and screen-space derivatives for texture filtering.</li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-dispatch.jl#L59-L67" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_emission_spectral_uv_dispatch-Tuple{Hikari.RGBToSpectrumTable, Raycore.StaticMultiTypeSet, Raycore.SetKey, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}" href="#Hikari.get_emission_spectral_uv_dispatch-Tuple{Hikari.RGBToSpectrumTable, Raycore.StaticMultiTypeSet, Raycore.SetKey, Hikari.TextureFilterContext, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.get_emission_spectral_uv_dispatch</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_emission_spectral_uv_dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, materials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, idx, tfc, lambda)</span></span></code></pre></div><p>Type-stable dispatch for getting spectral emission without directional check. Returns SpectralRadiance (zero for non-emissive materials).</p><p>Arguments:</p><ul><li><code>tfc::TextureFilterContext</code>: Contains UV coordinates and screen-space derivatives for texture filtering.</li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-dispatch.jl#L76-L84" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_medium_index-Tuple{Hikari.MediumInterfaceIdx, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.get_medium_index-Tuple{Hikari.MediumInterfaceIdx, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.get_medium_index</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_medium_index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MediumInterfaceIdx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, wi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SetKey</span></span></code></pre></div><p>Determine which medium a ray enters based on direction and surface normal.</p><ul><li><p>If dot(wi, n) &gt; 0: ray going in direction of normal -&gt; outside medium</p></li><li><p>If dot(wi, n) &lt; 0: ray going against normal -&gt; inside medium</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/medium-interface.jl#L92-L98" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_medium_index_for_direction-Tuple{Hikari.MediumInterface, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.get_medium_index_for_direction-Tuple{Hikari.MediumInterface, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.get_medium_index_for_direction</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_medium_index_for_direction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MediumInterface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, wi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SetKey</span></span></code></pre></div><p>Get the medium index a ray enters when crossing a MediumInterface surface.</p><ul><li><p>If dot(wi, n) &gt; 0: ray going in direction of normal -&gt; outside medium</p></li><li><p>If dot(wi, n) &lt; 0: ray going against normal -&gt; inside medium</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-dispatch.jl#L332-L338" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_medium_index_for_direction_dispatch-Tuple{Raycore.StaticMultiTypeSet, Raycore.SetKey, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.get_medium_index_for_direction_dispatch-Tuple{Raycore.StaticMultiTypeSet, Raycore.SetKey, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.get_medium_index_for_direction_dispatch</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_medium_index_for_direction_dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(materials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SetKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, wi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Type-stable dispatch for getting the new medium index after crossing a surface. Returns the SetKey from MediumInterface, or SetKey() (vacuum) for regular materials.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-dispatch.jl#L346-L351" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_medium_preset-Tuple{String}" href="#Hikari.get_medium_preset-Tuple{String}"><span class="jlbinding">Hikari.get_medium_preset</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_medium_preset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NamedTuple{(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:σ_s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:σ_a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Get the scattering properties for a named medium preset. Returns a NamedTuple with σ_s (scattering) and σ_a (absorption) coefficients in mm⁻¹.</p><p>Available presets include:</p><ul><li><p>Milk: &quot;Wholemilk&quot;, &quot;Skimmilk&quot;, &quot;LowfatMilk&quot;, &quot;ReducedMilk&quot;, &quot;RegularMilk&quot;, &quot;Cream&quot;</p></li><li><p>Chocolate milk: &quot;LowfatChocolateMilk&quot;, &quot;RegularChocolateMilk&quot;</p></li><li><p>Soy milk: &quot;LowfatSoyMilk&quot;, &quot;RegularSoyMilk&quot;</p></li><li><p>Coffee: &quot;Espresso&quot;, &quot;MintMochaCoffee&quot;</p></li><li><p>Wine/Beer: &quot;Chardonnay&quot;, &quot;WhiteZinfandel&quot;, &quot;Merlot&quot;, &quot;BudweiserBeer&quot;, &quot;CoorsLightBeer&quot;</p></li><li><p>Juices: &quot;AppleJuice&quot;, &quot;CranberryJuice&quot;, &quot;GrapeJuice&quot;, &quot;RubyGrapefruitJuice&quot;</p></li><li><p>Sodas: &quot;Sprite&quot;, &quot;Coke&quot;, &quot;Pepsi&quot;</p></li><li><p>Foods: &quot;Apple&quot;, &quot;Potato&quot;, &quot;Chicken1&quot;, &quot;Chicken2&quot;, &quot;Ketchup&quot;</p></li><li><p>Skin: &quot;Skin1&quot;, &quot;Skin2&quot;</p></li><li><p>Materials: &quot;Marble&quot;, &quot;Spectralon&quot;, &quot;Shampoo&quot;, &quot;HeadShouldersShampoo&quot;, &quot;Clorox&quot;</p></li><li><p>Powders: &quot;CappuccinoPowder&quot;, &quot;SaltPowder&quot;, &quot;SugarPowder&quot;</p></li><li><p>Water: &quot;PacificOceanSurfaceWater&quot;</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1831-L1850" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_physical_extension-Tuple{Hikari.Film}" href="#Hikari.get_physical_extension-Tuple{Hikari.Film}"><span class="jlbinding">Hikari.get_physical_extension</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Extent of the film in the scene. This is needed for realistic cameras.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/film.jl#L199-L202" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_pixel_index-Tuple{Any, GeometryBasics.Point2}" href="#Hikari.get_pixel_index-Tuple{Any, GeometryBasics.Point2}"><span class="jlbinding">Hikari.get_pixel_index</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Point p is in (x, y) format. Returns CartesianIndex in (row, col) = (y, x) format for Julia array indexing.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/film.jl#L211-L214" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_queue-Union{Tuple{N}, Tuple{Hikari.MultiMaterialQueue{N}, Integer}} where N" href="#Hikari.get_queue-Union{Tuple{N}, Tuple{Hikari.MultiMaterialQueue{N}, Integer}} where N"><span class="jlbinding">Hikari.get_queue</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Get queue for specific material type (1-indexed)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/multi-material-eval.jl#L37" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_sample_bounds-Tuple{Raycore.Bounds2, GeometryBasics.Point}" href="#Hikari.get_sample_bounds-Tuple{Raycore.Bounds2, GeometryBasics.Point}"><span class="jlbinding">Hikari.get_sample_bounds</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Range of integer pixels that the <code>Sampler</code> is responsible for generating samples for.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/film.jl#L186-L189" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_srgb_table-Tuple{}" href="#Hikari.get_srgb_table-Tuple{}"><span class="jlbinding">Hikari.get_srgb_table</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Load the sRGB spectrum table (generates if not cached)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L423" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_surface_alpha_dispatch-Tuple{Raycore.StaticMultiTypeSet, Raycore.SetKey, GeometryBasics.Point{2, Float32}}" href="#Hikari.get_surface_alpha_dispatch-Tuple{Raycore.StaticMultiTypeSet, Raycore.SetKey, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.get_surface_alpha_dispatch</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_surface_alpha_dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(materials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SetKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, uv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Type-stable dispatch for evaluating surface alpha at a UV point. Returns alpha ∈ [0, 1] where 0 = fully transparent, 1 = fully opaque. Used by trace_shadow_transmittance for stochastic alpha pass-through.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-dispatch.jl#L293-L299" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_template_grid-Tuple{Hikari.HomogeneousMedium}" href="#Hikari.get_template_grid-Tuple{Hikari.HomogeneousMedium}"><span class="jlbinding">Hikari.get_template_grid</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_template_grid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(medium) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MajorantGrid</span></span></code></pre></div><p>Extract a template grid from a medium for type consistency in mixed media scenes. HomogeneousMedium returns EmptyMajorantGrid(), GridMedium returns its majorant_grid.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L853-L858" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.get_template_grid_from_tuple-Tuple{M} where M&lt;:Tuple" href="#Hikari.get_template_grid_from_tuple-Tuple{M} where M&lt;:Tuple"><span class="jlbinding">Hikari.get_template_grid_from_tuple</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_template_grid_from_tuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(media</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Tuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MajorantGrid</span></span></code></pre></div><p>Extract a template grid from the first GridMedium or RGBGridMedium in the tuple, or EmptyMajorantGrid() if none. This is used to ensure all majorant iterators have consistent types for GPU compilation.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L940-L945" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.glossy_reflect-Tuple{Any, Any, Any, Raycore.RayDifferentials, Hikari.SurfaceInteraction, Hikari.AbstractScene, Int32}" href="#Hikari.glossy_reflect-Tuple{Any, Any, Any, Raycore.RayDifferentials, Hikari.SurfaceInteraction, Hikari.AbstractScene, Int32}"><span class="jlbinding">Hikari.glossy_reflect</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Glossy reflection for microfacet materials (metals, glossy plastics). Uses sample_f for proper importance sampling of microfacet distribution. The microfacet distribution already handles roughness via its α parameters, so no additional perturbation is needed.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/sampler.jl#L275-L280" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.has_medium_interface-Tuple{Hikari.Material}" href="#Hikari.has_medium_interface-Tuple{Hikari.Material}"><span class="jlbinding">Hikari.has_medium_interface</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">has_medium_interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mat) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Bool</span></span></code></pre></div><p>Check if a material is a MediumInterface (defines medium boundary).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-dispatch.jl#L313-L317" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.has_medium_interface_dispatch-Tuple{Raycore.StaticMultiTypeSet, Raycore.SetKey}" href="#Hikari.has_medium_interface_dispatch-Tuple{Raycore.StaticMultiTypeSet, Raycore.SetKey}"><span class="jlbinding">Hikari.has_medium_interface_dispatch</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">has_medium_interface_dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(materials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SetKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Bool</span></span></code></pre></div><p>Type-stable dispatch for checking if a material defines a medium boundary.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-dispatch.jl#L321-L325" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.henyey_greenstein-Tuple{Float32, Float32}" href="#Hikari.henyey_greenstein-Tuple{Float32, Float32}"><span class="jlbinding">Hikari.henyey_greenstein</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">henyey_greenstein</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cos_theta, g) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Henyey-Greenstein phase function.</p><ul><li><p>g &gt; 0: Forward scattering (clouds typically g ≈ 0.85)</p></li><li><p>g = 0: Isotropic scattering</p></li><li><p>g &lt; 0: Backward scattering</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/volume.jl#L167-L174" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.hg_p-Tuple{Float32, Float32}" href="#Hikari.hg_p-Tuple{Float32, Float32}"><span class="jlbinding">Hikari.hg_p</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">hg_p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g, cos_θ) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Evaluate Henyey-Greenstein phase function. p(cos θ) = (1 - g²) / [4π(1 + g² - 2g cos θ)^(3/2)]</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L22-L27" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.hg_phase_pdf-Tuple{Float32, Float32}" href="#Hikari.hg_phase_pdf-Tuple{Float32, Float32}"><span class="jlbinding">Hikari.hg_phase_pdf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">hg_phase_pdf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g, cos_θ) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Evaluate Henyey-Greenstein phase function PDF.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L874-L878" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.homogeneous_next-Tuple{Hikari.HomogeneousMajorantIterator}" href="#Hikari.homogeneous_next-Tuple{Hikari.HomogeneousMajorantIterator}"><span class="jlbinding">Hikari.homogeneous_next</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">homogeneous_next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(iter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HomogeneousMajorantIterator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (RayMajorantSegment, HomogeneousMajorantIterator, Bool)</span></span></code></pre></div><p>Return the single majorant segment for homogeneous media. Returns (seg, new_iter, true) if valid, (invalid_seg, exhausted_iter, false) if exhausted.</p><p>The Bool indicates validity: true = has segment, false = exhausted.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L145-L152" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.importance-Tuple{Hikari.LightBounds, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.importance-Tuple{Hikari.LightBounds, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.importance</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">importance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LightBounds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute the importance of a light (region) for shading point <code>p</code> with normal <code>n</code>. Pass <code>n = Vec3f(0)</code> for medium scattering (no normal term).</p><p>Following pbrt-v4&#39;s CompactLightBounds::Importance (lightsamplers.h:144-201).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-bounds.jl#L173-L180" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.int32_to_bytes-Tuple{Int32}" href="#Hikari.int32_to_bytes-Tuple{Int32}"><span class="jlbinding">Hikari.int32_to_bytes</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int32_to_bytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NTuple{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,UInt8}</span></span></code></pre></div><p>GPU-compatible conversion of Int32 to bytes.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/stratified.jl#L11-L15" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.intersect_box-Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, GeometryBasics.Point{3, Float32}, GeometryBasics.Point{3, Float32}}" href="#Hikari.intersect_box-Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, GeometryBasics.Point{3, Float32}, GeometryBasics.Point{3, Float32}}"><span class="jlbinding">Hikari.intersect_box</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">intersect_box</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ray_o, ray_d, box_min, box_max) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (hit, t_near, t_far)</span></span></code></pre></div><p>Compute ray intersection with an axis-aligned bounding box.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/volume.jl#L128-L132" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.is_emissive-Tuple{Hikari.Emissive}" href="#Hikari.is_emissive-Tuple{Hikari.Emissive}"><span class="jlbinding">Hikari.is_emissive</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">is_emissive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Material</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Bool</span></span></code></pre></div><p>Check if a material emits light.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/emissive.jl#L96-L100" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.is_emissive-Tuple{Hikari.HomogeneousMedium}" href="#Hikari.is_emissive-Tuple{Hikari.HomogeneousMedium}"><span class="jlbinding">Hikari.is_emissive</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Check if medium has emission</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L778" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.is_emissive-Tuple{Hikari.MediumInterface}" href="#Hikari.is_emissive-Tuple{Hikari.MediumInterface}"><span class="jlbinding">Hikari.is_emissive</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">is_emissive </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MediumInterface </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> forwards to wrapped material.</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3489-L3491" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.is_emissive-Tuple{Raycore.StaticMultiTypeSet, Raycore.SetKey}" href="#Hikari.is_emissive-Tuple{Raycore.StaticMultiTypeSet, Raycore.SetKey}"><span class="jlbinding">Hikari.is_emissive</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">is_emissive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(materials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SetKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Type-stable dispatch for checking if a material/medium is emissive. Returns Bool. Works for both materials and media via element-level dispatch.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-dispatch.jl#L97-L102" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.is_medium_transition-Tuple{Hikari.MediumInterfaceIdx}" href="#Hikari.is_medium_transition-Tuple{Hikari.MediumInterfaceIdx}"><span class="jlbinding">Hikari.is_medium_transition</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Check if this interface represents a medium transition</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/medium-interface.jl#L82" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.is_medium_transition-Tuple{Hikari.MediumInterface}" href="#Hikari.is_medium_transition-Tuple{Hikari.MediumInterface}"><span class="jlbinding">Hikari.is_medium_transition</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Check if this interface represents a medium transition</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/medium-interface.jl#L56" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.is_mix_material-Tuple{Hikari.Material}" href="#Hikari.is_mix_material-Tuple{Hikari.Material}"><span class="jlbinding">Hikari.is_mix_material</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">is_mix_material</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mat) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Bool</span></span></code></pre></div><p>Check if a material is a MixMaterial.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/mix-material.jl#L200-L204" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.is_mix_material_dispatch-Tuple{Raycore.StaticMultiTypeSet, Raycore.SetKey}" href="#Hikari.is_mix_material_dispatch-Tuple{Raycore.StaticMultiTypeSet, Raycore.SetKey}"><span class="jlbinding">Hikari.is_mix_material_dispatch</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">is_mix_material_dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(materials, idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SetKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Bool</span></span></code></pre></div><p>Type-stable dispatch to check if a material is MixMaterial.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/mix-material.jl#L208-L212" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.is_pure_emissive-Tuple{Hikari.Emissive}" href="#Hikari.is_pure_emissive-Tuple{Hikari.Emissive}"><span class="jlbinding">Hikari.is_pure_emissive</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">is_pure_emissive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Material</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Bool</span></span></code></pre></div><p>Check if a material is purely emissive (no BSDF, only emits light).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/emissive.jl#L103-L107" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.is_pure_emissive-Tuple{Raycore.StaticMultiTypeSet, Raycore.SetKey}" href="#Hikari.is_pure_emissive-Tuple{Raycore.StaticMultiTypeSet, Raycore.SetKey}"><span class="jlbinding">Hikari.is_pure_emissive</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">is_pure_emissive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(materials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SetKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Type-stable dispatch for checking if a material is purely emissive (no BSDF). Returns Bool.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-dispatch.jl#L109-L114" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.layer_transmittance-Tuple{Float32, GeometryBasics.Vec{3, Float32}}" href="#Hikari.layer_transmittance-Tuple{Float32, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.layer_transmittance</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Tr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(thickness, w) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Transmittance through a layer of given thickness along direction w. Used in LayeredBxDF random walk.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L831-L836" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.lcg_init-Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32}" href="#Hikari.lcg_init-Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32}"><span class="jlbinding">Hikari.lcg_init</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">lcg_init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ray_o, ray_d, t_max) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UInt64</span></span></code></pre></div><p>Initialize LCG state from ray geometry for deterministic medium sampling. Following pbrt-v4&#39;s RNG initialization: Hash(ray.o, tMax), Hash(ray.d)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/delta-tracking.jl#L22-L27" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.lcg_next-Tuple{UInt64}" href="#Hikari.lcg_next-Tuple{UInt64}"><span class="jlbinding">Hikari.lcg_next</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">lcg_next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (UInt64, Float32)</span></span></code></pre></div><p>Generate next random Float32 in [0,1) and return new state. GPU-compatible LCG.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/delta-tracking.jl#L47-L52" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.le-Tuple{Hikari.EnvironmentLight, Union{Raycore.Ray, Raycore.RayDifferentials}}" href="#Hikari.le-Tuple{Hikari.EnvironmentLight, Union{Raycore.Ray, Raycore.RayDifferentials}}"><span class="jlbinding">Hikari.le</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute emitted radiance for a ray that escapes the scene (hits no geometry). This is called when a camera/path ray doesn&#39;t hit anything.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/environment.jl#L130-L133" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.le-Tuple{Hikari.Light, Union{Raycore.Ray, Raycore.RayDifferentials}}" href="#Hikari.le-Tuple{Hikari.Light, Union{Raycore.Ray, Raycore.RayDifferentials}}"><span class="jlbinding">Hikari.le</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Emmited light if ray hit an area light source. By default light sources have no area.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light.jl#L41-L44" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.left_shift2-Tuple{UInt64}" href="#Hikari.left_shift2-Tuple{UInt64}"><span class="jlbinding">Hikari.left_shift2</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">left_shift2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UInt64</span></span></code></pre></div><p>Spread bits of x for Morton encoding (interleave with zeros).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L37-L41" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.lerp_smits_basis-Tuple{NTuple{10, Float32}, Float32}" href="#Hikari.lerp_smits_basis-Tuple{NTuple{10, Float32}, Float32}"><span class="jlbinding">Hikari.lerp_smits_basis</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">lerp_smits_basis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(basis</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NTuple{10, Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, λ</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Linearly interpolate a Smits basis spectrum at wavelength λ.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L127-L131" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.light_bounds-Tuple{Hikari.Light}" href="#Hikari.light_bounds-Tuple{Hikari.Light}"><span class="jlbinding">Hikari.light_bounds</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">light_bounds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(light) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Union{LightBounds, Nothing}</span></span></code></pre></div><p>Compute LightBounds for a light. Returns <code>nothing</code> for infinite lights.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-bounds.jl#L226-L230" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.linear_srgb_to_xyz-Tuple{GeometryBasics.Vec{3, Float32}}" href="#Hikari.linear_srgb_to_xyz-Tuple{GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.linear_srgb_to_xyz</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">linear_srgb_to_xyz</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rgb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Convert linear sRGB to CIE XYZ color space.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L602-L606" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.linear_to_srgb_gamma-Tuple{Float32}" href="#Hikari.linear_to_srgb_gamma-Tuple{Float32}"><span class="jlbinding">Hikari.linear_to_srgb_gamma</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">linear_to_srgb_gamma</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Apply sRGB gamma curve to a linear RGB value.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L616-L620" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.load_environment_map-Tuple{String}" href="#Hikari.load_environment_map-Tuple{String}"><span class="jlbinding">Hikari.load_environment_map</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Load an environment map from an HDR/EXR file. Converts the image to RGBSpectrum format.</p><p>rotation: Mat3f rotation matrix, or nothing for identity</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/environment_map.jl#L373-L378" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.load_srgb_table_binary-Tuple{String}" href="#Hikari.load_srgb_table_binary-Tuple{String}"><span class="jlbinding">Hikari.load_srgb_table_binary</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Load the sRGB spectrum table from raw binary format</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L402" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.local_to_world-NTuple{4, GeometryBasics.Vec{3, Float32}}" href="#Hikari.local_to_world-NTuple{4, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.local_to_world</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">local_to_world</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(local_dir, n, tangent, bitangent) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Transform direction from local (shading) space to world space.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3526-L3530" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.lookup_uv-Union{Tuple{D}, Tuple{T}, Tuple{S}, Tuple{Hikari.EnvironmentMap{S, T, D}, GeometryBasics.Point{2, Float32}, Any}} where {S&lt;:Hikari.Spectrum, T, D}" href="#Hikari.lookup_uv-Union{Tuple{D}, Tuple{T}, Tuple{S}, Tuple{Hikari.EnvironmentMap{S, T, D}, GeometryBasics.Point{2, Float32}, Any}} where {S&lt;:Hikari.Spectrum, T, D}"><span class="jlbinding">Hikari.lookup_uv</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">lookup_uv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(env</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">EnvironmentMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, uv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, textures) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Spectrum</span></span></code></pre></div><p>Look up environment map directly by UV coordinates. This is the equivalent of pbrt-v4&#39;s ImageLe(uv, lambda) for ImageInfiniteLight. Used when UV is already known (e.g., from importance sampling the distribution).</p><p>The <code>textures</code> parameter is used to deref TextureRef fields when EnvironmentMap is stored in a MultiTypeSet.</p><p>IMPORTANT: Uses nearest-neighbor lookup to match the discrete PDF from importance sampling. Bilinear interpolation would cause bias because the PDF is computed for discrete pixels, not interpolated values. This matches pbrt-v4&#39;s LookupNearestChannel in ImageLe.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/environment_map.jl#L345-L357" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.luminance-Tuple{ColorTypes.RGB}" href="#Hikari.luminance-Tuple{ColorTypes.RGB}"><span class="jlbinding">Hikari.luminance</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">luminance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rgb) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute luminance from RGB using standard coefficients (Rec. 709).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-sampler.jl#L439-L443" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.max_extinction-Tuple{Hikari.CloudVolume}" href="#Hikari.max_extinction-Tuple{Hikari.CloudVolume}"><span class="jlbinding">Hikari.max_extinction</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Get the maximum extinction coefficient in the volume</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/volume.jl#L53" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.max_value-Tuple{Hikari.RGBIlluminantSpectrum}" href="#Hikari.max_value-Tuple{Hikari.RGBIlluminantSpectrum}"><span class="jlbinding">Hikari.max_value</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">max_value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBIlluminantSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Maximum value of the spectrum, matching pbrt-v4&#39;s RGBIlluminantSpectrum::MaxValue(): scale * rsp.MaxValue() * illuminant-&gt;MaxValue()</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L355-L360" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.max_value-Tuple{Hikari.RGBSigmoidPolynomial}" href="#Hikari.max_value-Tuple{Hikari.RGBSigmoidPolynomial}"><span class="jlbinding">Hikari.max_value</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Maximum value of the spectrum (for normalization)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L38" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.medium_direct_lighting_inner!-Tuple{Any, Hikari.VPMediumScatterWorkItem, Any, Any, Any, Any, Int32, Int32, Int32, Any, Any}" href="#Hikari.medium_direct_lighting_inner!-Tuple{Any, Hikari.VPMediumScatterWorkItem, Any, Any, Any, Any, Int32, Int32, Int32, Any, Any}"><span class="jlbinding">Hikari.medium_direct_lighting_inner!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Inner function for medium direct lighting - can use return statements.</p><p>Uses power-weighted light sampling via alias table for better importance sampling in scenes with lights of varying intensities (pbrt-v4&#39;s PowerLightSampler approach).</p><p>Now uses pre-computed Sobol samples from pixel_samples (pbrt-v4 RaySamples style).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/medium-scatter.jl#L8-L15" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.medium_scatter_inner!-Tuple{Any, Hikari.VPMediumScatterWorkItem, Int32, Any}" href="#Hikari.medium_scatter_inner!-Tuple{Any, Hikari.VPMediumScatterWorkItem, Int32, Any}"><span class="jlbinding">Hikari.medium_scatter_inner!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Inner function for medium scatter - can use return statements.</p><p>Now uses pre-computed Sobol samples from pixel_samples (pbrt-v4 RaySamples style).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/medium-scatter.jl#L144-L148" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.mis_weight_spectral-Tuple{Float32, Float32}" href="#Hikari.mis_weight_spectral-Tuple{Float32, Float32}"><span class="jlbinding">Hikari.mis_weight_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">mis_weight_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pdf_f</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, pdf_g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute MIS weight using power heuristic (beta=2). Returns weight for strategy f: w_f = pdf_f^2 / (pdf_f^2 + pdf_g^2)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L473-L478" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.mix_bits-Tuple{UInt64}" href="#Hikari.mix_bits-Tuple{UInt64}"><span class="jlbinding">Hikari.mix_bits</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">mix_bits</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UInt64</span></span></code></pre></div><p>Bit mixing function from pbrt-v4&#39;s hash.h. Reference: <a href="http://zimbry.blogspot.ch/2011/09/better-bit-mixing-improving-on.html" target="_blank" rel="noreferrer">http://zimbry.blogspot.ch/2011/09/better-bit-mixing-improving-on.html</a></p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L635-L640" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.mix_hash_float-Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Raycore.SetKey, Raycore.SetKey}" href="#Hikari.mix_hash_float-Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Raycore.SetKey, Raycore.SetKey}"><span class="jlbinding">Hikari.mix_hash_float</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">mix_hash_float</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, wo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, idx1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SetKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, idx2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SetKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Generate a deterministic pseudo-random float in [0, 1) for material selection. Uses a simple but effective hash function based on pbrt-v4&#39;s HashFloat.</p><p>The hash is deterministic: same position, direction, and materials always produce the same result, ensuring consistent rendering across samples.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/mix-material.jl#L107-L115" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.murmur_hash_64a-Union{Tuple{NTuple{N, UInt8}}, Tuple{N}, Tuple{NTuple{N, UInt8}, UInt64}} where N" href="#Hikari.murmur_hash_64a-Union{Tuple{NTuple{N, UInt8}}, Tuple{N}, Tuple{NTuple{N, UInt8}, UInt64}} where N"><span class="jlbinding">Hikari.murmur_hash_64a</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">murmur_hash_64a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NTuple{N,UInt8}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, seed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UInt64</span></span></code></pre></div><p>MurmurHash2 64-bit hash function, exactly matching pbrt-v4&#39;s MurmurHash64A. Reference: <a href="https://github.com/explosion/murmurhash/blob/master/murmurhash/MurmurHash2.cpp" target="_blank" rel="noreferrer">https://github.com/explosion/murmurhash/blob/master/murmurhash/MurmurHash2.cpp</a></p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L569-L574" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.nanovdb_get_value-Tuple{Hikari.NanoVDBMedium, Any, Tuple{Int32, Int32, Int32}}" href="#Hikari.nanovdb_get_value-Tuple{Hikari.NanoVDBMedium, Any, Tuple{Int32, Int32, Int32}}"><span class="jlbinding">Hikari.nanovdb_get_value</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nanovdb_get_value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(medium</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NanoVDBMedium</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, media, ijk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NTuple{3, Int32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Get the voxel value at integer index coordinates using full tree traversal. Matches pbrt-v4/NanoVDB&#39;s Tree::getValue exactly.</p><p>The <code>media</code> parameter is used to deref TextureRef fields when NanoVDBMedium is stored in a MultiTypeSet.</p><p>Uses pointer(buffer) with as_pointer for type conversion - works on both CPU and GPU.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/nanovdb.jl#L305-L314" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.next_ray_queue-Tuple{Hikari.VolPathState}" href="#Hikari.next_ray_queue-Tuple{Hikari.VolPathState}"><span class="jlbinding">Hikari.next_ray_queue</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Get the next ray queue (the one not currently active).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath-state.jl#L192" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.node_importance-Tuple{Hikari.LightBVHNode, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.node_importance-Tuple{Hikari.LightBVHNode, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.node_importance</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">node_importance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(node</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LightBVHNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute importance of a BVH node at shading point <code>p</code> with normal <code>n</code>. Operates directly on unquantized node fields.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/bvh-light-sampler.jl#L52-L57" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.parse_nanovdb_buffer-Tuple{String}" href="#Hikari.parse_nanovdb_buffer-Tuple{String}"><span class="jlbinding">Hikari.parse_nanovdb_buffer</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">parse_nanovdb_buffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filepath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (buffer, metadata)</span></span></code></pre></div><p>Parse a NanoVDB file and return the decompressed buffer along with metadata. Returns raw buffer suitable for GPU upload.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/nanovdb.jl#L1079-L1084" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pbrt_hash-Tuple{Float32}" href="#Hikari.pbrt_hash-Tuple{Float32}"><span class="jlbinding">Hikari.pbrt_hash</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pbrt_hash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(args</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UInt64</span></span></code></pre></div><p>Hash function matching pbrt-v4&#39;s variadic Hash() template. Packs arguments into a byte buffer and applies MurmurHash64A. Uses GPU-compatible bit manipulation instead of reinterpret.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L683-L689" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pcg32_init-Tuple{UInt64, UInt64}" href="#Hikari.pcg32_init-Tuple{UInt64, UInt64}"><span class="jlbinding">Hikari.pcg32_init</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pcg32_init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(seq_index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, seed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PCG32State</span></span></code></pre></div><p>Initialize PCG32 with sequence index and seed, matching pbrt-v4&#39;s SetSequence. Returns initialized state.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L760-L765" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pcg32_uniform_f32-Tuple{Hikari.PCG32State}" href="#Hikari.pcg32_uniform_f32-Tuple{Hikari.PCG32State}"><span class="jlbinding">Hikari.pcg32_uniform_f32</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pcg32_uniform_f32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rng</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PCG32State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Float32, PCG32State)</span></span></code></pre></div><p>Generate uniform random Float32 in [0, 1) and return new state. Matching pbrt-v4&#39;s Uniform&lt;float&gt;().</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L804-L809" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pcg32_uniform_u32-Tuple{Hikari.PCG32State}" href="#Hikari.pcg32_uniform_u32-Tuple{Hikari.PCG32State}"><span class="jlbinding">Hikari.pcg32_uniform_u32</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pcg32_uniform_u32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rng</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PCG32State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (UInt32, PCG32State)</span></span></code></pre></div><p>Generate uniform random UInt32 and return new state. Matching pbrt-v4&#39;s Uniform&lt;uint32_t&gt;().</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L786-L791" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pdf-Tuple{Hikari.Distribution1D, Float32}" href="#Hikari.pdf-Tuple{Hikari.Distribution1D, Float32}"><span class="jlbinding">Hikari.pdf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute PDF for sampling a specific value from Distribution1D.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sampling.jl#L154-L156" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pdf-Tuple{Hikari.Distribution2D, GeometryBasics.Point{2, Float32}, Any}" href="#Hikari.pdf-Tuple{Hikari.Distribution2D, GeometryBasics.Point{2, Float32}, Any}"><span class="jlbinding">Hikari.pdf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute PDF for sampling a specific 2D point from flat distribution. The <code>textures</code> parameter is used to deref TextureRef fields when Distribution2D is stored in a MultiTypeSet.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sampling.jl#L347-L350" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pdf_dielectric_interface" href="#Hikari.pdf_dielectric_interface"><span class="jlbinding">Hikari.pdf_dielectric_interface</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pdf_dielectric_interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(wo, wi, alpha_x, alpha_y, eta, refl_trans_flags) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute PDF of dielectric interface sampling.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L1488-L1492" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pdf_diffuse_interface-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.pdf_diffuse_interface-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.pdf_diffuse_interface</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pdf_diffuse_interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(wo, wi) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute PDF of diffuse sampling.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L1189-L1193" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pdf_fresnel_microfacet-Tuple{Hikari.UberBxDF, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.pdf_fresnel_microfacet-Tuple{Hikari.UberBxDF, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.pdf_fresnel_microfacet</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute PDF for FresnelMicrofacet given a direction pair.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/microfacet.jl#L452-L454" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pdf_is_nonzero-Tuple{Hikari.SampledWavelengths{4}, Int64}" href="#Hikari.pdf_is_nonzero-Tuple{Hikari.SampledWavelengths{4}, Int64}"><span class="jlbinding">Hikari.pdf_is_nonzero</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pdf_is_nonzero</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Bool</span></span></code></pre></div><p>Check if wavelength i has non-zero PDF (should contribute).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/spectral.jl#L264-L268" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pdf_layered_bsdf-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Float32, Float32, Int64, Int64, Hikari.SampledSpectrum{4}, Bool, Float32, Float32}" href="#Hikari.pdf_layered_bsdf-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Float32, Float32, Int64, Int64, Hikari.SampledSpectrum{4}, Bool, Float32, Float32}"><span class="jlbinding">Hikari.pdf_layered_bsdf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pdf_layered_bsdf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute PDF for LayeredBxDF using Monte Carlo estimation. This is a simplified version of pbrt-v4&#39;s LayeredBxDF::PDF.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L1842-L1847" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pdf_li-Tuple{Hikari.EnvironmentLight, Hikari.Interaction, GeometryBasics.Vec{3, Float32}}" href="#Hikari.pdf_li-Tuple{Hikari.EnvironmentLight, Hikari.Interaction, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.pdf_li</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>PDF for sampling a particular direction from the environment light. Returns the probability density for importance sampling this direction.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/environment.jl#L139-L142" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pdf_li_spectral-Tuple{Any, Hikari.EnvironmentLight, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.pdf_li_spectral-Tuple{Any, Hikari.EnvironmentLight, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.pdf_li_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pdf_li_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lights, light</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">EnvironmentLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, wi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>PDF for sampling direction wi from environment light.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L331-L335" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pdf_li_spectral-Tuple{Hikari.DirectionalLight, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.pdf_li_spectral-Tuple{Hikari.DirectionalLight, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.pdf_li_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pdf_li_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(light</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DirectionalLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, wi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>PDF for sampling direction wi from directional light (always delta).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L310-L314" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pdf_li_spectral-Tuple{Hikari.PointLight, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.pdf_li_spectral-Tuple{Hikari.PointLight, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.pdf_li_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pdf_li_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(light</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PointLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, wi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>PDF for sampling direction wi from point light (always delta).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L303-L307" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pdf_li_spectral-Tuple{Hikari.SpotLight, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.pdf_li_spectral-Tuple{Hikari.SpotLight, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.pdf_li_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pdf_li_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(light</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SpotLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, wi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>PDF for sampling direction wi from spotlight (always delta).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L324-L328" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pdf_li_spectral-Tuple{Hikari.SunLight, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.pdf_li_spectral-Tuple{Hikari.SunLight, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.pdf_li_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pdf_li_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(light</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SunLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, wi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>PDF for sampling direction wi from sun light (always delta).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L317-L321" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.perlin3d-Tuple{Any, Any, Any}" href="#Hikari.perlin3d-Tuple{Any, Any, Any}"><span class="jlbinding">Hikari.perlin3d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">perlin3d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x, y, z) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float64</span></span></code></pre></div><p>Classic 3D Perlin noise. Returns values in approximately [-1, 1].</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/random.jl#L32-L36" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pixel_coords_from_index-Tuple{Int32, Int32}" href="#Hikari.pixel_coords_from_index-Tuple{Int32, Int32}"><span class="jlbinding">Hikari.pixel_coords_from_index</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pixel_coords_from_index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, width</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Convert linear pixel index to x,y coordinates (1-based).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/camera.jl#L131-L135" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pixel_index_from_coords-Tuple{Int32, Int32, Int32}" href="#Hikari.pixel_index_from_coords-Tuple{Int32, Int32, Int32}"><span class="jlbinding">Hikari.pixel_index_from_coords</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pixel_index_from_coords</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, width</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Int32</span></span></code></pre></div><p>Convert x,y coordinates to linear pixel index (1-based).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/camera.jl#L143-L147" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pixel_offset_2d-Tuple{Int32, Int32, Int32}" href="#Hikari.pixel_offset_2d-Tuple{Int32, Int32, Int32}"><span class="jlbinding">Hikari.pixel_offset_2d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pixel_offset_2d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, py</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Tuple{Float32, Float32}</span></span></code></pre></div><p>Compute a deterministic 2D offset for Cranley-Patterson rotation based on pixel coordinates.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/stratified.jl#L142-L146" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.planckian_xy-Tuple{Float32}" href="#Hikari.planckian_xy-Tuple{Float32}"><span class="jlbinding">Hikari.planckian_xy</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">planckian_xy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(T</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (x, y)</span></span></code></pre></div><p>Compute CIE xy chromaticity coordinates for a Planckian (blackbody) radiator at temperature T in Kelvin. Valid for 1667K to 25000K.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L463-L468" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pmf-Tuple{Hikari.AliasTable, Int32}" href="#Hikari.pmf-Tuple{Hikari.AliasTable, Int32}"><span class="jlbinding">Hikari.pmf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pmf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AliasTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Get the PMF for index <code>idx</code> (1-based).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-sampler.jl#L155-L159" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pmf-Tuple{Hikari.PowerLightSampler, Int32}" href="#Hikari.pmf-Tuple{Hikari.PowerLightSampler, Int32}"><span class="jlbinding">Hikari.pmf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pmf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sampler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PowerLightSampler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, light_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Get PMF for a specific light index.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-sampler.jl#L356-L360" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pmf-Tuple{Hikari.UniformLightSampler, Int32}" href="#Hikari.pmf-Tuple{Hikari.UniformLightSampler, Int32}"><span class="jlbinding">Hikari.pmf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pmf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sampler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UniformLightSampler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, light_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>PMF for any light is 1/N.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-sampler.jl#L208-L212" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.postprocess!-Tuple{Hikari.Film}" href="#Hikari.postprocess!-Tuple{Hikari.Film}"><span class="jlbinding">Hikari.postprocess!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">postprocess!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(film</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Film</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; exposure</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tonemap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:aces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, gamma</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.2f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, white_point</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4.0f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sensor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Apply postprocessing to film.framebuffer and write result to film.postprocess.</p><p>This function is non-destructive: the original framebuffer is preserved, allowing you to call postprocess! multiple times with different parameters.</p><p>Works on both CPU and GPU arrays via KernelAbstractions.</p><p><strong>Arguments</strong></p><ul><li><p><code>film</code>: The Film containing rendered data</p></li><li><p><code>exposure</code>: Exposure multiplier applied before tonemapping (default: 1.0)</p></li><li><p><code>tonemap</code>: Tonemapping method (default: :aces)</p><ul><li><p><code>:reinhard</code> - Simple Reinhard L/(1+L)</p></li><li><p><code>:reinhard_extended</code> - Extended Reinhard with white point</p></li><li><p><code>:aces</code> - ACES filmic (industry standard)</p></li><li><p><code>:uncharted2</code> - Uncharted 2 filmic</p></li><li><p><code>:filmic</code> - Hejl-Dawson filmic</p></li><li><p><code>nothing</code> - No tonemapping (linear clamp)</p></li></ul></li><li><p><code>gamma</code>: Gamma correction value (default: 2.2, use <code>nothing</code> to skip)</p></li><li><p><code>white_point</code>: White point for extended Reinhard (default: 4.0)</p></li><li><p><code>sensor</code>: FilmSensor for pbrt-style sensor simulation (ISO, white balance)</p></li><li><p><code>background</code>: When set to an <code>RGB{Float32}</code>, pixels where <code>film.depth</code> is <code>Inf</code> (escaped rays) are replaced with this color instead of being tonemapped. Useful for compositing.</p></li></ul><p><strong>Example</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Render once</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">integrator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(scene, film, camera)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">to_framebuffer!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(film)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Try different postprocessing settings</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">postprocess!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(film; exposure</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tonemap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:aces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">display</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(film</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">postprocess)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># With pbrt-style sensor (bunny-cloud scene settings)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sensor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> FilmSensor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(iso</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">90</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, white_balance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">postprocess!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(film; sensor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sensor, tonemap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:aces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">display</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(film</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">postprocess)</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/postprocess.jl#L251-L292" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.power-Tuple{Hikari.PointLight}" href="#Hikari.power-Tuple{Hikari.PointLight}"><span class="jlbinding">Hikari.power</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Total power emitted by the light source over the entire sphere of directions.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/point.jl#L121-L123" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.power-Tuple{Hikari.SpotLight}" href="#Hikari.power-Tuple{Hikari.SpotLight}"><span class="jlbinding">Hikari.power</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Total power emitted by the spotlight.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/spot.jl#L145-L147" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.power-Union{Tuple{S}, Tuple{Hikari.DirectionalLight{S}, Hikari.AbstractScene}} where S&lt;:Hikari.Spectrum" href="#Hikari.power-Union{Tuple{S}, Tuple{Hikari.DirectionalLight{S}, Hikari.AbstractScene}} where S&lt;:Hikari.Spectrum"><span class="jlbinding">Hikari.power</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>The total power emitted by the directional light is related to the spatial extent of the scene and equals the amount of power arriving at the inscribed by bounding sphere disk: <code>scale * I * π * r^2</code>.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/directional.jl#L88-L92" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.power-Union{Tuple{S}, Tuple{Hikari.EnvironmentLight{S, E} where E&lt;:Hikari.EnvironmentMap{S, T} where T&lt;:AbstractMatrix{S}, Hikari.Scene}} where S&lt;:Hikari.Spectrum" href="#Hikari.power-Union{Tuple{S}, Tuple{Hikari.EnvironmentLight{S, E} where E&lt;:Hikari.EnvironmentMap{S, T} where T&lt;:AbstractMatrix{S}, Hikari.Scene}} where S&lt;:Hikari.Spectrum"><span class="jlbinding">Hikari.power</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Total power emitted by the environment light. For an environment light, this is approximated as the average radiance times the surface area of the bounding sphere.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/environment.jl#L155-L159" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.power_heuristic" href="#Hikari.power_heuristic"><span class="jlbinding">Hikari.power_heuristic</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">power_heuristic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pdf_f</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, pdf_g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, beta</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Power heuristic for MIS: w_f = pdf_f^beta / (pdf_f^beta + pdf_g^beta) Default beta=2 (squared terms).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/workitems.jl#L258-L263" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.power_heuristic-Tuple{Int64, Float32, Int64, Float32}" href="#Hikari.power_heuristic-Tuple{Int64, Float32, Int64, Float32}"><span class="jlbinding">Hikari.power_heuristic</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">power_heuristic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nf, fPdf, ng, gPdf) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Balance heuristic for MIS with power=2.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L1201-L1205" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_accumulate_sample_to_rgb!-Tuple{Any, AbstractVector{Float32}, AbstractVector{Float32}, AbstractVector{Float32}, AbstractVector{Float32}, Hikari.CIEXYZTable, Int32}" href="#Hikari.pw_accumulate_sample_to_rgb!-Tuple{Any, AbstractVector{Float32}, AbstractVector{Float32}, AbstractVector{Float32}, AbstractVector{Float32}, Hikari.CIEXYZTable, Int32}"><span class="jlbinding">Hikari.pw_accumulate_sample_to_rgb!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_accumulate_sample_to_rgb!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, pixel_rgb, pixel_L, wavelengths_per_pixel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                              pdf_per_pixel, cie_table, num_pixels)</span></span></code></pre></div><p>High-level wrapper to accumulate spectral sample to RGB buffer.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L68-L73" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_accumulate_sample_to_rgb_kernel!-Tuple{Any}" href="#Hikari.pw_accumulate_sample_to_rgb_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_accumulate_sample_to_rgb_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_accumulate_sample_to_rgb_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pixel_rgb, pixel_L, wavelengths_per_pixel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                     pdf_per_pixel, cie_x, cie_y, cie_z, num_pixels)</span></span></code></pre></div><p>Convert this sample&#39;s spectral radiance to RGB using PER-PIXEL wavelengths and accumulate into pixel_rgb buffer.</p><p>This is the key operation that pbrt-v4 does: spectral-to-RGB conversion happens IMMEDIATELY after each sample, using THAT PIXEL&#39;s wavelengths. The RGB values are then accumulated across samples.</p><p>Each pixel has independently sampled wavelengths, which decorrelates color noise and results in much faster convergence than using shared wavelengths.</p><p>Arguments:</p><ul><li><p><code>pixel_rgb</code>: RGB accumulation buffer (3 × num_pixels, interleaved R,G,B)</p></li><li><p><code>pixel_L</code>: Spectral radiance for this sample (4 × num_pixels, interleaved)</p></li><li><p><code>wavelengths_per_pixel</code>: Wavelengths for each pixel (4 × num_pixels)</p></li><li><p><code>pdf_per_pixel</code>: PDF for each wavelength sample (4 × num_pixels)</p></li><li><p><code>cie_x</code>, <code>cie_y</code>, <code>cie_z</code>: CIE XYZ color matching function arrays</p></li><li><p><code>num_pixels</code>: Total number of pixels</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L14-L35" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_accumulate_samples!-Tuple{Any, AbstractVector{Float32}, AbstractVector{Float32}, Int32}" href="#Hikari.pw_accumulate_samples!-Tuple{Any, AbstractVector{Float32}, AbstractVector{Float32}, Int32}"><span class="jlbinding">Hikari.pw_accumulate_samples!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_accumulate_samples!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, pixel_L_accum, pixel_L_sample, num_pixels)</span></span></code></pre></div><p>Add new sample results to accumulated film values.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L387-L391" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_accumulate_to_film_kernel!-Tuple{Any}" href="#Hikari.pw_accumulate_to_film_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_accumulate_to_film_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_accumulate_to_film_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pixel_L_accum, pixel_L_sample, num_pixels)</span></span></code></pre></div><p>Accumulate sample results into the film accumulator. Adds new sample&#39;s spectral values to existing accumulated values.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L273-L278" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_apply_exposure!-Tuple{Any, Hikari.Film, Float32}" href="#Hikari.pw_apply_exposure!-Tuple{Any, Hikari.Film, Float32}"><span class="jlbinding">Hikari.pw_apply_exposure!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_apply_exposure!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, film</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Film</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, exposure</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Apply exposure adjustment to film framebuffer.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L553-L557" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_apply_exposure_kernel!-Tuple{Any}" href="#Hikari.pw_apply_exposure_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_apply_exposure_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_apply_exposure_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(framebuffer, exposure)</span></span></code></pre></div><p>Apply exposure adjustment to framebuffer (in-place).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L533-L537" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_apply_srgb_gamma!-Tuple{Any, Hikari.Film}" href="#Hikari.pw_apply_srgb_gamma!-Tuple{Any, Hikari.Film}"><span class="jlbinding">Hikari.pw_apply_srgb_gamma!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_apply_srgb_gamma!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, film</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Film</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Apply sRGB gamma to framebuffer and store in postprocess buffer.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L589-L593" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_apply_srgb_gamma_kernel!-Tuple{Any}" href="#Hikari.pw_apply_srgb_gamma_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_apply_srgb_gamma_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_apply_srgb_gamma_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(output, input)</span></span></code></pre></div><p>Apply sRGB gamma curve to convert from linear to display sRGB.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L569-L573" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_clear_film!-Tuple{Any, AbstractVector{Float32}, Int32}" href="#Hikari.pw_clear_film!-Tuple{Any, AbstractVector{Float32}, Int32}"><span class="jlbinding">Hikari.pw_clear_film!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_clear_film!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, pixel_L, num_pixels)</span></span></code></pre></div><p>Clear film accumulator to zero for a new render.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L410-L414" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_clear_film_kernel!-Tuple{Any}" href="#Hikari.pw_clear_film_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_clear_film_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_clear_film_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pixel_L, num_pixels)</span></span></code></pre></div><p>Clear accumulated spectral radiance to zero for new render.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L295-L299" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_evaluate_materials!" href="#Hikari.pw_evaluate_materials!"><span class="jlbinding">Hikari.pw_evaluate_materials!</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_evaluate_materials!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, next_ray_queue, pixel_L, material_queue, materials, rgb2spec_table, max_depth, regularize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Evaluate materials and spawn continuation rays.</p><p>When <code>regularize=true</code>, near-specular BSDFs are roughened after the first non-specular bounce to reduce fireflies (matches pbrt-v4&#39;s BSDF::Regularize).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-eval.jl#L202-L209" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_evaluate_materials_kernel!-Tuple{Any}" href="#Hikari.pw_evaluate_materials_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_evaluate_materials_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_evaluate_materials_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(next_ray_queue, pixel_L, material_queue, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Evaluate materials for all work items:</p><ol><li><p>Sample BSDF for indirect lighting direction</p></li><li><p>Apply Russian roulette for path termination</p></li><li><p>Create continuation ray if path should continue</p></li></ol><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-eval.jl#L87-L94" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_finalize_film!-Tuple{Any, Hikari.Film, AbstractVector{Float32}, Int32}" href="#Hikari.pw_finalize_film!-Tuple{Any, Hikari.Film, AbstractVector{Float32}, Int32}"><span class="jlbinding">Hikari.pw_finalize_film!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_finalize_film!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, film, pixel_rgb, samples_per_pixel)</span></span></code></pre></div><p>Copy accumulated RGB values to film framebuffer, dividing by sample count.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L134-L138" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_finalize_film_kernel!-Tuple{Any}" href="#Hikari.pw_finalize_film_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_finalize_film_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_finalize_film_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(framebuffer, pixel_rgb, inv_samples, width, height)</span></span></code></pre></div><p>Copy accumulated RGB values to film framebuffer, dividing by sample count.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L103-L107" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_generate_camera_rays!-Tuple{Any, Hikari.WorkQueue{Hikari.PWRayWorkItem, V} where V&lt;:AbstractVector{Hikari.PWRayWorkItem}, AbstractVector{Float32}, AbstractVector{Float32}, Int32, Int32, Any, Int32, UInt32}" href="#Hikari.pw_generate_camera_rays!-Tuple{Any, Hikari.WorkQueue{Hikari.PWRayWorkItem, V} where V&lt;:AbstractVector{Hikari.PWRayWorkItem}, AbstractVector{Float32}, AbstractVector{Float32}, Int32, Int32, Any, Int32, UInt32}"><span class="jlbinding">Hikari.pw_generate_camera_rays!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_generate_camera_rays!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, ray_queue, wavelengths_per_pixel, pdf_per_pixel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                          width, height, camera, sample_idx, rng_base)</span></span></code></pre></div><p>Generate camera rays with per-pixel wavelength sampling (pbrt-v4 style). Each pixel samples its own wavelengths, which are stored for later film accumulation.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/camera.jl#L89-L95" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_generate_camera_rays_kernel!-Tuple{Any}" href="#Hikari.pw_generate_camera_rays_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_generate_camera_rays_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_generate_camera_rays_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ray_queue, wavelengths_per_pixel, pdf_per_pixel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                 width, height, camera, sample_idx, rng_base)</span></span></code></pre></div><p>Generate camera rays for all pixels with PER-PIXEL wavelength sampling. Each thread generates one camera ray with independently sampled wavelengths.</p><p>This matches pbrt-v4&#39;s approach where each pixel samples its own wavelengths, which decorrelates color noise across pixels for faster convergence.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/camera.jl#L12-L21" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_handle_escaped_rays!-Tuple{Any, AbstractVector{Float32}, Hikari.WorkQueue{Hikari.PWEscapedRayWorkItem, V} where V&lt;:AbstractVector{Hikari.PWEscapedRayWorkItem}, Any, Hikari.RGBToSpectrumTable}" href="#Hikari.pw_handle_escaped_rays!-Tuple{Any, AbstractVector{Float32}, Hikari.WorkQueue{Hikari.PWEscapedRayWorkItem, V} where V&lt;:AbstractVector{Hikari.PWEscapedRayWorkItem}, Any, Hikari.RGBToSpectrumTable}"><span class="jlbinding">Hikari.pw_handle_escaped_rays!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_handle_escaped_rays!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, pixel_L, escaped_queue, lights, rgb2spec_table)</span></span></code></pre></div><p>Evaluate environment lights for escaped rays.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/intersection.jl#L474-L478" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_handle_escaped_rays_kernel!-Tuple{Any}" href="#Hikari.pw_handle_escaped_rays_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_handle_escaped_rays_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_handle_escaped_rays_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pixel_L, escaped_queue, lights, rgb2spec_table, max_queued)</span></span></code></pre></div><p>Handle rays that escaped the scene by evaluating environment lights.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/intersection.jl#L284-L288" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_handle_hit_area_lights!-Tuple{Any, AbstractVector{Float32}, Hikari.WorkQueue{Hikari.PWHitAreaLightWorkItem, V} where V&lt;:AbstractVector{Hikari.PWHitAreaLightWorkItem}, Any, Any}" href="#Hikari.pw_handle_hit_area_lights!-Tuple{Any, AbstractVector{Float32}, Hikari.WorkQueue{Hikari.PWHitAreaLightWorkItem, V} where V&lt;:AbstractVector{Hikari.PWHitAreaLightWorkItem}, Any, Any}"><span class="jlbinding">Hikari.pw_handle_hit_area_lights!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_handle_hit_area_lights!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, pixel_L, hit_light_queue, rgb2spec_table, materials)</span></span></code></pre></div><p>Evaluate emission for rays that hit area lights.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/intersection.jl#L501-L505" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_handle_hit_area_lights_kernel!-Tuple{Any}" href="#Hikari.pw_handle_hit_area_lights_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_handle_hit_area_lights_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_handle_hit_area_lights_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pixel_L, hit_light_queue, rgb2spec_table, materials, max_queued)</span></span></code></pre></div><p>Handle rays that hit emissive surfaces.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/intersection.jl#L364-L368" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_populate_aux_buffers!-Tuple{Any, AbstractVector{Float32}, AbstractVector{Float32}, AbstractVector{Float32}, Hikari.WorkQueue{Hikari.PWMaterialEvalWorkItem, V} where V&lt;:AbstractVector{Hikari.PWMaterialEvalWorkItem}, Any, Hikari.RGBToSpectrumTable}" href="#Hikari.pw_populate_aux_buffers!-Tuple{Any, AbstractVector{Float32}, AbstractVector{Float32}, AbstractVector{Float32}, Hikari.WorkQueue{Hikari.PWMaterialEvalWorkItem, V} where V&lt;:AbstractVector{Hikari.PWMaterialEvalWorkItem}, Any, Hikari.RGBToSpectrumTable}"><span class="jlbinding">Hikari.pw_populate_aux_buffers!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_populate_aux_buffers!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, aux_albedo, aux_normal, aux_depth,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                          material_queue, materials, rgb2spec_table)</span></span></code></pre></div><p>Populate auxiliary buffers for denoising.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-eval.jl#L296-L301" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_populate_aux_buffers_kernel!-Tuple{Any}" href="#Hikari.pw_populate_aux_buffers_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_populate_aux_buffers_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_populate_aux_buffers_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aux_albedo, aux_normal, aux_depth, material_queue, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Populate auxiliary buffers for denoising on first bounce. Only processes depth=0 items (primary ray hits).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-eval.jl#L242-L247" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_sample_direct_lighting!-Tuple{Any, Hikari.WorkQueue{Hikari.PWShadowRayWorkItem, V} where V&lt;:AbstractVector{Hikari.PWShadowRayWorkItem}, Hikari.WorkQueue{Hikari.PWMaterialEvalWorkItem, V} where V&lt;:AbstractVector{Hikari.PWMaterialEvalWorkItem}, Any, Any, Hikari.RGBToSpectrumTable}" href="#Hikari.pw_sample_direct_lighting!-Tuple{Any, Hikari.WorkQueue{Hikari.PWShadowRayWorkItem, V} where V&lt;:AbstractVector{Hikari.PWShadowRayWorkItem}, Hikari.WorkQueue{Hikari.PWMaterialEvalWorkItem, V} where V&lt;:AbstractVector{Hikari.PWMaterialEvalWorkItem}, Any, Any, Hikari.RGBToSpectrumTable}"><span class="jlbinding">Hikari.pw_sample_direct_lighting!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_sample_direct_lighting!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, shadow_queue, material_queue, materials, lights, rgb2spec_table)</span></span></code></pre></div><p>Sample direct lighting for all material work items.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-eval.jl#L165-L169" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_sample_direct_lighting_kernel!-Tuple{Any}" href="#Hikari.pw_sample_direct_lighting_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_sample_direct_lighting_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_sample_direct_lighting_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(shadow_queue, material_queue, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Sample direct lighting for all material evaluation work items. For each item, selects a light, samples a direction, evaluates BSDF, and creates a shadow ray work item.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-eval.jl#L11-L17" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_trace_rays!-Tuple{Any, Hikari.WorkQueue{Hikari.PWEscapedRayWorkItem, V} where V&lt;:AbstractVector{Hikari.PWEscapedRayWorkItem}, Hikari.WorkQueue{Hikari.PWHitAreaLightWorkItem, V} where V&lt;:AbstractVector{Hikari.PWHitAreaLightWorkItem}, Hikari.WorkQueue{Hikari.PWMaterialEvalWorkItem, V} where V&lt;:AbstractVector{Hikari.PWMaterialEvalWorkItem}, Hikari.WorkQueue{Hikari.PWRayWorkItem, V} where V&lt;:AbstractVector{Hikari.PWRayWorkItem}, Any, Any}" href="#Hikari.pw_trace_rays!-Tuple{Any, Hikari.WorkQueue{Hikari.PWEscapedRayWorkItem, V} where V&lt;:AbstractVector{Hikari.PWEscapedRayWorkItem}, Hikari.WorkQueue{Hikari.PWHitAreaLightWorkItem, V} where V&lt;:AbstractVector{Hikari.PWHitAreaLightWorkItem}, Hikari.WorkQueue{Hikari.PWMaterialEvalWorkItem, V} where V&lt;:AbstractVector{Hikari.PWMaterialEvalWorkItem}, Hikari.WorkQueue{Hikari.PWRayWorkItem, V} where V&lt;:AbstractVector{Hikari.PWRayWorkItem}, Any, Any}"><span class="jlbinding">Hikari.pw_trace_rays!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_trace_rays!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, escaped_queue, hit_light_queue, material_queue,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               ray_queue, accel, materials)</span></span></code></pre></div><p>Trace all rays in ray_queue and populate output queues.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/intersection.jl#L416-L421" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_trace_rays_kernel!-Tuple{Any}" href="#Hikari.pw_trace_rays_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_trace_rays_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_trace_rays_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Trace rays from ray_queue, handle hits and misses:</p><ul><li><p>Misses -&gt; push to escaped_ray_queue (for environment light)</p></li><li><p>Hits on emissive -&gt; push to hit_area_light_queue</p></li><li><p>Hits on non-emissive -&gt; push to material_eval_queue</p></li></ul><p>This kernel does NOT generate shadow rays - that happens in direct lighting.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/intersection.jl#L8-L17" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_trace_shadow_rays!-Tuple{Any, AbstractVector{Float32}, Hikari.WorkQueue{Hikari.PWShadowRayWorkItem, V} where V&lt;:AbstractVector{Hikari.PWShadowRayWorkItem}, Any}" href="#Hikari.pw_trace_shadow_rays!-Tuple{Any, AbstractVector{Float32}, Hikari.WorkQueue{Hikari.PWShadowRayWorkItem, V} where V&lt;:AbstractVector{Hikari.PWShadowRayWorkItem}, Any}"><span class="jlbinding">Hikari.pw_trace_shadow_rays!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_trace_shadow_rays!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, pixel_L, shadow_queue, accel)</span></span></code></pre></div><p>Trace shadow rays and accumulate unoccluded contributions.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/intersection.jl#L453-L457" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_trace_shadow_rays_kernel!-Tuple{Any}" href="#Hikari.pw_trace_shadow_rays_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_trace_shadow_rays_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_trace_shadow_rays_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pixel_L, shadow_queue, accel, max_queued)</span></span></code></pre></div><p>Trace shadow rays and accumulate unoccluded contributions to pixel buffer.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/intersection.jl#L233-L237" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_update_aux_from_material_queue!-Tuple{Any, Hikari.Film, Hikari.WorkQueue{Hikari.PWMaterialEvalWorkItem, V} where V&lt;:AbstractVector{Hikari.PWMaterialEvalWorkItem}, Any, Hikari.RGBToSpectrumTable}" href="#Hikari.pw_update_aux_from_material_queue!-Tuple{Any, Hikari.Film, Hikari.WorkQueue{Hikari.PWMaterialEvalWorkItem, V} where V&lt;:AbstractVector{Hikari.PWMaterialEvalWorkItem}, Any, Hikari.RGBToSpectrumTable}"><span class="jlbinding">Hikari.pw_update_aux_from_material_queue!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_update_aux_from_material_queue!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, film, material_queue, materials, rgb2spec_table)</span></span></code></pre></div><p>Update film auxiliary buffers (albedo, normal, depth) from first-bounce material hits.</p><p>This extracts albedo from materials during the wavefront pipeline, unlike the separate fill_aux_buffers! which traces primary rays again.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L435-L442" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_update_aux_kernel!-Tuple{Any}" href="#Hikari.pw_update_aux_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_update_aux_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_update_aux_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aux_albedo, aux_normal, aux_depth,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                       material_queue_items, material_queue_size,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                       materials, rgb2spec_table,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                       width, height, max_queued)</span></span></code></pre></div><p>Kernel to update auxiliary buffers from depth=0 material queue items.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L472-L479" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_update_film_perPixel!-Tuple{Any, Hikari.Film, AbstractVector{Float32}, AbstractVector{Float32}, AbstractVector{Float32}, Hikari.CIEXYZTable, Int32}" href="#Hikari.pw_update_film_perPixel!-Tuple{Any, Hikari.Film, AbstractVector{Float32}, AbstractVector{Float32}, AbstractVector{Float32}, Hikari.CIEXYZTable, Int32}"><span class="jlbinding">Hikari.pw_update_film_perPixel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_update_film_perPixel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, film, pixel_L, wavelengths_per_pixel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                          pdf_per_pixel, cie_table, samples_accumulated)</span></span></code></pre></div><p>Update film framebuffer with per-pixel wavelength data. Uses proper kernel with CIE table arrays passed explicitly.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L315-L321" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_update_film_spectral_kernel!-Tuple{Any}" href="#Hikari.pw_update_film_spectral_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_update_film_spectral_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_update_film_spectral_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(framebuffer, pixel_L, wavelengths_per_pixel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                 pdf_per_pixel, cie_x, cie_y, cie_z,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                 samples_accumulated, width, height)</span></span></code></pre></div><p>Convert accumulated spectral radiance to RGB and update film framebuffer.</p><p>Each pixel stores 4 spectral values in pixel_L (interleaved), and wavelengths_per_pixel stores the sampled wavelengths. Uses CIE XYZ color matching for accurate conversion.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L166-L175" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_update_film_uniform!-Tuple{Any, Hikari.Film, AbstractVector{Float32}, Hikari.CIEXYZTable, Hikari.SampledWavelengths{4}, Int32}" href="#Hikari.pw_update_film_uniform!-Tuple{Any, Hikari.Film, AbstractVector{Float32}, Hikari.CIEXYZTable, Hikari.SampledWavelengths{4}, Int32}"><span class="jlbinding">Hikari.pw_update_film_uniform!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_update_film_uniform!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, film, pixel_L, cie_table, lambda, samples_accumulated)</span></span></code></pre></div><p>Update film framebuffer using uniform wavelength sampling (all pixels share wavelengths).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L353-L357" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.pw_update_film_uniform_kernel!-Tuple{Any}" href="#Hikari.pw_update_film_uniform_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.pw_update_film_uniform_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pw_update_film_uniform_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(framebuffer, pixel_L, cie_x, cie_y, cie_z,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                lambda, samples_accumulated, width, height)</span></span></code></pre></div><p>Convert accumulated spectral radiance to RGB using uniform wavelength sampling.</p><p>When using stratified wavelength sampling, all pixels share the same wavelengths within a sample iteration. This kernel uses a single Wavelengths value for all pixels.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/film-update.jl#L222-L230" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.r2_sample-Tuple{Int32}" href="#Hikari.r2_sample-Tuple{Int32}"><span class="jlbinding">Hikari.r2_sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">r2_sample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Tuple{Float32, Float32}</span></span></code></pre></div><p>Generate the n-th point of the R2 quasi-random sequence. The R2 sequence has excellent 2D discrepancy properties.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/stratified.jl#L115-L120" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.r2_sample_rotated-Tuple{Int32, Float32, Float32}" href="#Hikari.r2_sample_rotated-Tuple{Int32, Float32, Float32}"><span class="jlbinding">Hikari.r2_sample_rotated</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">r2_sample_rotated</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, offset_x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, offset_y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Tuple{Float32, Float32}</span></span></code></pre></div><p>Generate the n-th point of the R2 sequence with Cranley-Patterson rotation. The offset is typically derived from a hash of the pixel coordinates.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/stratified.jl#L128-L133" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.ray_bounds_intersect-Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Raycore.Bounds3}" href="#Hikari.ray_bounds_intersect-Tuple{GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Raycore.Bounds3}"><span class="jlbinding">Hikari.ray_bounds_intersect</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ray_bounds_intersect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ray_o, ray_d, bounds) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (t_min, t_max)</span></span></code></pre></div><p>Compute ray-AABB intersection. Returns (Inf, -Inf) if no intersection. Uses scalar operations for GPU compatibility.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1698-L1703" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.ray_majorant_next-Union{Tuple{M}, Tuple{Hikari.RayMajorantIterator{M}, Any}} where M" href="#Hikari.ray_majorant_next-Union{Tuple{M}, Tuple{Hikari.RayMajorantIterator{M}, Any}} where M"><span class="jlbinding">Hikari.ray_majorant_next</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ray_majorant_next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(iter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RayMajorantIterator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, media) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (RayMajorantSegment, RayMajorantIterator, Bool)</span></span></code></pre></div><p>Advance the unified iterator and return the next majorant segment. Dispatches internally based on mode (homogeneous vs DDA). Returns (segment, new_iter, valid) where valid=false means exhausted.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L618-L624" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.reflect-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.reflect-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.reflect</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">reflect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(wo, n) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> wi</span></span></code></pre></div><p>Compute reflected direction: wi = -wo + 2_dot(wo,n)_n</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L1122-L1126" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.refract-Tuple{GeometryBasics.Vec{3, Float32}, Raycore.Normal3f, Float32}" href="#Hikari.refract-Tuple{GeometryBasics.Vec{3, Float32}, Raycore.Normal3f, Float32}"><span class="jlbinding">Hikari.refract</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">refract</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(wi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Normal3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, eta</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (valid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, wt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Compute refracted direction <code>wt</code> given an incident direction <code>wi</code>, surface normal <code>n</code>, and <code>eta</code> = n_t / n_i (ratio of transmitted to incident IOR).</p><p>This matches pbrt-v4&#39;s Refract() function exactly:</p><ul><li><p>If wi comes from below the surface (cos_θi &lt; 0), the interface is flipped</p></li><li><p>Returns (false, zero) for total internal reflection</p></li><li><p>Returns (true, wt) with the refracted direction otherwise</p></li></ul><p>The convention is: eta = n_transmitted / n_incident</p><ul><li><p>For ray entering glass (n_i=1, n_t=1.5): eta = 1.5</p></li><li><p>For ray exiting glass (n_i=1.5, n_t=1): eta = 1/1.5 ≈ 0.67</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/bxdf.jl#L14-L28" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.refract_microfacet-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32}" href="#Hikari.refract_microfacet-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32}"><span class="jlbinding">Hikari.refract_microfacet</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">refract_microfacet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(wo, wm, eta) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (valid, wi, etap)</span></span></code></pre></div><p>Compute refracted direction through a microfacet with normal wm.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L1095-L1099" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.refract_pbrt-Tuple{GeometryBasics.Vec{3, Float32}, Float32}" href="#Hikari.refract_pbrt-Tuple{GeometryBasics.Vec{3, Float32}, Float32}"><span class="jlbinding">Hikari.refract_pbrt</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">refract_pbrt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(wo, eta) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (valid, wi, etap)</span></span></code></pre></div><p>Compute refracted direction using pbrt-v4 convention. eta = n_transmitted / n_incident Returns (valid, wi, effective_eta).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L1065-L1071" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.regularize_alpha-Tuple{Float32}" href="#Hikari.regularize_alpha-Tuple{Float32}"><span class="jlbinding">Hikari.regularize_alpha</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">regularize_alpha</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(α</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Regularize a microfacet distribution alpha value to reduce fireflies from near-specular paths. Matches pbrt-v4&#39;s TrowbridgeReitzDistribution::Regularize().</p><p>If α &lt; 0.3, doubles it and clamps to [0.1, 0.3]. This increases the roughness of near-specular surfaces after the first non-specular bounce, reducing variance from paths that hit nearly-specular surfaces.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/microfacet.jl#L87-L96" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.render!-Tuple{Hikari.VolPath, Hikari.AbstractScene, Hikari.Film, Hikari.Camera}" href="#Hikari.render!-Tuple{Hikari.VolPath, Hikari.AbstractScene, Hikari.Film, Hikari.Camera}"><span class="jlbinding">Hikari.render!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">render!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VolPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, scene, film, camera)</span></span></code></pre></div><p>Render one iteration/sample using volumetric spectral wavefront path tracing.</p><p>This function is allocation-free and renders a single sample, accumulating results in the film. The iteration index is read from and incremented in <code>film.iteration_index</code>.</p><p>For progressive rendering, call this repeatedly. For complete rendering, use the main call function <code>(vp::VolPath)(scene, film, camera)</code> which wraps this in a loop.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath.jl#L441-L453" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.reset_film!-Tuple{Hikari.VolPathState}" href="#Hikari.reset_film!-Tuple{Hikari.VolPathState}"><span class="jlbinding">Hikari.reset_film!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Reset film buffer for a new sample.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath-state.jl#L224" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.reset_iteration_queues!-Tuple{Hikari.VolPathState}" href="#Hikari.reset_iteration_queues!-Tuple{Hikari.VolPathState}"><span class="jlbinding">Hikari.reset_iteration_queues!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Reset iteration queues before ray tracing.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath-state.jl#L213" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.reset_processing_queues!-Tuple{Hikari.VolPathState}" href="#Hikari.reset_processing_queues!-Tuple{Hikari.VolPathState}"><span class="jlbinding">Hikari.reset_processing_queues!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Reset all processing queues for a new bounce.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath-state.jl#L202" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.reset_queues!-Union{Tuple{N}, Tuple{Any, Hikari.MultiMaterialQueue{N}}} where N" href="#Hikari.reset_queues!-Union{Tuple{N}, Tuple{Any, Hikari.MultiMaterialQueue{N}}} where N"><span class="jlbinding">Hikari.reset_queues!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Reset all queues</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/multi-material-eval.jl#L42" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.resolve_mix_material-Tuple{Raycore.StaticMultiTypeSet, Raycore.SetKey, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}" href="#Hikari.resolve_mix_material-Tuple{Raycore.StaticMultiTypeSet, Raycore.SetKey, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.resolve_mix_material</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">resolve_mix_material</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(materials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SetKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p, wo, uv) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SetKey</span></span></code></pre></div><p>Resolve any MixMaterial chain to get the final material index. Handles nested MixMaterials by iterating until a non-mix material is found. <code>materials</code> is used both for material lookup and texture evaluation.</p><p>This should be called at intersection time before creating material work items.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/mix-material.jl#L244-L252" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.rgb_illuminant_spectrum-Tuple{Hikari.RGBToSpectrumTable, Float32, Float32, Float32}" href="#Hikari.rgb_illuminant_spectrum-Tuple{Hikari.RGBToSpectrumTable, Float32, Float32, Float32}"><span class="jlbinding">Hikari.rgb_illuminant_spectrum</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgb_illuminant_spectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBToSpectrumTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, r, g, b) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RGBIlluminantSpectrum</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgb_illuminant_spectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBToSpectrumTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, rgb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RGBIlluminantSpectrum</span></span></code></pre></div><p>Create an illuminant spectrum from RGB values, matching pbrt-v4&#39;s RGBIlluminantSpectrum constructor.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L365-L370" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.rgb_to_spectral-Tuple{Hikari.RGBSpectrum, Hikari.SampledWavelengths{4}}" href="#Hikari.rgb_to_spectral-Tuple{Hikari.RGBSpectrum, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.rgb_to_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgb_to_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rgb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Convert Hikari&#39;s RGBSpectrum to spectral radiance at given wavelengths.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L72-L76" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.rgb_to_spectral_at_wavelength-NTuple{4, Float32}" href="#Hikari.rgb_to_spectral_at_wavelength-NTuple{4, Float32}"><span class="jlbinding">Hikari.rgb_to_spectral_at_wavelength</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgb_to_spectral_at_wavelength</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r, g, b, λ) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Get spectral value at a single wavelength from RGB. Uses smooth blending between spectral bands.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L38-L43" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.rgb_to_spectral_sigmoid-Tuple{Float32, Float32, Float32, Hikari.SampledWavelengths{4}}" href="#Hikari.rgb_to_spectral_sigmoid-Tuple{Float32, Float32, Float32, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.rgb_to_spectral_sigmoid</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgb_to_spectral_sigmoid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Convert RGB to spectral radiance using sigmoid polynomial method (pbrt-v4 style). This provides the smoothest spectra and lowest variance for spectral rendering.</p><p>Note: Uses global table, not GPU-compatible. Use the version with explicit table for GPU kernels.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L237-L244" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.rgb_to_spectral_sigmoid-Tuple{Hikari.RGBToSpectrumTable, Float32, Float32, Float32, Hikari.SampledWavelengths{4}}" href="#Hikari.rgb_to_spectral_sigmoid-Tuple{Hikari.RGBToSpectrumTable, Float32, Float32, Float32, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.rgb_to_spectral_sigmoid</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgb_to_spectral_sigmoid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBToSpectrumTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, r, g, b, lambda) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>GPU-compatible version that takes an explicit table parameter.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L250-L254" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.rgb_to_spectral_sigmoid_illuminant-Tuple{Hikari.RGBToSpectrumTable, Float32, Float32, Float32, Hikari.SampledWavelengths{4}}" href="#Hikari.rgb_to_spectral_sigmoid_illuminant-Tuple{Hikari.RGBToSpectrumTable, Float32, Float32, Float32, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.rgb_to_spectral_sigmoid_illuminant</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgb_to_spectral_sigmoid_illuminant</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBToSpectrumTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, r, g, b, lambda) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Convert RGB to spectral radiance for illuminants/light sources. Following pbrt-v4&#39;s RGBIlluminantSpectrum: multiplies sigmoid polynomial by D65 illuminant.</p><p>This is the correct conversion for environment maps and other light sources that are specified in sRGB. The D65 multiplication is necessary because sRGB&#39;s white point is D65, so an RGB=(1,1,1) light source should emit a D65-like spectrum.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L504-L513" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.rgb_to_spectral_sigmoid_unbounded-Tuple{Float32, Float32, Float32, Hikari.SampledWavelengths{4}}" href="#Hikari.rgb_to_spectral_sigmoid_unbounded-Tuple{Float32, Float32, Float32, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.rgb_to_spectral_sigmoid_unbounded</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgb_to_spectral_sigmoid_unbounded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Convert RGB to spectral radiance for unbounded values (emission/illumination). Scales the spectrum to preserve the maximum RGB component.</p><p>Note: Uses global table, not GPU-compatible. Use the version with explicit table for GPU kernels.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L268-L275" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.rgb_to_spectral_sigmoid_unbounded-Tuple{Hikari.RGBToSpectrumTable, Float32, Float32, Float32, Hikari.SampledWavelengths{4}}" href="#Hikari.rgb_to_spectral_sigmoid_unbounded-Tuple{Hikari.RGBToSpectrumTable, Float32, Float32, Float32, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.rgb_to_spectral_sigmoid_unbounded</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgb_to_spectral_sigmoid_unbounded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBToSpectrumTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, r, g, b, lambda) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>GPU-compatible version that takes an explicit table parameter.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L281-L285" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.rgb_to_spectral_simple-Tuple{Float32, Float32, Float32, Hikari.SampledWavelengths{4}}" href="#Hikari.rgb_to_spectral_simple-Tuple{Float32, Float32, Float32, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.rgb_to_spectral_simple</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgb_to_spectral_simple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Convert RGB to spectral radiance using a simple piecewise linear model. This is a simplified uplift that treats RGB as spectral bands.</p><p>For each wavelength λ:</p><ul><li><p>Blue region (380-490nm): primarily B channel</p></li><li><p>Green region (490-580nm): primarily G channel</p></li><li><p>Red region (580-780nm): primarily R channel</p></li></ul><p>With smooth transitions between regions.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L14-L26" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.rgb_to_spectral_smits-Tuple{Float32, Float32, Float32, Hikari.SampledWavelengths{4}}" href="#Hikari.rgb_to_spectral_smits-Tuple{Float32, Float32, Float32, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.rgb_to_spectral_smits</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgb_to_spectral_smits</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Convert RGB to spectral radiance using Smits&#39; method. More accurate than the simple piecewise linear approach.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L155-L160" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.rgb_to_spectral_smits_at_wavelength-NTuple{4, Float32}" href="#Hikari.rgb_to_spectral_smits_at_wavelength-NTuple{4, Float32}"><span class="jlbinding">Hikari.rgb_to_spectral_smits_at_wavelength</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgb_to_spectral_smits_at_wavelength</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r, g, b, λ) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute spectral value at wavelength λ using Smits&#39; method.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L172-L176" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.rgb_to_spectrum-Tuple{Hikari.RGBToSpectrumTable, Float32, Float32, Float32}" href="#Hikari.rgb_to_spectrum-Tuple{Hikari.RGBToSpectrumTable, Float32, Float32, Float32}"><span class="jlbinding">Hikari.rgb_to_spectrum</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgb_to_spectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, rgb) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RGBSigmoidPolynomial</span></span></code></pre></div><p>Convert an RGB color to a sigmoid polynomial spectrum representation. RGB values should be in [0, 1] range.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L77-L82" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.rgb_to_spectrum_coeffs-Tuple{AbstractVector{Float32}, AbstractArray{Float32, 5}, Int32, Float32, Float32, Float32}" href="#Hikari.rgb_to_spectrum_coeffs-Tuple{AbstractVector{Float32}, AbstractArray{Float32, 5}, Int32, Float32, Float32, Float32}"><span class="jlbinding">Hikari.rgb_to_spectrum_coeffs</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgb_to_spectrum_coeffs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(scale, coeffs, res, r, g, b) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (c0, c1, c2)</span></span></code></pre></div><p>GPU-compatible version that takes raw arrays and returns coefficient tuple.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L177-L181" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.rgb_unbounded_spectrum-Tuple{Hikari.RGBToSpectrumTable, Float32, Float32, Float32}" href="#Hikari.rgb_unbounded_spectrum-Tuple{Hikari.RGBToSpectrumTable, Float32, Float32, Float32}"><span class="jlbinding">Hikari.rgb_unbounded_spectrum</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Create unbounded spectrum from RGB (for lights/emission)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L304" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.rotation_matrix-Tuple{Real, GeometryBasics.Vec{3, Float32}}" href="#Hikari.rotation_matrix-Tuple{Real, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.rotation_matrix</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Create rotation matrix from axis-angle representation (like pbrt&#39;s Rotate command). angle: rotation angle in degrees axis: rotation axis (will be normalized)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/environment_map.jl#L47-L51" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.roughness_to_α-Tuple{Float32}" href="#Hikari.roughness_to_α-Tuple{Float32}"><span class="jlbinding">Hikari.roughness_to_α</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">roughness_to_α</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(roughness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Map [0, 1] scalar roughness to microfacet distribution alpha parameter.</p><p>Matches pbrt-v4&#39;s TrowbridgeReitzDistribution::RoughnessToAlpha which uses sqrt(roughness). This provides a more intuitive perceptual mapping where roughness values close to zero give near-perfect specular reflection.</p><p>Note: pbrt-v4 comments suggest Sqr(roughness) might be more perceptually uniform, but sqrt is retained for compatibility with existing scenes.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/microfacet.jl#L71-L82" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.russian_roulette_spectral" href="#Hikari.russian_roulette_spectral"><span class="jlbinding">Hikari.russian_roulette_spectral</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">russian_roulette_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(beta</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SpectralRadiance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, depth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, rr_sample</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, min_depth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Apply Russian roulette for path termination. Returns (should_continue::Bool, new_beta::SpectralRadiance).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-dispatch.jl#L257-L262" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.same_hemisphere-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.same_hemisphere-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.same_hemisphere</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">same_hemisphere</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w1, w2) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Bool</span></span></code></pre></div><p>Check if two directions are in the same hemisphere (both have same sign of z).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L1131-L1135" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample-Tuple{Hikari.AliasTable, Float32}" href="#Hikari.sample-Tuple{Hikari.AliasTable, Float32}"><span class="jlbinding">Hikari.sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AliasTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, u</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, pmf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Sample from the alias table using uniform random <code>u ∈ [0,1)</code>. Returns 1-based index and its PMF.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-sampler.jl#L122-L127" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample-Tuple{Hikari.EnvironmentMap, GeometryBasics.Vec{3, Float32}, Any}" href="#Hikari.sample-Tuple{Hikari.EnvironmentMap, GeometryBasics.Vec{3, Float32}, Any}"><span class="jlbinding">Hikari.sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample method alias for compatibility.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/environment_map.jl#L336-L338" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample-Tuple{Hikari.PowerLightSampler, Float32}" href="#Hikari.sample-Tuple{Hikari.PowerLightSampler, Float32}"><span class="jlbinding">Hikari.sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sampler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PowerLightSampler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, u</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (light_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, pmf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Sample a light with probability proportional to power.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-sampler.jl#L347-L351" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample-Tuple{Hikari.UniformLightSampler, Float32}" href="#Hikari.sample-Tuple{Hikari.UniformLightSampler, Float32}"><span class="jlbinding">Hikari.sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sampler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UniformLightSampler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, u</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (light_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, pmf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Sample a light uniformly. Returns 1-based index and PMF.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-sampler.jl#L194-L198" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_1d-Tuple{Hikari.SobolRNG, Vararg{Int32, 4}}" href="#Hikari.sample_1d-Tuple{Hikari.SobolRNG, Vararg{Int32, 4}}"><span class="jlbinding">Hikari.sample_1d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_1d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rng</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SobolRNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, py</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sample_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Generate a 1D Sobol sample for the given pixel and dimension.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L409-L413" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_2d-Tuple{Hikari.SobolRNG, Vararg{Int32, 4}}" href="#Hikari.sample_2d-Tuple{Hikari.SobolRNG, Vararg{Int32, 4}}"><span class="jlbinding">Hikari.sample_2d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_2d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rng</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SobolRNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, py</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sample_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Tuple{Float32, Float32}</span></span></code></pre></div><p>Generate a 2D Sobol sample for the given pixel and dimension.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L418-L422" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_Le-Tuple{Any, Hikari.RGBGridMedium, GeometryBasics.Point{3, Float32}}" href="#Hikari.sample_Le-Tuple{Any, Hikari.RGBGridMedium, GeometryBasics.Point{3, Float32}}"><span class="jlbinding">Hikari.sample_Le</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample Le at a point using trilinear interpolation. Returns RGBSpectrum(0.0) if Le_grid is nothing.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1266-L1269" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_T_maj_loop!-Tuple{Hikari.RayMajorantIterator, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, UInt64, Any, Any, Hikari.VPMediumSampleWorkItem, Any, Raycore.SetKey, Any, Int32, Int32}" href="#Hikari.sample_T_maj_loop!-Tuple{Hikari.RayMajorantIterator, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, UInt64, Any, Any, Hikari.VPMediumSampleWorkItem, Any, Raycore.SetKey, Any, Int32, Int32}"><span class="jlbinding">Hikari.sample_T_maj_loop!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_T_maj_loop!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(iter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RayMajorantIterator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SampleTMajResult</span></span></code></pre></div><p>Delta tracking loop using the unified RayMajorantIterator. Handles both homogeneous media (single segment) and heterogeneous media (DDA traversal). Uses deterministic LCG RNG for medium sampling (pbrt-v4 pattern).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/delta-tracking.jl#L230-L236" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_bounce-Tuple{Hikari.CloudVolume, Raycore.RayDifferentials, Hikari.SurfaceInteraction, Hikari.AbstractScene, Hikari.RGBSpectrum, Int32}" href="#Hikari.sample_bounce-Tuple{Hikari.CloudVolume, Raycore.RayDifferentials, Hikari.SurfaceInteraction, Hikari.AbstractScene, Hikari.RGBSpectrum, Int32}"><span class="jlbinding">Hikari.sample_bounce</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_bounce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cloud</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CloudVolume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ray, si, scene, beta, depth) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (should_bounce, new_ray, new_beta, new_depth)</span></span></code></pre></div><p>For volumes, we handle everything in shade() including the continuation ray, so no bounce is needed here.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/volume.jl#L402-L407" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_bounce-Tuple{Hikari.Material, Raycore.RayDifferentials, Hikari.SurfaceInteraction, Hikari.Scene, Hikari.RGBSpectrum, Int32}" href="#Hikari.sample_bounce-Tuple{Hikari.Material, Raycore.RayDifferentials, Hikari.SurfaceInteraction, Hikari.Scene, Hikari.RGBSpectrum, Int32}"><span class="jlbinding">Hikari.sample_bounce</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_bounce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(material</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Material</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ray, si, scene, beta, depth) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (should_bounce, new_ray, new_beta, new_depth)</span></span></code></pre></div><p>Sample BSDF to generate a bounce ray for path continuation.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/material.jl#L286-L290" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_bsdf_spectral" href="#Hikari.sample_bsdf_spectral"><span class="jlbinding">Hikari.sample_bsdf_spectral</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_bsdf_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ConductorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, textures, wo, n, uv, lambda, sample_u, rng, regularize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralBSDFSample</span></span></code></pre></div><p>Sample metal BSDF with conductor Fresnel. Matches pbrt-v4&#39;s ConductorBxDF::Sample_f exactly.</p><p>The implementation works in local shading coordinates where n = (0,0,1), then transforms back.</p><p>When <code>regularize=true</code>, the microfacet alpha is increased to reduce fireflies from near-specular paths (matches pbrt-v4 BSDF::Regularize).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L212-L222" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_bsdf_spectral-2" href="#Hikari.sample_bsdf_spectral-2"><span class="jlbinding">Hikari.sample_bsdf_spectral</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_bsdf_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ThinDielectricMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, textures, wo, n, uv, lambda, sample_u, rng, regularize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralBSDFSample</span></span></code></pre></div><p>Sample thin dielectric BSDF matching pbrt-v4&#39;s ThinDielectricBxDF::Sample_f.</p><p>Thin dielectric surfaces model materials like window glass where light can either reflect or transmit straight through (no refraction bend).</p><p>Key physics (pbrt-v4 lines 225-230):</p><ul><li><p>R₀ = FrDielectric(|cos_θ|, eta)</p></li><li><p>R = R₀ + T₀²R₀/(1 - R₀²) where T₀ = 1 - R₀</p></li><li><p>T = 1 - R</p></li><li><p>Transmitted direction: wi = -wo (straight through)</p></li><li><p>Reflected direction: wi = (-wo.x, -wo.y, wo.z) (mirror reflection in local coords)</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L1960-L1974" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_bsdf_spectral-3" href="#Hikari.sample_bsdf_spectral-3"><span class="jlbinding">Hikari.sample_bsdf_spectral</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_bsdf_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MirrorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, textures, wo, n, uv, lambda, sample_u, rng) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralBSDFSample</span></span></code></pre></div><p>Sample perfect specular reflection with spectral evaluation.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L103-L107" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_bsdf_spectral-4" href="#Hikari.sample_bsdf_spectral-4"><span class="jlbinding">Hikari.sample_bsdf_spectral</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_bsdf_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CoatedConductorMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, textures, wo, n, uv, lambda, sample_u, rng, regularize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralBSDFSample</span></span></code></pre></div><p>Sample CoatedConductor BSDF using pbrt-v4&#39;s LayeredBxDF approach.</p><p>This is a layered material with:</p><ul><li><p>Top layer: Dielectric coating (can be rough or smooth)</p></li><li><p>Bottom layer: Conductor (metal) with complex Fresnel</p></li></ul><p>Key pbrt-v4 details (materials.cpp lines 345-392):</p><ul><li><p>Conductor eta/k are scaled by interface IOR: ce /= ieta, ck /= ieta</p></li><li><p>If reflectance mode: k = 2 * sqrt(r) / sqrt(1 - r), eta = 1</p></li></ul><p>When <code>regularize=true</code>, both interface and conductor microfacet alphas are increased to reduce fireflies from near-specular paths (matches pbrt-v4 BSDF::Regularize).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L2861-L2876" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_bsdf_spectral-5" href="#Hikari.sample_bsdf_spectral-5"><span class="jlbinding">Hikari.sample_bsdf_spectral</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sample_bsdf_spectral </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MediumInterface </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> forwards to wrapped material.</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3456-L3458" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_bsdf_spectral-6" href="#Hikari.sample_bsdf_spectral-6"><span class="jlbinding">Hikari.sample_bsdf_spectral</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_bsdf_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GlassMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, textures, wo, n, uv, lambda, sample_u, rng) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralBSDFSample</span></span></code></pre></div><p>Sample glass BSDF with reflection or refraction. Uses Fresnel to choose between reflection and transmission.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L134-L139" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_bsdf_spectral-7" href="#Hikari.sample_bsdf_spectral-7"><span class="jlbinding">Hikari.sample_bsdf_spectral</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_bsdf_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MatteMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, textures, wo, n, uv, lambda, sample_u, rng) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralBSDFSample</span></span></code></pre></div><p>Sample diffuse BSDF with spectral evaluation. Uses pbrt-v4 convention: work in local shading space where n = (0,0,1).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L36-L41" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_bsdf_spectral-8" href="#Hikari.sample_bsdf_spectral-8"><span class="jlbinding">Hikari.sample_bsdf_spectral</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_bsdf_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DiffuseTransmissionMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, textures, wo, n, uv, lambda, sample_u, rng, regularize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralBSDFSample</span></span></code></pre></div><p>Sample diffuse transmission BSDF matching pbrt-v4&#39;s DiffuseTransmissionBxDF::Sample_f.</p><p>This material diffusely scatters light in both reflection (same hemisphere) and transmission (opposite hemisphere). Sampling is proportional to max(R) and max(T).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L2075-L2082" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_bsdf_spectral-9" href="#Hikari.sample_bsdf_spectral-9"><span class="jlbinding">Hikari.sample_bsdf_spectral</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_bsdf_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CoatedDiffuseMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, textures, wo, n, uv, lambda, sample_u, rng, regularize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralBSDFSample</span></span></code></pre></div><p>Sample CoatedDiffuse BSDF using pbrt-v4&#39;s LayeredBxDF random walk algorithm.</p><p>This is a 100% port of pbrt-v4&#39;s LayeredBxDF::Sample_f. The algorithm:</p><ol><li><p>Sample entrance interface (top dielectric for wo.z &gt; 0)</p></li><li><p>If reflection at entrance: return immediately with pdfIsProportional=true</p></li><li><p>If transmission: start random walk through layers</p></li><li><p>At each depth: possibly scatter in medium, then sample interface</p></li><li><p>When ray exits through transmission: return the accumulated sample</p></li><li><p>Russian roulette for path termination</p></li></ol><p>When <code>regularize=true</code>, the coating&#39;s microfacet alpha is increased to reduce fireflies.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L1217-L1231" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_cie_x-Tuple{Hikari.CIEXYZTable, Float32}" href="#Hikari.sample_cie_x-Tuple{Hikari.CIEXYZTable, Float32}"><span class="jlbinding">Hikari.sample_cie_x</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_cie_x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CIEXYZTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Sample CIE X color matching function at wavelength lambda (in nm). Uses nearest-neighbor lookup into tabulated data.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L358-L363" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_cie_xyz-Tuple{Hikari.CIEXYZTable, Float32}" href="#Hikari.sample_cie_xyz-Tuple{Hikari.CIEXYZTable, Float32}"><span class="jlbinding">Hikari.sample_cie_xyz</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_cie_xyz</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CIEXYZTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Sample CIE XYZ color matching functions at a single wavelength. Returns Vec3f(X, Y, Z) values at that wavelength.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L398-L403" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_cie_y-Tuple{Hikari.CIEXYZTable, Float32}" href="#Hikari.sample_cie_y-Tuple{Hikari.CIEXYZTable, Float32}"><span class="jlbinding">Hikari.sample_cie_y</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_cie_y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CIEXYZTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Sample CIE Y color matching function at wavelength lambda (in nm).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L372-L376" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_cie_z-Tuple{Hikari.CIEXYZTable, Float32}" href="#Hikari.sample_cie_z-Tuple{Hikari.CIEXYZTable, Float32}"><span class="jlbinding">Hikari.sample_cie_z</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_cie_z</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CIEXYZTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Sample CIE Z color matching function at wavelength lambda (in nm).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L385-L389" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_conditional_1d-Tuple{AbstractMatrix{Float32}, AbstractMatrix{Float32}, Float32, Int32, Float32, Int32, Float32, Float32}" href="#Hikari.sample_conditional_1d-Tuple{AbstractMatrix{Float32}, AbstractMatrix{Float32}, Float32, Int32, Float32, Int32, Float32, Float32}"><span class="jlbinding">Hikari.sample_conditional_1d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample 1D from conditional distribution (row of 2D distribution).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L785-L787" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_continuous-Tuple{Hikari.Distribution1D, Float32}" href="#Hikari.sample_continuous-Tuple{Hikari.Distribution1D, Float32}"><span class="jlbinding">Hikari.sample_continuous</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample continuous value from Distribution1D. Returns (sampled value in [0,1], pdf, offset index).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sampling.jl#L128-L131" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_continuous-Tuple{Hikari.Distribution2D, GeometryBasics.Point{2, Float32}, Any}" href="#Hikari.sample_continuous-Tuple{Hikari.Distribution2D, GeometryBasics.Point{2, Float32}, Any}"><span class="jlbinding">Hikari.sample_continuous</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample a 2D point from the flat distribution. Returns (Point2f(u, v), pdf). The <code>textures</code> parameter is used to deref TextureRef fields when Distribution2D is stored in a MultiTypeSet.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sampling.jl#L265-L269" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_d65-Tuple{Float32}" href="#Hikari.sample_d65-Tuple{Float32}"><span class="jlbinding">Hikari.sample_d65</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_d65</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Sample the D65 illuminant spectrum at wavelength lambda (nm). Uses linear interpolation between tabulated values.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L431-L436" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_d65_spectral-Tuple{Hikari.SampledWavelengths{4}}" href="#Hikari.sample_d65_spectral-Tuple{Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.sample_d65_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_d65_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Sample D65 illuminant at multiple wavelengths. Returns raw D65 values (around 80-120 across visible spectrum, normalized to 100 at 560nm). Matches pbrt-v4&#39;s illuminant-&gt;Sample(lambda) behavior.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L459-L465" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_density-Tuple{Any, Hikari.GridMedium, GeometryBasics.Point{3, Float32}}" href="#Hikari.sample_density-Tuple{Any, Hikari.GridMedium, GeometryBasics.Point{3, Float32}}"><span class="jlbinding">Hikari.sample_density</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample density at a point using trilinear interpolation.</p><p>Uses pbrt-v4&#39;s cell-centered interpretation:</p><ul><li><p>p ∈ [0,1]³ is normalized position within bounds</p></li><li><p>Grid has nx×ny×nz voxels (1-indexed in Julia)</p></li><li><p>Voxel i is centered at (i - 0.5) / n in normalized space</p></li><li><p>Interpolation uses 8 neighboring voxels with proper clamping at boundaries</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1535-L1543" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_density-Tuple{Hikari.CloudVolume, GeometryBasics.Point{3, Float32}}" href="#Hikari.sample_density-Tuple{Hikari.CloudVolume, GeometryBasics.Point{3, Float32}}"><span class="jlbinding">Hikari.sample_density</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample density at a world position using trilinear interpolation</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/volume.jl#L58" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_dielectric_interface-Tuple{GeometryBasics.Vec{3, Float32}, Float32, GeometryBasics.Point{2, Float32}, Float32, Float32, Float32, UInt8}" href="#Hikari.sample_dielectric_interface-Tuple{GeometryBasics.Vec{3, Float32}, Float32, GeometryBasics.Point{2, Float32}, Float32, Float32, Float32, UInt8}"><span class="jlbinding">Hikari.sample_dielectric_interface</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_dielectric_interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(wo, uc, u, alpha_x, alpha_y, eta, refl_trans_flags) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LayeredBSDFSample</span></span></code></pre></div><p>Sample the dielectric coating interface (top layer in CoatedDiffuse). Handles both smooth (specular) and rough (microfacet) dielectric surfaces.</p><p>This matches pbrt-v4&#39;s DielectricBxDF::Sample_f exactly.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L965-L972" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_dielectric_transmission_spectral-Tuple{Float32, GeometryBasics.Vec{3, Float32}, Float32}" href="#Hikari.sample_dielectric_transmission_spectral-Tuple{Float32, GeometryBasics.Vec{3, Float32}, Float32}"><span class="jlbinding">Hikari.sample_dielectric_transmission_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_dielectric_transmission_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(eta, wo, uc) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (wi, T, valid)</span></span></code></pre></div><p>Sample transmission through a dielectric interface. Returns transmitted direction, transmittance, and validity flag.</p><p>Uses pbrt-v4 convention: eta = n_t / n_i (transmitted IOR / incident IOR). The wo direction is in local shading space where z is the surface normal.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L885-L893" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_diffuse_interface-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}, Hikari.SampledSpectrum{4}, UInt8}" href="#Hikari.sample_diffuse_interface-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}, Hikari.SampledSpectrum{4}, UInt8}"><span class="jlbinding">Hikari.sample_diffuse_interface</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_diffuse_interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(wo, u, reflectance) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LayeredBSDFSample</span></span></code></pre></div><p>Sample the diffuse base layer (bottom in CoatedDiffuse). This is a simple cosine-weighted hemisphere sampler.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L1138-L1143" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_diffuse_transmission_bottom-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}, Float32, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, Float32, Float32, UInt8}" href="#Hikari.sample_diffuse_transmission_bottom-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}, Float32, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, Float32, Float32, UInt8}"><span class="jlbinding">Hikari.sample_diffuse_transmission_bottom</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_diffuse_transmission_bottom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(wo, u, uc, reflectance, transmittance, refl_trans_flags) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LayeredBSDFSample</span></span></code></pre></div><p>Sample the diffuse transmission bottom layer for the LayeredBxDF walk. Handles both reflection (R/π, same hemisphere) and transmission (T/π, opposite hemisphere).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L2251-L2256" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_exponential-Tuple{Float32, Float32}" href="#Hikari.sample_exponential-Tuple{Float32, Float32}"><span class="jlbinding">Hikari.sample_exponential</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_exponential</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(u</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Sample from exponential distribution with rate parameter a. Returns -log(1-u)/a, matching pbrt-v4&#39;s SampleExponential.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L817-L822" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_f-Tuple{Hikari.BSDF, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}, UInt8}" href="#Hikari.sample_f-Tuple{Hikari.BSDF, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}, UInt8}"><span class="jlbinding">Hikari.sample_f</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute incident ray direction for a given outgoing direction and a given mode of light scattering corresponding to perfect specular reflection or refraction.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/bsdf.jl#L138-L142" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_filter-Tuple{Hikari.FilterSampler{Hikari.BoxFilter, Nothing}, GeometryBasics.Point{2, Float32}}" href="#Hikari.sample_filter-Tuple{Hikari.FilterSampler{Hikari.BoxFilter, Nothing}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.sample_filter</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample the filter using the FilterSampler. Returns FilterSample with position and weight.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L537-L540" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_fresnel_microfacet-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}} where S&lt;:Hikari.Spectrum" href="#Hikari.sample_fresnel_microfacet-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}} where S&lt;:Hikari.Spectrum"><span class="jlbinding">Hikari.sample_fresnel_microfacet</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample FresnelMicrofacet using Fresnel-weighted probability to choose between reflection and transmission.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/microfacet.jl#L389-L392" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_fresnel_specular-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}} where S&lt;:Hikari.Spectrum" href="#Hikari.sample_fresnel_specular-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}} where S&lt;:Hikari.Spectrum"><span class="jlbinding">Hikari.sample_fresnel_specular</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute the direction of incident light wi, given an outgoing direction wo and return the value of BxDF for the pair of directions.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/specular.jl#L103-L106" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_ggx_vndf-Tuple{GeometryBasics.Vec{3, Float32}, Float32, Float32, GeometryBasics.Point{2, Float32}}" href="#Hikari.sample_ggx_vndf-Tuple{GeometryBasics.Vec{3, Float32}, Float32, Float32, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.sample_ggx_vndf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_ggx_vndf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(wo, alpha_x, alpha_y, u) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Sample visible normal from GGX distribution.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3538-L3542" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_hg-Tuple{Float32, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}" href="#Hikari.sample_hg-Tuple{Float32, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.sample_hg</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_hg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g, wo, u) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (wi, pdf)</span></span></code></pre></div><p>Importance sample the Henyey-Greenstein phase function. Returns sampled direction and PDF.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L36-L41" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_hg_phase_spectral-Tuple{Float32, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}" href="#Hikari.sample_hg_phase_spectral-Tuple{Float32, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.sample_hg_phase_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_hg_phase_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g, wo, u) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (wi, phase_pdf)</span></span></code></pre></div><p>Sample direction from Henyey-Greenstein phase function.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L842-L846" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_le-Union{Tuple{S}, Tuple{Hikari.EnvironmentLight{S, E} where E&lt;:Hikari.EnvironmentMap{S, T} where T&lt;:AbstractMatrix{S}, GeometryBasics.Point{2, Float32}, GeometryBasics.Point{2, Float32}, Float32, Hikari.Scene}} where S" href="#Hikari.sample_le-Union{Tuple{S}, Tuple{Hikari.EnvironmentLight{S, E} where E&lt;:Hikari.EnvironmentMap{S, T} where T&lt;:AbstractMatrix{S}, GeometryBasics.Point{2, Float32}, GeometryBasics.Point{2, Float32}, Float32, Hikari.Scene}} where S"><span class="jlbinding">Hikari.sample_le</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample a ray leaving the environment light (for photon mapping / light tracing). Uses importance sampling based on environment map luminance.</p><p>The ray is sampled by:</p><ol><li><p>Importance sampling a direction from the environment map</p></li><li><p>Placing a disk of radius scene_radius centered at scene_center, perpendicular to that direction</p></li><li><p>Sampling a point on the disk and shooting a ray inward</p></li></ol><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/environment.jl#L75-L84" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_li-Tuple{Hikari.AmbientLight, Hikari.Interaction, GeometryBasics.Point{2, Float32}, Hikari.AbstractScene}" href="#Hikari.sample_li-Tuple{Hikari.AmbientLight, Hikari.Interaction, GeometryBasics.Point{2, Float32}, Hikari.AbstractScene}"><span class="jlbinding">Hikari.sample_li</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute radiance arriving at <code>ref.p</code> interaction point at <code>ref.time</code> time due to the ambient light.</p><p><strong>Args</strong></p><ul><li><p><code>a::AmbientLight</code>: Ambient light which illuminates the interaction point <code>ref</code>.</p></li><li><p><code>ref::Interaction</code>: Interaction point for which to compute radiance.</p></li><li><p><code>u::Point2f</code>: Sampling point that is ignored for <code>AmbientLight</code>, since it emits light uniformly.</p></li></ul><p><strong>Returns</strong></p><p><code>Tuple{S, Vec3f, Float32, VisibilityTester} where S &lt;: Spectrum</code>:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `S`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Computed radiance.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `Vec3f`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Incident direction to the light source </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`wi`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `Float32`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Probability density </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> the light sample that was taken.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    For </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`AmbientLight`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> it is always </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`1`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `VisibilityTester`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Initialized visibility tester that holds the</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    shadow ray that must be traced to verify that</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    there are no occluding objects between the light and reference point.</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/ambient.jl#L36-L58" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_li-Tuple{Hikari.PointLight, Hikari.Interaction, GeometryBasics.Point{2, Float32}, Hikari.AbstractScene}" href="#Hikari.sample_li-Tuple{Hikari.PointLight, Hikari.Interaction, GeometryBasics.Point{2, Float32}, Hikari.AbstractScene}"><span class="jlbinding">Hikari.sample_li</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute radiance arriving at <code>ref.p</code> interaction point at <code>ref.time</code> time due to that light, assuming there are no occluding objects between them.</p><p><strong>Args</strong></p><ul><li><p><code>p::PointLight</code>: Light which illuminates the interaction point <code>ref</code>.</p></li><li><p><code>ref::Interaction</code>: Interaction point for which to compute radiance.</p></li><li><p><code>u::Point2f</code>: Sampling point that is ignored for <code>PointLight</code>, since it has no area.</p></li></ul><p><strong>Returns</strong></p><p><code>Tuple{S, Vec3f, Float32, VisibilityTester} where S &lt;: Spectrum</code>:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `S`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Computed radiance.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `Vec3f`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Incident direction to the light source </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`wi`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `Float32`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Probability density </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> the light sample that was taken.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    For </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`PointLight`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> it is always </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`1`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `VisibilityTester`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Initialized visibility tester that holds the</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    shadow ray that must be traced to verify that</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    there are no occluding objects between the light and reference point.</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/point.jl#L77-L99" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_li-Union{Tuple{S}, Tuple{Hikari.EnvironmentLight{S, E} where E&lt;:Hikari.EnvironmentMap{S, T} where T&lt;:AbstractMatrix{S}, Hikari.Interaction, GeometryBasics.Point{2, Float32}, Hikari.AbstractScene}} where S" href="#Hikari.sample_li-Union{Tuple{S}, Tuple{Hikari.EnvironmentLight{S, E} where E&lt;:Hikari.EnvironmentMap{S, T} where T&lt;:AbstractMatrix{S}, Hikari.Interaction, GeometryBasics.Point{2, Float32}, Hikari.AbstractScene}} where S"><span class="jlbinding">Hikari.sample_li</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute radiance arriving at interaction point from the environment light. Uses importance sampling based on environment map luminance.</p><p><strong>Args</strong></p><ul><li><p><code>e::EnvironmentLight</code>: Environment light.</p></li><li><p><code>ref::Interaction</code>: Interaction point for which to compute radiance.</p></li><li><p><code>u::Point2f</code>: Random sample for direction selection.</p></li></ul><p><strong>Returns</strong></p><p>Tuple of (radiance, incident direction, pdf, visibility tester)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/environment.jl#L37-L48" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_light_sampler-Tuple{AbstractVector{Float32}, AbstractVector{Float32}, AbstractVector{Int32}, Float32}" href="#Hikari.sample_light_sampler-Tuple{AbstractVector{Float32}, AbstractVector{Float32}, AbstractVector{Int32}, Float32}"><span class="jlbinding">Hikari.sample_light_sampler</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_light_sampler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(p, q, alias, u</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (light_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, pmf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>GPU-compatible light sampling using pre-computed alias table arrays.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/light-sampler.jl#L506-L510" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Any, Hikari.AmbientLight, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}" href="#Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Any, Hikari.AmbientLight, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.sample_light_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_light_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, lights, light</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AmbientLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, u</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Sample ambient light spectrally (uniform sphere). NOTE: Ambient light represents uniform illumination from all directions. We sample the full sphere uniformly - the BSDF evaluation will naturally give zero for directions below the surface, and cos_theta weighting handles the rest.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L191-L198" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Any, Hikari.DiffuseAreaLight, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}" href="#Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Any, Hikari.DiffuseAreaLight, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.sample_light_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_light_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, lights, light</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DiffuseAreaLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p, lambda, u)</span></span></code></pre></div><p>Sample a diffuse area light spectrally. Uniformly samples a point on the triangle and converts area PDF to solid angle PDF.</p><p>Following pbrt-v4&#39;s DiffuseAreaLight::SampleLi + Triangle::Sample (uniform area).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L227-L234" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Any, Hikari.DirectionalLight, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}" href="#Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Any, Hikari.DirectionalLight, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.sample_light_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_light_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, lights, light</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DirectionalLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, u</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Sample a directional light spectrally.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L107-L111" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Any, Hikari.EnvironmentLight, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}" href="#Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Any, Hikari.EnvironmentLight, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.sample_light_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_light_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, lights, light</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">EnvironmentLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, u</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Sample environment light spectrally with importance sampling.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L153-L157" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Any, Hikari.PointLight, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}" href="#Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Any, Hikari.PointLight, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.sample_light_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_light_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, lights, light</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PointLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, u</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Sample a point light spectrally.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L34-L38" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Any, Hikari.SpotLight, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}" href="#Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Any, Hikari.SpotLight, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.sample_light_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_light_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, lights, light</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SpotLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, u</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Sample a spotlight spectrally.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L61-L65" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Any, Hikari.SunLight, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}" href="#Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Any, Hikari.SunLight, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.sample_light_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_light_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, lights, light</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SunLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, u</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Sample a sun light spectrally.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L130-L134" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Raycore.StaticMultiTypeSet, Int32, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}" href="#Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Raycore.StaticMultiTypeSet, Int32, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.sample_light_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_light_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, lights</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, flat_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p, lambda, u)</span></span></code></pre></div><p>Sample a light from a StaticMultiTypeSet using a flat 1-based index. Converts flat index to SetKey internally.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L380-L385" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Raycore.StaticMultiTypeSet, Raycore.SetKey, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}" href="#Hikari.sample_light_spectral-Tuple{Hikari.RGBToSpectrumTable, Raycore.StaticMultiTypeSet, Raycore.SetKey, GeometryBasics.Point{3, Float32}, Hikari.SampledWavelengths{4}, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.sample_light_spectral</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_light_spectral</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, lights</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SetKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p, lambda, u)</span></span></code></pre></div><p>Sample a light from a StaticMultiTypeSet using type-stable dispatch via with_index.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/lights.jl#L364-L368" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_nanovdb_density-Tuple{Hikari.NanoVDBMedium, Any, GeometryBasics.Point{3, Float32}}" href="#Hikari.sample_nanovdb_density-Tuple{Hikari.NanoVDBMedium, Any, GeometryBasics.Point{3, Float32}}"><span class="jlbinding">Hikari.sample_nanovdb_density</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_nanovdb_density</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(medium</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NanoVDBMedium</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, media, p_world</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Sample the density at a world-space point using trilinear interpolation. Matches pbrt-v4&#39;s SampleFromVoxels&lt;TreeT, 1, false&gt; sampler.</p><p>The <code>media</code> parameter is used to deref TextureRef fields when NanoVDBMedium is stored in a MultiTypeSet.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/nanovdb.jl#L418-L425" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_piecewise_1d-Tuple{AbstractVector{Float32}, AbstractVector{Float32}, Float32, Float32, Int32, Float32, Float32}" href="#Hikari.sample_piecewise_1d-Tuple{AbstractVector{Float32}, AbstractVector{Float32}, Float32, Float32, Int32, Float32, Float32}"><span class="jlbinding">Hikari.sample_piecewise_1d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample 1D piecewise constant distribution (pbrt-v4 compatible). Returns (continuous_position, pdf, cell_index).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L748-L751" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_piecewise_2d-Tuple{Hikari.PiecewiseConstant2D, GeometryBasics.Point{2, Float32}}" href="#Hikari.sample_piecewise_2d-Tuple{Hikari.PiecewiseConstant2D, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.sample_piecewise_2d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample from the 2D distribution using inverse CDF sampling. Returns (point, pdf, grid_index).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L418-L421" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_segment!-Tuple{Hikari.RayMajorantSegment, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, UInt64, Any, Any, Hikari.VPMediumSampleWorkItem, Any, Raycore.SetKey, Any, Int32, Int32, GeometryBasics.Vec{3, Float32}}" href="#Hikari.sample_segment!-Tuple{Hikari.RayMajorantSegment, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, Hikari.SampledSpectrum{4}, UInt64, Any, Any, Hikari.VPMediumSampleWorkItem, Any, Raycore.SetKey, Any, Int32, Int32, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.sample_segment!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_segment!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(seg, T_maj_accum, beta, r_u, r_l, rng_state, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SampleTMajResult</span></span></code></pre></div><p>Sample interactions within a single majorant segment. Following pbrt-v4&#39;s inner loop of SampleT_maj. Uses deterministic LCG RNG for medium sampling (pbrt-v4 pattern).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/delta-tracking.jl#L297-L303" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_spectral_material" href="#Hikari.sample_spectral_material"><span class="jlbinding">Hikari.sample_spectral_material</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_spectral_material</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table, materials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">StaticMultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, idx, wo, ns, tfc, lambda, u, rng, regularize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Type-stable dispatch for spectral BSDF sampling. Returns SpectralBSDFSample from the appropriate material type.</p><p>When <code>regularize=true</code>, near-specular BSDFs will be roughened to reduce fireflies.</p><p>Arguments:</p><ul><li><code>tfc::TextureFilterContext</code>: Contains UV coordinates and screen-space derivatives for texture filtering.</li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-dispatch.jl#L12-L22" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_specular_reflection-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}} where S&lt;:Hikari.Spectrum" href="#Hikari.sample_specular_reflection-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}} where S&lt;:Hikari.Spectrum"><span class="jlbinding">Hikari.sample_specular_reflection</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute the direction of incident light wi, given an outgoing direction wo and return the value of BxDF for the pair of directions. <code>sample</code> parameter isn&#39;t needed for the δ-distribution.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/specular.jl#L44-L48" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_specular_transmission-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}} where S" href="#Hikari.sample_specular_transmission-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}}} where S"><span class="jlbinding">Hikari.sample_specular_transmission</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute the direction of incident light wi, given an outgoing direction wo and return the value of BxDF for the pair of directions. <code>sample</code> parameter isn&#39;t needed for the δ-distribution.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/specular.jl#L67-L71" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_tent-Tuple{Float32, Float32}" href="#Hikari.sample_tent-Tuple{Float32, Float32}"><span class="jlbinding">Hikari.sample_tent</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample tent distribution for one dimension. Uses inverse CDF sampling of the triangle distribution.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/filter.jl#L97-L100" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_visible_wavelengths-Tuple{Float32}" href="#Hikari.sample_visible_wavelengths-Tuple{Float32}"><span class="jlbinding">Hikari.sample_visible_wavelengths</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_visible_wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(u</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Sample a single wavelength using importance sampling for visible light. Inverse CDF of the hyperbolic secant squared distribution.</p><p>From pbrt-v4: lambda = 538 - 138.888889 * atanh(0.85691062 - 1.82750197 * u)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/spectral.jl#L202-L209" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_wavelengths_stratified-Tuple{NTuple{4, Float32}}" href="#Hikari.sample_wavelengths_stratified-Tuple{NTuple{4, Float32}}"><span class="jlbinding">Hikari.sample_wavelengths_stratified</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_wavelengths_stratified</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(u</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NTuple{4, Float32}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Wavelengths</span></span></code></pre></div><p>Sample 4 wavelengths with stratified sampling (one per stratum).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/spectral.jl#L157-L161" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_wavelengths_uniform-Tuple{Float32}" href="#Hikari.sample_wavelengths_uniform-Tuple{Float32}"><span class="jlbinding">Hikari.sample_wavelengths_uniform</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_wavelengths_uniform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(u</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Wavelengths</span></span></code></pre></div><p>Sample 4 wavelengths using hero wavelength sampling with stratified offsets. This gives better spectral coverage than independent uniform samples.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/spectral.jl#L133-L138" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_wavelengths_visible-Tuple{Float32}" href="#Hikari.sample_wavelengths_visible-Tuple{Float32}"><span class="jlbinding">Hikari.sample_wavelengths_visible</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sample_wavelengths_visible</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(u</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Wavelengths</span></span></code></pre></div><p>Sample 4 wavelengths using importance sampling with hero wavelength method. Uses pbrt-v4&#39;s visible wavelength distribution for reduced variance.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/spectral.jl#L215-L220" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_σ_a-Tuple{Any, Hikari.RGBGridMedium, GeometryBasics.Point{3, Float32}}" href="#Hikari.sample_σ_a-Tuple{Any, Hikari.RGBGridMedium, GeometryBasics.Point{3, Float32}}"><span class="jlbinding">Hikari.sample_σ_a</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample σ_a at a point using trilinear interpolation. Returns default RGBSpectrum(1.0) if σ_a_grid is nothing.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1248-L1251" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sample_σ_s-Tuple{Any, Hikari.RGBGridMedium, GeometryBasics.Point{3, Float32}}" href="#Hikari.sample_σ_s-Tuple{Any, Hikari.RGBGridMedium, GeometryBasics.Point{3, Float32}}"><span class="jlbinding">Hikari.sample_σ_s</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sample σ_s at a point using trilinear interpolation. Returns default RGBSpectrum(1.0) if σ_s_grid is nothing.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/media.jl#L1257-L1260" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sampler_hash" href="#Hikari.sampler_hash"><span class="jlbinding">Hikari.sampler_hash</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sampler_hash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, py</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sample_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, seed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt32</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UInt64</span></span></code></pre></div><p>Hash function for stratified sampler, matching pbrt-v4&#39;s Hash() behavior. Produces deterministic, well-distributed hash for (pixel, sample, dimension) tuples.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/stratified.jl#L40-L45" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sampler_hash_2d-NTuple{4, Int32}" href="#Hikari.sampler_hash_2d-NTuple{4, Int32}"><span class="jlbinding">Hikari.sampler_hash_2d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sampler_hash_2d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, py</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sample_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UInt64</span></span></code></pre></div><p>Simplified hash for 2D samples where we need two correlated values.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/stratified.jl#L58-L62" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.save_nanovdb-Tuple{String, Array{Float32, 3}, Any, Any}" href="#Hikari.save_nanovdb-Tuple{String, Array{Float32, 3}, Any, Any}"><span class="jlbinding">Hikari.save_nanovdb</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">save_nanovdb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filepath, data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Array{Float32,3}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, origin, extent)</span></span></code></pre></div><p>Build a NanoVDB tree from a dense 3D array and save to file.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/nanovdb.jl#L938-L942" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.save_nanovdb-Tuple{String, Vector{UInt8}, NamedTuple}" href="#Hikari.save_nanovdb-Tuple{String, Vector{UInt8}, NamedTuple}"><span class="jlbinding">Hikari.save_nanovdb</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">save_nanovdb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filepath, buffer, metadata)</span></span></code></pre></div><p>Save a NanoVDB buffer (from <code>build_nanovdb_from_dense</code>) to a <code>.nanovdb</code> file that can be loaded back with <code>NanoVDBMedium(filepath; ...)</code>.</p><p>Prepends GridData (672 bytes) + TreeData (64 bytes) header, compresses with zlib.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/nanovdb.jl#L860-L867" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.save_srgb_table_binary-Tuple{String, Hikari.RGBToSpectrumTable}" href="#Hikari.save_srgb_table_binary-Tuple{String, Hikari.RGBToSpectrumTable}"><span class="jlbinding">Hikari.save_srgb_table_binary</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Save the sRGB spectrum table to raw binary format</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L414" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.shade-Tuple{Hikari.Emissive, Raycore.RayDifferentials, Hikari.SurfaceInteraction, Hikari.Scene, Hikari.RGBSpectrum, Int32, Int32}" href="#Hikari.shade-Tuple{Hikari.Emissive, Raycore.RayDifferentials, Hikari.SurfaceInteraction, Hikari.Scene, Hikari.RGBSpectrum, Int32, Int32}"><span class="jlbinding">Hikari.shade</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">shade</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Emissive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ray, si, scene, beta, depth, max_depth) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RGBSpectrum</span></span></code></pre></div><p>Shading for emissive material returns the emission directly. Emissive materials don&#39;t reflect light, they only emit.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/emissive.jl#L125-L130" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.shade-Union{Tuple{S}, Tuple{Hikari.CloudVolume, Raycore.RayDifferentials, Hikari.SurfaceInteraction, S, Hikari.RGBSpectrum, Int32, Int32}} where S&lt;:Hikari.AbstractScene" href="#Hikari.shade-Union{Tuple{S}, Tuple{Hikari.CloudVolume, Raycore.RayDifferentials, Hikari.SurfaceInteraction, S, Hikari.RGBSpectrum, Int32, Int32}} where S&lt;:Hikari.AbstractScene"><span class="jlbinding">Hikari.shade</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">shade</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cloud</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CloudVolume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ray, si, scene, beta) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RGBSpectrum</span></span></code></pre></div><p>Shade a ray that hit a volume material using ray marching with single scattering. The SurfaceInteraction gives us the entry point into the volume.</p><p>This version checks for scene intersections DURING ray marching, so objects inside or in front of the volume are properly rendered with correct transmittance.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/volume.jl#L263-L271" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.shade-Union{Tuple{S}, Tuple{Hikari.Material, Raycore.RayDifferentials, Hikari.SurfaceInteraction, S, Hikari.RGBSpectrum, Int32, Int32}} where S&lt;:Hikari.AbstractScene" href="#Hikari.shade-Union{Tuple{S}, Tuple{Hikari.Material, Raycore.RayDifferentials, Hikari.SurfaceInteraction, S, Hikari.RGBSpectrum, Int32, Int32}} where S&lt;:Hikari.AbstractScene"><span class="jlbinding">Hikari.shade</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">shade</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(material</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Material</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ray, si, scene, beta, depth, max_depth) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RGBSpectrum</span></span></code></pre></div><p>Compute direct lighting and specular bounces for a surface hit. This is the generic implementation that works for all material types.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/material.jl#L250-L255" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sigmoid-Tuple{Float32}" href="#Hikari.sigmoid-Tuple{Float32}"><span class="jlbinding">Hikari.sigmoid</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Sigmoid function for spectrum evaluation</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L23" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sin2_theta-Tuple{GeometryBasics.Vec{3, Float32}}" href="#Hikari.sin2_theta-Tuple{GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.sin2_theta</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sin2_theta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Get sin²(θ) of a direction in local coordinates.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3605-L3609" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sin_phi-Tuple{GeometryBasics.Vec{3, Float32}}" href="#Hikari.sin_phi-Tuple{GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.sin_phi</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sin_phi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Get sin(φ) of a direction in local coordinates (matches pbrt-v4&#39;s SinPhi).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3639-L3643" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sin_theta-Tuple{GeometryBasics.Vec{3, Float32}}" href="#Hikari.sin_theta-Tuple{GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.sin_theta</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sin_theta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Get sin(θ) of a direction in local coordinates.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3612-L3616" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sobol_sample-Tuple{Int64, Int32, UInt32, Any}" href="#Hikari.sobol_sample-Tuple{Int64, Int32, UInt32, Any}"><span class="jlbinding">Hikari.sobol_sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sobol_sample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dimension</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, scramble_seed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sobol_matrices) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Generate a single Sobol sample for the given index and dimension. Reference: pbrt-v4/src/pbrt/util/lowdiscrepancy.h SobolSample (lines 167-180)</p><p>Arguments:</p><ul><li><p>a: Sample index (0-based)</p></li><li><p>dimension: Sobol dimension (0-based, max NSOBOL_DIMENSIONS-1)</p></li><li><p>scramble_seed: Seed for FastOwen scrambling</p></li><li><p>sobol_matrices: The Sobol generator matrices array (must be GPU-accessible)</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L96-L107" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sobol_sample_unscrambled-Tuple{Int64, Int32}" href="#Hikari.sobol_sample_unscrambled-Tuple{Int64, Int32}"><span class="jlbinding">Hikari.sobol_sample_unscrambled</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sobol_sample_unscrambled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dimension</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Generate an unscrambled Sobol sample (for debugging/comparison).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L132-L136" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.spawn_spectral_ray-Tuple{Hikari.PWMaterialEvalWorkItem, GeometryBasics.Vec{3, Float32}, Hikari.SampledSpectrum{4}, Bool, Float32, Float32}" href="#Hikari.spawn_spectral_ray-Tuple{Hikari.PWMaterialEvalWorkItem, GeometryBasics.Vec{3, Float32}, Hikari.SampledSpectrum{4}, Bool, Float32, Float32}"><span class="jlbinding">Hikari.spawn_spectral_ray</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">spawn_spectral_ray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PWMaterialEvalWorkItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, wi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, new_beta</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SpectralRadiance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                   is_specular</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, pdf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, eta_scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PWRayWorkItem</span></span></code></pre></div><p>Create a new ray work item for indirect lighting from a material evaluation.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/physical-wavefront/material-dispatch.jl#L198-L203" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.spectral_to_linear_rgb-Tuple{Hikari.CIEXYZTable, Hikari.SampledSpectrum{4}, Hikari.SampledWavelengths{4}}" href="#Hikari.spectral_to_linear_rgb-Tuple{Hikari.CIEXYZTable, Hikari.SampledSpectrum{4}, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.spectral_to_linear_rgb</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">spectral_to_linear_rgb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CIEXYZTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, L</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SpectralRadiance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Convert spectral radiance to linear RGB (no gamma):</p><ol><li><p>Convert to XYZ using color matching functions</p></li><li><p>Transform XYZ to linear sRGB using standard matrix (D65 white point)</p></li></ol><p>This matches pbrt-v4&#39;s RGBFilm::ToSensorRGB → outputRGBFromSensorRGB pipeline.</p><p>The light sources use <code>uplift_rgb_illuminant</code> which multiplies by D65 illuminant spectrum (RGBIlluminantSpectrum), so no chromatic adaptation is needed here. D65-shaped spectra integrated under CIE XYZ naturally produce the correct white balance when transformed using the standard sRGB matrix.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L663-L676" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.spectral_to_linear_rgb_passthrough-Tuple{Hikari.SampledSpectrum{4}}" href="#Hikari.spectral_to_linear_rgb_passthrough-Tuple{Hikari.SampledSpectrum{4}}"><span class="jlbinding">Hikari.spectral_to_linear_rgb_passthrough</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">spectral_to_linear_rgb_passthrough</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(L</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SpectralRadiance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Pseudo-spectral passthrough: read RGB directly from spectral channels. For use when <code>uplift_rgb(...; method=:passthrough)</code> was used to store RGB directly. This matches PbrtWavefront behavior and avoids spectral-to-XYZ conversion noise.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L682-L688" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.spectral_to_srgb-Tuple{Hikari.CIEXYZTable, Hikari.SampledSpectrum{4}, Hikari.SampledWavelengths{4}}" href="#Hikari.spectral_to_srgb-Tuple{Hikari.CIEXYZTable, Hikari.SampledSpectrum{4}, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.spectral_to_srgb</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">spectral_to_srgb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CIEXYZTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, L</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SpectralRadiance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Convert spectral radiance to sRGB:</p><ol><li><p>Convert to XYZ using color matching functions</p></li><li><p>Transform XYZ to linear sRGB using standard matrix (D65 white point)</p></li><li><p>Apply sRGB gamma curve</p></li></ol><p>This matches pbrt-v4&#39;s RGBFilm pipeline. Light sources use <code>uplift_rgb_illuminant</code> which multiplies by D65 illuminant spectrum, so no chromatic adaptation is needed.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L642-L652" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.spectral_to_xyz-Tuple{Hikari.CIEXYZTable, Hikari.SampledSpectrum{4}, Hikari.SampledWavelengths{4}}" href="#Hikari.spectral_to_xyz-Tuple{Hikari.CIEXYZTable, Hikari.SampledSpectrum{4}, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.spectral_to_xyz</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">spectral_to_xyz</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CIEXYZTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, L</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SpectralRadiance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Convert spectral radiance to CIE XYZ using the pbrt-v4 algorithm.</p><p>The formula is: XYZ = (1/CIE_Y_integral) * Average(SafeDiv(CMF * L, pdf))</p><p>where CMF is the color matching function and pdf is the wavelength sampling PDF.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L416-L425" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.spectrum_to_photometric-Tuple{Hikari.RGBSpectrum}" href="#Hikari.spectrum_to_photometric-Tuple{Hikari.RGBSpectrum}"><span class="jlbinding">Hikari.spectrum_to_photometric</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">spectrum_to_photometric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Spectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute photometric luminance of a spectrum, matching pbrt-v4&#39;s SpectrumToPhotometric.</p><p>For RGBIlluminantSpectrum, this extracts only the D65 illuminant component (ignoring the RGB multiplier), matching pbrt-v4&#39;s behavior where SpectrumToPhotometric extracts s.Illuminant() first.</p><p>This is used for light normalization: <code>scale = 1 / spectrum_to_photometric(spectrum)</code></p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L597-L607" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.specular_bounce-Union{Tuple{S}, Tuple{Any, Hikari.BSDF, Raycore.RayDifferentials, Hikari.SurfaceInteraction, S, Hikari.RGBSpectrum, Int32, Int32}} where S&lt;:Hikari.AbstractScene" href="#Hikari.specular_bounce-Union{Tuple{S}, Tuple{Any, Hikari.BSDF, Raycore.RayDifferentials, Hikari.SurfaceInteraction, S, Hikari.RGBSpectrum, Int32, Int32}} where S&lt;:Hikari.AbstractScene"><span class="jlbinding">Hikari.specular_bounce</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">specular_bounce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(type, bsdf, ray, si, scene, beta, depth, max_depth) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RGBSpectrum</span></span></code></pre></div><p>Compute specular reflection or transmission contribution by tracing a bounce ray.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/material.jl#L154-L158" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.specular_differentials-Tuple{Hikari.Reflect, Vararg{Any, 6}}" href="#Hikari.specular_differentials-Tuple{Hikari.Reflect, Vararg{Any, 6}}"><span class="jlbinding">Hikari.specular_differentials</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute ray differentials for specular reflection.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/material.jl#L201-L203" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.specular_differentials-Tuple{Hikari.Transmit, Vararg{Any, 6}}" href="#Hikari.specular_differentials-Tuple{Hikari.Transmit, Vararg{Any, 6}}"><span class="jlbinding">Hikari.specular_differentials</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Compute ray differentials for specular transmission.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/material.jl#L220-L222" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.srgb_gamma_to_linear-Tuple{Float32}" href="#Hikari.srgb_gamma_to_linear-Tuple{Float32}"><span class="jlbinding">Hikari.srgb_gamma_to_linear</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">srgb_gamma_to_linear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Remove sRGB gamma curve from an sRGB value to get linear RGB.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L629-L633" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.start_pixel-Tuple{Hikari.Sampler, GeometryBasics.Point{2, Float32}}" href="#Hikari.start_pixel-Tuple{Hikari.Sampler, GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.start_pixel</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Other samplers are required to explicitly call this, in their respective implementations.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sampler.jl#L49-L52" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.stratified_sample_1d-NTuple{4, Int32}" href="#Hikari.stratified_sample_1d-NTuple{4, Int32}"><span class="jlbinding">Hikari.stratified_sample_1d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">stratified_sample_1d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, py</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sample_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Generate a deterministic 1D sample in [0, 1) for the given pixel, sample index, and dimension. This matches pbrt-v4&#39;s IndependentSampler behavior.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/stratified.jl#L74-L79" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.stratified_sample_2d-NTuple{4, Int32}" href="#Hikari.stratified_sample_2d-NTuple{4, Int32}"><span class="jlbinding">Hikari.stratified_sample_2d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">stratified_sample_2d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, py</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sample_idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Tuple{Float32, Float32}</span></span></code></pre></div><p>Generate a deterministic 2D sample in [0, 1)² for the given pixel, sample index, and dimension. Uses two consecutive dimensions for the two components.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/stratified.jl#L86-L91" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.sunsky_to_envlight-Tuple{}" href="#Hikari.sunsky_to_envlight-Tuple{}"><span class="jlbinding">Hikari.sunsky_to_envlight</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sunsky_to_envlight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; direction, intensity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, turbidity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.5f0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (EnvironmentLight, SunLight)</span></span></code></pre></div><p>Pre-bake the Hosek-Wilkie spectral sky model into an equal-area EnvironmentMap and create a separate SunLight for the sun disk. Matches pbrt-v4&#39;s <code>makesky</code> approach: evaluate the spectral model at 13 wavelengths, convert to XYZ via CIE color matching functions (dividing by CIE_Y_integral), then to sRGB for storage.</p><p><strong>Arguments</strong></p><ul><li><p><code>direction::Vec3f</code>: Direction TO the sun (normalized internally)</p></li><li><p><code>intensity::Float32 = 1f0</code>: Overall brightness multiplier (scale parameter, default 1.0)</p></li><li><p><code>turbidity::Float32 = 2.5f0</code>: Atmospheric turbidity (1=clear, 10=hazy)</p></li><li><p><code>ground_albedo::RGBSpectrum = RGBSpectrum(0.3f0)</code>: Ground color below horizon</p></li><li><p><code>ground_enabled::Bool = true</code>: Whether to show ground below horizon</p></li><li><p><code>resolution::Int = 512</code>: Resolution of equal-area square map</p></li></ul><p><strong>Returns</strong></p><p>A tuple of <code>(EnvironmentLight, SunLight)</code> to be added to the scene.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/lights/sun_sky.jl#L339-L357" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.surface_direct_lighting_inner!-Tuple{Any, Hikari.VPMaterialEvalWorkItem, Any, Any, Any, Any, Any, Int32, Int32, Int32, Any, Any, Any, Int32}" href="#Hikari.surface_direct_lighting_inner!-Tuple{Any, Hikari.VPMaterialEvalWorkItem, Any, Any, Any, Any, Any, Int32, Int32, Int32, Any, Any, Any, Int32}"><span class="jlbinding">Hikari.surface_direct_lighting_inner!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Inner function for surface direct lighting - can use return statements.</p><p>Uses BVH light sampler for spatially-aware importance sampling. Nearby lights get higher probability than distant ones (pbrt-v4&#39;s BVHLightSampler).</p><p>Now uses pre-computed Sobol samples from pixel_samples (pbrt-v4 RaySamples style).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/surface-eval.jl#L243-L250" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.swap_ray_queues!-Tuple{Hikari.VolPathState}" href="#Hikari.swap_ray_queues!-Tuple{Hikari.VolPathState}"><span class="jlbinding">Hikari.swap_ray_queues!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Swap the ray queue selector.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath-state.jl#L197" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.tan2_theta-Tuple{GeometryBasics.Vec{3, Float32}}" href="#Hikari.tan2_theta-Tuple{GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.tan2_theta</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">tan2_theta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Get tan²(θ) of a direction in local coordinates.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3619-L3623" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.terminate_secondary_wavelengths-Tuple{Hikari.SampledWavelengths{4}}" href="#Hikari.terminate_secondary_wavelengths-Tuple{Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.terminate_secondary_wavelengths</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">terminate_secondary_wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Wavelengths</span></span></code></pre></div><p>Set PDF to zero for secondary wavelengths when a wavelength-dependent event occurs (e.g., refraction with dispersion). This indicates that only the hero wavelength (first) should contribute to the pixel.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/spectral.jl#L251-L257" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.to_grid-Tuple{GeometryBasics.Point{3, Float32}, Raycore.Bounds3, GeometryBasics.Point3}" href="#Hikari.to_grid-Tuple{GeometryBasics.Point{3, Float32}, Raycore.Bounds3, GeometryBasics.Point3}"><span class="jlbinding">Hikari.to_grid</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Calculate indices of a point <code>p</code> in grid constrained by <code>bounds</code>.</p><p>Computed indices are in [0, resolution), which is the correct input for <code>hash</code>.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/sppm.jl#L529-L533" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.total_size-Union{Tuple{Hikari.MultiMaterialQueue{N}}, Tuple{N}} where N" href="#Hikari.total_size-Union{Tuple{Hikari.MultiMaterialQueue{N}}, Tuple{N}} where N"><span class="jlbinding">Hikari.total_size</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Get total size across all queues</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/multi-material-eval.jl#L49" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.trace_shadow_transmittance-Tuple{Any, Any, Any, Any, Any, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Hikari.SampledWavelengths{4}, Raycore.SetKey}" href="#Hikari.trace_shadow_transmittance-Tuple{Any, Any, Any, Any, Any, GeometryBasics.Point{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Hikari.SampledWavelengths{4}, Raycore.SetKey}"><span class="jlbinding">Hikari.trace_shadow_transmittance</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">trace_shadow_transmittance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(accel, media_interfaces, media, rgb2spec_table, origin, dir, t_max, lambda, medium_idx)</span></span></code></pre></div><p>Trace a shadow ray computing transmittance through media and transmissive boundaries. Returns (T_ray, r_u, r_l, visible) where:</p><ul><li><p>T_ray: spectral transmittance</p></li><li><p>r_u, r_l: MIS weight accumulators for combining with path weights</p></li><li><p>visible: false if ray hits an opaque surface</p></li></ul><p>Following pbrt-v4&#39;s TraceTransmittance: transmissive surfaces (MediumInterface) let the ray through, while opaque surfaces block it. The final contribution is computed as: Ld * T_ray / average(path_r_u * r_u + path_r_l * r_l)</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/intersection.jl#L289-L301" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.trowbridge_reitz_d-Tuple{GeometryBasics.Vec{3, Float32}, Float32, Float32}" href="#Hikari.trowbridge_reitz_d-Tuple{GeometryBasics.Vec{3, Float32}, Float32, Float32}"><span class="jlbinding">Hikari.trowbridge_reitz_d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">trowbridge_reitz_d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(wm, alpha_x, alpha_y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Evaluate the TrowbridgeReitz D (normal distribution function) at microfacet normal wm. Matches pbrt-v4&#39;s TrowbridgeReitzDistribution:😄(wm).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3768-L3773" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.trowbridge_reitz_d_pdf-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Float32}" href="#Hikari.trowbridge_reitz_d_pdf-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Float32}"><span class="jlbinding">Hikari.trowbridge_reitz_d_pdf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">trowbridge_reitz_d_pdf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w, wm, alpha_x, alpha_y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Evaluate the visible normal distribution D(w, wm) for PDF computation. Matches pbrt-v4&#39;s D(w, wm) = G1(w) / AbsCosTheta(w) * D(wm) * AbsDot(w, wm).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3814-L3819" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.trowbridge_reitz_effectively_smooth-Tuple{Float32, Float32}" href="#Hikari.trowbridge_reitz_effectively_smooth-Tuple{Float32, Float32}"><span class="jlbinding">Hikari.trowbridge_reitz_effectively_smooth</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">trowbridge_reitz_effectively_smooth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(alpha_x, alpha_y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Bool</span></span></code></pre></div><p>Check if the distribution is effectively smooth (matches pbrt-v4&#39;s EffectivelySmooth).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3760-L3764" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.trowbridge_reitz_g-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Float32}" href="#Hikari.trowbridge_reitz_g-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Float32}"><span class="jlbinding">Hikari.trowbridge_reitz_g</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">trowbridge_reitz_g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(wo, wi, alpha_x, alpha_y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute G(wo, wi) Smith masking-shadowing function (matches pbrt-v4&#39;s G).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3806-L3810" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.trowbridge_reitz_g1-Tuple{GeometryBasics.Vec{3, Float32}, Float32, Float32}" href="#Hikari.trowbridge_reitz_g1-Tuple{GeometryBasics.Vec{3, Float32}, Float32, Float32}"><span class="jlbinding">Hikari.trowbridge_reitz_g1</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">trowbridge_reitz_g1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w, alpha_x, alpha_y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute G1(w) Smith masking function (matches pbrt-v4&#39;s G1).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3798-L3802" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.trowbridge_reitz_lambda-Tuple{GeometryBasics.Vec{3, Float32}, Float32, Float32}" href="#Hikari.trowbridge_reitz_lambda-Tuple{GeometryBasics.Vec{3, Float32}, Float32, Float32}"><span class="jlbinding">Hikari.trowbridge_reitz_lambda</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">trowbridge_reitz_lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w, alpha_x, alpha_y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute Lambda(w) for Smith masking-shadowing (matches pbrt-v4&#39;s Lambda).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3785-L3789" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.trowbridge_reitz_pdf-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Float32}" href="#Hikari.trowbridge_reitz_pdf-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32, Float32}"><span class="jlbinding">Hikari.trowbridge_reitz_pdf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">trowbridge_reitz_pdf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w, wm, alpha_x, alpha_y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Compute PDF for visible normal sampling (matches pbrt-v4&#39;s PDF).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3825-L3829" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.trowbridge_reitz_sample_wm-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}, Float32, Float32}" href="#Hikari.trowbridge_reitz_sample_wm-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Point{2, Float32}, Float32, Float32}"><span class="jlbinding">Hikari.trowbridge_reitz_sample_wm</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">trowbridge_reitz_sample_wm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w, u, alpha_x, alpha_y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Sample visible normal from TrowbridgeReitz distribution (matches pbrt-v4&#39;s Sample_wm).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3833-L3837" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.uint32_to_bytes-Tuple{UInt32}" href="#Hikari.uint32_to_bytes-Tuple{UInt32}"><span class="jlbinding">Hikari.uint32_to_bytes</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uint32_to_bytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NTuple{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,UInt8}</span></span></code></pre></div><p>GPU-compatible conversion of UInt32 to bytes.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/stratified.jl#L26-L30" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.uint64_to_bytes-Tuple{UInt64}" href="#Hikari.uint64_to_bytes-Tuple{UInt64}"><span class="jlbinding">Hikari.uint64_to_bytes</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uint64_to_bytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NTuple{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,UInt8}</span></span></code></pre></div><p>GPU-compatible conversion of UInt64 to bytes.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L665-L669" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.uplift_rgb-Tuple{Hikari.RGBSpectrum, Hikari.SampledWavelengths{4}}" href="#Hikari.uplift_rgb-Tuple{Hikari.RGBSpectrum, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.uplift_rgb</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uplift_rgb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rgb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; method</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:sigmoid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Convert Hikari RGBSpectrum to spectral radiance at given wavelengths. Uses global table - not GPU-compatible. Use the version with explicit table for GPU kernels.</p><p>Methods:</p><ul><li><p><code>:sigmoid</code> - Smooth sigmoid polynomial (pbrt-v4 style, lowest variance, default)</p></li><li><p><code>:simple</code> - Fast piecewise linear</p></li><li><p><code>:smits</code> - Smits&#39; method</p></li><li><p><code>:passthrough</code> - Store RGB directly as first 3 spectral channels (pseudo-spectral, fastest)</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L314-L325" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.uplift_rgb-Tuple{Hikari.RGBToSpectrumTable, Hikari.RGBSpectrum, Hikari.SampledWavelengths{4}}" href="#Hikari.uplift_rgb-Tuple{Hikari.RGBToSpectrumTable, Hikari.RGBSpectrum, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.uplift_rgb</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uplift_rgb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBToSpectrumTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, rgb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>GPU-compatible version that takes an explicit table parameter. Uses sigmoid polynomial method (pbrt-v4 style, lowest variance).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L342-L347" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.uplift_rgb_illuminant-Tuple{Hikari.RGBToSpectrumTable, Hikari.RGBSpectrum, Hikari.SampledWavelengths{4}}" href="#Hikari.uplift_rgb_illuminant-Tuple{Hikari.RGBToSpectrumTable, Hikari.RGBSpectrum, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.uplift_rgb_illuminant</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uplift_rgb_illuminant</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBToSpectrumTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, rgb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uplift_rgb_illuminant</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBToSpectrumTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBIlluminantSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Convert RGB to spectral radiance for illuminants (light sources, environment maps). Following pbrt-v4&#39;s RGBIlluminantSpectrum which multiplies by the D65 illuminant spectrum.</p><p>Use this for:</p><ul><li><p>Environment maps (ImageInfiniteLight)</p></li><li><p>Any RGB-specified light source</p></li></ul><p>Do NOT use for:</p><ul><li><p>Material reflectance/albedo (use uplift_rgb instead)</p></li><li><p>Emission from non-illuminant sources</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L540-L554" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.uplift_rgb_unbounded-Tuple{Hikari.RGBSpectrum, Hikari.SampledWavelengths{4}}" href="#Hikari.uplift_rgb_unbounded-Tuple{Hikari.RGBSpectrum, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.uplift_rgb_unbounded</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uplift_rgb_unbounded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rgb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Convert Hikari RGBSpectrum to spectral radiance for emission/illumination. Uses sigmoid polynomial method with scaling for unbounded values. Uses global table - not GPU-compatible. Use the version with explicit table for GPU kernels.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L352-L358" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.uplift_rgb_unbounded-Tuple{Hikari.RGBToSpectrumTable, Hikari.RGBSpectrum, Hikari.SampledWavelengths{4}}" href="#Hikari.uplift_rgb_unbounded-Tuple{Hikari.RGBToSpectrumTable, Hikari.RGBSpectrum, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.uplift_rgb_unbounded</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uplift_rgb_unbounded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBToSpectrumTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, rgb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBSpectrum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>GPU-compatible version that takes an explicit table parameter.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L363-L367" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.uplift_scalar-Tuple{Float32, Hikari.SampledWavelengths{4}}" href="#Hikari.uplift_scalar-Tuple{Float32, Hikari.SampledWavelengths{4}}"><span class="jlbinding">Hikari.uplift_scalar</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uplift_scalar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Wavelengths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpectralRadiance</span></span></code></pre></div><p>Convert a scalar value to uniform spectral radiance.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/uplift.jl#L372-L376" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.uv_to_direction_equal_area-Tuple{GeometryBasics.Point{2, Float32}, StaticArraysCore.SMatrix{3, 3, Float32, 9}}" href="#Hikari.uv_to_direction_equal_area-Tuple{GeometryBasics.Point{2, Float32}, StaticArraysCore.SMatrix{3, 3, Float32, 9}}"><span class="jlbinding">Hikari.uv_to_direction_equal_area</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uv_to_direction_equal_area</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(uv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, rotation</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Mat3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Convert UV to direction using equal-area (octahedral) mapping. Inverse of direction_to_uv_equal_area.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/environment_map.jl#L208-L213" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.uv_to_direction_equirect-Tuple{GeometryBasics.Point{2, Float32}, StaticArraysCore.SMatrix{3, 3, Float32, 9}}" href="#Hikari.uv_to_direction_equirect-Tuple{GeometryBasics.Point{2, Float32}, StaticArraysCore.SMatrix{3, 3, Float32, 9}}"><span class="jlbinding">Hikari.uv_to_direction_equirect</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Convert equirectangular UV coordinates to a direction vector. Inverse of direction_to_uv_equirect.</p><p>The rotation matrix transforms from render space to light/map space. We apply the rotation (not inverse) to transform from light space back to render space.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/environment_map.jl#L264-L270" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.visible_wavelengths_pdf-Tuple{Float32}" href="#Hikari.visible_wavelengths_pdf-Tuple{Float32}"><span class="jlbinding">Hikari.visible_wavelengths_pdf</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">visible_wavelengths_pdf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>PDF for importance-sampled visible wavelengths, centered at 538nm. This distribution reduces variance by sampling more where human vision is sensitive.</p><p>From pbrt-v4: PDF = 0.0039398042 / cosh²(0.0072 * (lambda - 538))</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/spectral.jl#L184-L191" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.vp_accumulate_to_rgb_kernel!-Tuple{Any}" href="#Hikari.vp_accumulate_to_rgb_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.vp_accumulate_to_rgb_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vp_accumulate_to_rgb_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Accumulate spectral radiance to RGB with filter weight support. Following pbrt-v4&#39;s film accumulation pattern:</p><ul><li><p>Convert spectral L to XYZ using CIE matching functions</p></li><li><p>Convert XYZ to linear sRGB</p></li><li><p>Apply maxComponentValue clamping for firefly suppression</p></li><li><p>Accumulate weighted RGB: rgbSum += weight * rgb</p></li><li><p>Accumulate weight: weightSum += weight</p></li></ul><p>Note: Sensor simulation (imaging_ratio, white balance) is applied in postprocessing, not here. This matches pbrt-v4&#39;s architecture where the film stores raw linear HDR values and the sensor conversion happens at output time.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath.jl#L320-L334" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.vp_compute_geometric_normal-Tuple{Any}" href="#Hikari.vp_compute_geometric_normal-Tuple{Any}"><span class="jlbinding">Hikari.vp_compute_geometric_normal</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_geometric_normal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(primitive) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Compute geometric normal from a triangle primitive.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/intersection.jl#L8-L12" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.vp_compute_partial_derivatives-Tuple{Any}" href="#Hikari.vp_compute_partial_derivatives-Tuple{Any}"><span class="jlbinding">Hikari.vp_compute_partial_derivatives</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vp_compute_partial_derivatives</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(primitive) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (dpdu, dpdv)</span></span></code></pre></div><p>Compute position partial derivatives (∂p/∂u, ∂p/∂v) from triangle vertices and UVs. These are used for texture filtering and tangent space construction. Following pbrt-v4&#39;s Triangle::InteractionFromIntersection.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/intersection.jl#L39-L45" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.vp_compute_shading_normal-Tuple{Any, Any, GeometryBasics.Vec{3, Float32}}" href="#Hikari.vp_compute_shading_normal-Tuple{Any, Any, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.vp_compute_shading_normal</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vp_compute_shading_normal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(primitive, barycentric, geometric_normal) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Compute interpolated shading normal from vertex normals.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/intersection.jl#L124-L128" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.vp_compute_shading_tangents-Tuple{Any, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}" href="#Hikari.vp_compute_shading_tangents-Tuple{Any, Any, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.vp_compute_shading_tangents</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vp_compute_shading_tangents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(primitive, barycentric, ns, dpdu, dpdv) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (dpdus, dpdvs)</span></span></code></pre></div><p>Compute shading tangent vectors from vertex tangents or geometric derivatives. Following pbrt-v4&#39;s approach: use vertex tangents if available, otherwise orthonormalize geometric dpdu/dpdv to the shading normal.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/intersection.jl#L77-L83" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.vp_compute_surface_geometry-NTuple{5, Any}" href="#Hikari.vp_compute_surface_geometry-NTuple{5, Any}"><span class="jlbinding">Hikari.vp_compute_surface_geometry</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vp_compute_surface_geometry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(primitive, barycentric, ray) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NamedTuple</span></span></code></pre></div><p>Compute all surface geometry needed for material evaluation. Returns (pi, n, dpdu, dpdv, ns, dpdus, dpdvs, uv).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/intersection.jl#L152-L157" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.vp_compute_uv_barycentric-Tuple{Any, Any}" href="#Hikari.vp_compute_uv_barycentric-Tuple{Any, Any}"><span class="jlbinding">Hikari.vp_compute_uv_barycentric</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vp_compute_uv_barycentric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(primitive, barycentric) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Point2f</span></span></code></pre></div><p>Compute UV coordinates using barycentric coordinates from ray intersection.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/intersection.jl#L23-L27" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.vp_finalize_film_kernel!-Tuple{Any}" href="#Hikari.vp_finalize_film_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.vp_finalize_film_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vp_finalize_film_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Finalize film by dividing weighted RGB sum by weight sum. Following pbrt-v4&#39;s RGBFilm::GetPixelRGB:</p><ul><li>rgb = rgbSum / weightSum (if weightSum != 0)</li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath.jl#L386-L392" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.vp_generate_camera_rays_kernel!-Tuple{Any}" href="#Hikari.vp_generate_camera_rays_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.vp_generate_camera_rays_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vp_generate_camera_rays_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Generate camera rays with per-pixel wavelength sampling and filter weight computation. Following pbrt-v4&#39;s GetCameraSample: samples the filter, computes offset and weight.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath.jl#L119-L124" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.vp_generate_ray_samples!-Tuple{Any, Hikari.VolPathState, Int32, Int32, Hikari.SobolRNG}" href="#Hikari.vp_generate_ray_samples!-Tuple{Any, Hikari.VolPathState, Int32, Int32, Hikari.SobolRNG}"><span class="jlbinding">Hikari.vp_generate_ray_samples!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vp_generate_ray_samples!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, state, sample_idx, depth, sobol_rng)</span></span></code></pre></div><p>Generate pre-computed Sobol samples for all active rays at the current depth.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath.jl#L281-L285" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.vp_generate_ray_samples_kernel!-Tuple{Any}" href="#Hikari.vp_generate_ray_samples_kernel!-Tuple{Any}"><span class="jlbinding">Hikari.vp_generate_ray_samples_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vp_generate_ray_samples_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Generate pre-computed Sobol samples for the current bounce. Following pbrt-v4&#39;s WavefrontPathIntegrator::GenerateRaySamples:</p><ul><li><p>For each active ray in the queue, generate 7 samples for this bounce</p></li><li><p>Samples are stored in pixel_samples indexed by pixel_index</p></li><li><p>Dimension allocation: 6 (camera) + 7 * depth</p></li></ul><p>This replaces rand() calls with correlated low-discrepancy samples.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/volpath.jl#L211-L221" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.vp_trace_shadow_rays_kernel!-NTuple{7, Any}" href="#Hikari.vp_trace_shadow_rays_kernel!-NTuple{7, Any}"><span class="jlbinding">Hikari.vp_trace_shadow_rays_kernel!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vp_trace_shadow_rays_kernel!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Trace shadow rays and accumulate unoccluded contributions. For rays through media, computes transmittance along the ray. Handles transmissive boundaries (MediumInterface) by tracing through them.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/intersection.jl#L558-L564" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.weight_color-NTuple{4, Float32}" href="#Hikari.weight_color-NTuple{4, Float32}"><span class="jlbinding">Hikari.weight_color</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">weight_color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lum_p, lum_q, sigma, variance) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Color/luminance edge-stopping weight. If variance &gt; 0, scales by sqrt(variance) for variance-guided filtering.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/denoise.jl#L70-L75" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.weight_depth-NTuple{4, Float32}" href="#Hikari.weight_depth-NTuple{4, Float32}"><span class="jlbinding">Hikari.weight_depth</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">weight_depth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(d_p, d_q, sigma, step_size) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Depth edge-stopping weight. Uses step size to adapt to increasing filter radius.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/denoise.jl#L105-L110" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.weight_normal-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32}" href="#Hikari.weight_normal-Tuple{GeometryBasics.Vec{3, Float32}, GeometryBasics.Vec{3, Float32}, Float32}"><span class="jlbinding">Hikari.weight_normal</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">weight_normal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(n_p, n_q, sigma) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Normal edge-stopping weight using dot product. High sigma means more tolerance for normal differences.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/denoise.jl#L90-L95" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.world_to_index_f-Tuple{Hikari.NanoVDBMedium, GeometryBasics.Point{3, Float32}}" href="#Hikari.world_to_index_f-Tuple{Hikari.NanoVDBMedium, GeometryBasics.Point{3, Float32}}"><span class="jlbinding">Hikari.world_to_index_f</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">world_to_index_f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(medium</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NanoVDBMedium</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Point3f</span></span></code></pre></div><p>Transform a point from world space to index space (floating point). Matches pbrt-v4&#39;s Grid::worldToIndexF exactly.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/integrators/volpath/nanovdb.jl#L394-L399" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.world_to_local-NTuple{4, GeometryBasics.Vec{3, Float32}}" href="#Hikari.world_to_local-NTuple{4, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.world_to_local</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">world_to_local</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v, n, tangent, bitangent) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Transform direction from world space to local (shading) space. In local space, the normal is (0, 0, 1).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/spectral-eval.jl#L3573-L3578" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.world_to_local-Tuple{Hikari.BSDF, GeometryBasics.Vec{3, Float32}}" href="#Hikari.world_to_local-Tuple{Hikari.BSDF, GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.world_to_local</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Given the orthonormal vectors s, t, n in world space, the matrix <code>M</code> that transforms vectors in world space to local reflection space is: sx, sy, sz tx, ty, tz nx, ny, nz</p><p>Since it is an orthonormal matrix, its inverse is its transpose.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/bsdf.jl#L76-L84" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.worley3d-Tuple{Any, Any, Any}" href="#Hikari.worley3d-Tuple{Any, Any, Any}"><span class="jlbinding">Hikari.worley3d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">worley3d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x, y, z; seed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float64</span></span></code></pre></div><p>3D Worley (cellular) noise. Returns distance to nearest feature point in [0, ~1.5]. The characteristic &quot;cell&quot; structure creates puffy, billowy patterns ideal for clouds.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/random.jl#L78-L83" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.worley_fbm3d-Tuple{Any, Any, Any}" href="#Hikari.worley_fbm3d-Tuple{Any, Any, Any}"><span class="jlbinding">Hikari.worley_fbm3d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">worley_fbm3d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x, y, z; octaves</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, persistence</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lacunarity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float64</span></span></code></pre></div><p>Multi-octave Worley noise for more detailed cellular patterns.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/random.jl#L111-L115" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.wrap_equal_area_square-Tuple{GeometryBasics.Point{2, Float32}}" href="#Hikari.wrap_equal_area_square-Tuple{GeometryBasics.Point{2, Float32}}"><span class="jlbinding">Hikari.wrap_equal_area_square</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">wrap_equal_area_square</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(uv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Point2f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Point2f</span></span></code></pre></div><p>Wrap UV coordinates for equal-area sphere mapping (octahedral wrapping). Handles coordinates outside [0,1]² by mirroring appropriately.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/environment_map.jl#L162-L167" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.xy_to_XYZ-Tuple{Float32, Float32}" href="#Hikari.xy_to_XYZ-Tuple{Float32, Float32}"><span class="jlbinding">Hikari.xy_to_XYZ</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">xy_to_XYZ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x, y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (X, Y, Z)</span></span></code></pre></div><p>Convert CIE xy chromaticity to XYZ with Y=1.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L495-L499" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.xyz_e_to_linear_srgb-Tuple{GeometryBasics.Vec{3, Float32}}" href="#Hikari.xyz_e_to_linear_srgb-Tuple{GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.xyz_e_to_linear_srgb</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">xyz_e_to_linear_srgb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xyz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Convert CIE XYZ (in Equal-Energy illuminant space) to linear sRGB (D65). This applies Bradford chromatic adaptation from E to D65 before the XYZ-to-sRGB transformation. Use this for spectral rendering where wavelength sampling assumes an equal-energy white spectrum.</p><p>Matrix values are inlined for performance and to avoid const reload issues.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L581-L590" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.xyz_to_linear_srgb-Tuple{GeometryBasics.Vec{3, Float32}}" href="#Hikari.xyz_to_linear_srgb-Tuple{GeometryBasics.Vec{3, Float32}}"><span class="jlbinding">Hikari.xyz_to_linear_srgb</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">xyz_to_linear_srgb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xyz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec3f</span></span></code></pre></div><p>Convert CIE XYZ to linear sRGB color space. Uses the standard XYZ to sRGB matrix (D65 white point). Note: This assumes XYZ is already in D65 illuminant space.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L565-L571" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.zsobol_get_sample_index-Tuple{UInt64, Int32, Int32, Int32}" href="#Hikari.zsobol_get_sample_index-Tuple{UInt64, Int32, Int32, Int32}"><span class="jlbinding">Hikari.zsobol_get_sample_index</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">zsobol_get_sample_index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(morton_index, dimension, log2_spp, n_base4_digits) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UInt64</span></span></code></pre></div><p>Compute the permuted sample index for ZSobol sampling. Reference: pbrt-v4/src/pbrt/samplers.h ZSobolSampler::GetSampleIndex (lines 301-356)</p><p>This applies random base-4 digit permutations to the Morton-encoded index, ensuring good sample distribution across pixels while maintaining low-discrepancy.</p><p>Uses compile-time unrolled loop with branchless operations for SPIR-V compatibility.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L203-L213" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.zsobol_hash-Tuple{Int32, UInt32}" href="#Hikari.zsobol_hash-Tuple{Int32, UInt32}"><span class="jlbinding">Hikari.zsobol_hash</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">zsobol_hash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dimension</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, seed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UInt32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UInt64</span></span></code></pre></div><p>Hash function for ZSobol scrambling, matching pbrt-v4&#39;s Hash(dimension, seed). Uses MurmurHash64A on the byte representation of (dimension, seed).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L11-L16" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.zsobol_sample_1d-Tuple{Int32, Int32, Int32, Int32, Int32, Int32, UInt32, Any}" href="#Hikari.zsobol_sample_1d-Tuple{Int32, Int32, Int32, Int32, Int32, Int32, UInt32, Any}"><span class="jlbinding">Hikari.zsobol_sample_1d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">zsobol_sample_1d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(px, py, sample_idx, dim, log2_spp, n_base4_digits, seed, sobol_matrices) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float32</span></span></code></pre></div><p>Generate a 1D Sobol sample for the given pixel and sample index.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L267-L271" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.zsobol_sample_2d-Tuple{Int32, Int32, Int32, Int32, Int32, Int32, UInt32, Any}" href="#Hikari.zsobol_sample_2d-Tuple{Int32, Int32, Int32, Int32, Int32, Int32, UInt32, Any}"><span class="jlbinding">Hikari.zsobol_sample_2d</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">zsobol_sample_2d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(px, py, sample_idx, dim, log2_spp, n_base4_digits, seed, sobol_matrices) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Float32, Float32)</span></span></code></pre></div><p>Generate a 2D Sobol sample for the given pixel and sample index. Uses two consecutive Sobol dimensions with independent scrambling seeds.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/sampler/sobol.jl#L287-L292" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.ρ_lambertian_reflection-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, Int32, Vector{GeometryBasics.Point{2, Float32}}}} where S&lt;:Hikari.Spectrum" href="#Hikari.ρ_lambertian_reflection-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, GeometryBasics.Vec{3, Float32}, Int32, Vector{GeometryBasics.Point{2, Float32}}}} where S&lt;:Hikari.Spectrum"><span class="jlbinding">Hikari.ρ_lambertian_reflection</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Directional-hemisphirical reflectance value is constant.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/lambertian.jl#L21-L23" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Hikari.ρ_lambertian_reflection-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, Vector{GeometryBasics.Point{2, Float32}}, Vector{GeometryBasics.Point{2, Float32}}}} where S&lt;:Hikari.Spectrum" href="#Hikari.ρ_lambertian_reflection-Union{Tuple{S}, Tuple{Hikari.UberBxDF{S}, Vector{GeometryBasics.Point{2, Float32}}, Vector{GeometryBasics.Point{2, Float32}}}} where S&lt;:Hikari.Spectrum"><span class="jlbinding">Hikari.ρ_lambertian_reflection</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Hemispherical-hemisphirical reflectance value is constant.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/reflection/lambertian.jl#L31-L33" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Raycore.maybe_convert_field-Tuple{Raycore.MultiTypeSet, Hikari.Texture}" href="#Raycore.maybe_convert_field-Tuple{Raycore.MultiTypeSet, Hikari.Texture}"><span class="jlbinding">Raycore.maybe_convert_field</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Raycore</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">maybe_convert_field</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dhv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MultiTypeSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Texture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Convert Hikari Texture to Raycore.TextureRef or raw value for MultiTypeSet storage.</p><ul><li><p>Const textures (scalars): return constval directly (no indirection needed)</p></li><li><p>Non-const textures (arrays): convert to TextureRef</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/textures/texture-ref.jl#L199-L205" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Raycore.sync!-Tuple{Hikari.Scene{&lt;:Raycore.TLAS}}" href="#Raycore.sync!-Tuple{Hikari.Scene{&lt;:Raycore.TLAS}}"><span class="jlbinding">Raycore.sync!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sync!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(scene</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Scene</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Build/rebuild the acceleration structure and update scene bounds. Call this after adding geometry with <code>push!</code>.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/scene.jl#L138-L143" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Raycore.to_gpu-Tuple{Any, Hikari.CIEXYZTable}" href="#Raycore.to_gpu-Tuple{Any, Hikari.CIEXYZTable}"><span class="jlbinding">Raycore.to_gpu</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">to_gpu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CIEXYZTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CIEXYZTable</span></span></code></pre></div><p>Convert CIEXYZTable to use GPU-compatible arrays. Uses KernelAbstractions backend for allocation.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/color.jl#L34-L39" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Raycore.to_gpu-Tuple{Any, Hikari.Emissive}" href="#Raycore.to_gpu-Tuple{Any, Hikari.Emissive}"><span class="jlbinding">Raycore.to_gpu</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">to_gpu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ArrayType, mat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Emissive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Convert Emissive to GPU-compatible form.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/materials/emissive.jl#L143-L147" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="Raycore.to_gpu-Tuple{Any, Hikari.RGBToSpectrumTable}" href="#Raycore.to_gpu-Tuple{Any, Hikari.RGBToSpectrumTable}"><span class="jlbinding">Raycore.to_gpu</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">to_gpu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(backend, table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RGBToSpectrumTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RGBToSpectrumTable</span></span></code></pre></div><p>Convert RGBToSpectrumTable to use GPU-compatible arrays. Uses KernelAbstractions backend for allocation.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/JuliaGraphics/Hikari.jl/blob/b7c6cf0f1bdf831b93ef5a5f303831f8d14e960f/src/spectral/rgb2spec.jl#L447-L452" target="_blank" rel="noreferrer">source</a><!--]--></span></details></div></div></main><footer class="VPDocFooter" data-v-83890dd9 data-v-4f9813fa><!--[--><!--]--><div class="edit-info" data-v-4f9813fa><div class="edit-link" data-v-4f9813fa><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/JuliaGraphics/Hikari.jl/edit/master/docs/src/api.md" target="_blank" rel="noreferrer" data-v-4f9813fa><!--[--><span class="vpi-square-pen edit-link-icon" data-v-4f9813fa></span> Edit this page<!--]--></a></div><!----></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-4f9813fa><span class="visually-hidden" id="doc-footer-aria-label" data-v-4f9813fa>Pager</span><div class="pager" data-v-4f9813fa><a class="VPLink link pager-link prev" href="/Hikari.jl/dev/materials" data-v-4f9813fa><!--[--><span class="desc" data-v-4f9813fa>Previous page</span><span class="title" data-v-4f9813fa>Materials</span><!--]--></a></div><div class="pager" data-v-4f9813fa><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-a9a9e638 data-v-c970a860><div class="container" data-v-c970a860><p class="message" data-v-c970a860>Made with <a href="https://luxdl.github.io/DocumenterVitepress.jl/dev/" target="_blank"><strong>DocumenterVitepress.jl</strong></a><br></p><p class="copyright" data-v-c970a860>© Copyright 2026.</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api.md\":\"BrcF7mWN\",\"get_started.md\":\"BLSW-kL_\",\"index.md\":\"112BQzZF\",\"materials.md\":\"CVySxf0y\",\"shadows.md\":\"DVBgcZ2M\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Hikari\",\"description\":\"Documentation for Hikari.jl\",\"base\":\"/Hikari.jl/dev/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"outline\":\"deep\",\"search\":{\"provider\":\"local\",\"options\":{\"detailedView\":true}},\"nav\":[{\"text\":\"Home\",\"link\":\"/index\"},{\"text\":\"Get Started\",\"link\":\"/get_started\"},{\"text\":\"Shadows\",\"link\":\"/shadows\"},{\"text\":\"Materials\",\"link\":\"/materials\"},{\"text\":\"API\",\"link\":\"/api\"},{\"component\":\"VersionPicker\"}],\"sidebar\":[{\"text\":\"Home\",\"link\":\"/index\"},{\"text\":\"Get Started\",\"link\":\"/get_started\"},{\"text\":\"Shadows\",\"link\":\"/shadows\"},{\"text\":\"Materials\",\"link\":\"/materials\"},{\"text\":\"API\",\"link\":\"/api\"}],\"editLink\":{\"pattern\":\"https://github.com/JuliaGraphics/Hikari.jl/edit/master/docs/src/:path\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/JuliaGraphics/Hikari.jl\"}],\"footer\":{\"message\":\"Made with <a href=\\\"https://luxdl.github.io/DocumenterVitepress.jl/dev/\\\" target=\\\"_blank\\\"><strong>DocumenterVitepress.jl</strong></a><br>\",\"copyright\":\"© Copyright 2026.\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>